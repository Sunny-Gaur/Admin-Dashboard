(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[1389],{

/***/ 413926:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;self._45f7853dc7660378a038952b53c0953e = self._45f7853dc7660378a038952b53c0953e || {};(function(__c) {/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var Yi;var T;var x;var B;var S;var G;var zh;var m;
var aa,da,l,ea,fa,ha,la,ja,qa,pa,na,va,xa,ya,Ba,Ca,Fa,Ea,Ga,Ha,p,Ia,Ja,Ka,Ma,Na,Oa,Pa,Ra,u,A,C,Sa,H,I,Ta,Ya,Xa,Ua,Va,Wa,E,Za,r,cb,bb,db,eb,hb,jb,kb,lb,mb,ob,pb,sb,zb,Bb,Cb,Db,Fb,Ib,Kb,Nb,Qb,Tb,Ub,Vb,Wb,Xb,Zb,cc,ec,ic,jc,kc,lc,nc,oc,uc,wc,Ec,Gc,vc,pc,qc,sc,Dc,Ic,Jc,Fc,Kc,L,Nc,Oc,Pc,Qc,Sc,Tc,Uc,Vc,Wc,Xc,Rc,Zc,$c,bd,cd,ad,dd,ed,N,hd,jd,kd,md,od,qd,rd,sd,td,ud,vd,wd,yd,Ad,xd,Bd,Cd,O,Ed,Fd,Hd,Id,Kd,Od,Qd,Sd,Td,Ud,Vd,ae,ee,ce,je,le,me,ne,pe,qe,se,ue,we,Be,Ce,De,Ee,Fe,Ie,Ke,Oe,Qe,Re,Se,Cc,Ue,Te,Ze,bf,cf,
hf,ff,kf,of,qf,rf,tf,uf,yf,zf,Af,Bf,Cf,Ff,Df,Ef,Gf,If,Mf,Nf,Of,Pf,Qf,Rf,Tf,Vf,Zf,$f,ag,bg,cg,dg,eg,gg,fg,ig,lg,kg,ng,mg,pg,rg,Dg,Hg,Fg,Gg,Cg,Kg,Lg,Ig,Jg,Ng,Mg,Pg,ch,dh,eh,ih,kh,lh,mh,nh,oh,ph,rh,qh,sh,th,vh,yh,xh,wh,Ah,Ch,Dh,Gh,Hh,Jh,Kh,Eh,Lh,Mh,Th,Ph,Uh,ei,bi,fi,oi,mi,ni,ca,ba;
aa=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};da=function(a,b){if(b)a:{var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ca(c,a,{configurable:!0,writable:!0,value:b})}};
l=function(a,b,...c){if(!a)throw Error(null==b?"invalid argument":ea(b,...c));};ea=function(a,...b){let c=0;return a.replace(/\{}/g,()=>c<b.length?b[c++]:"{}")};fa=function(a,b){var c=[];if(!a)throw Error(null==b?"invalid state":ea(b,...c));};ha=function(a,b,...c){if(null==a)throw Error(null==b?"argument is null":ea(b,...c));return a};
la=function(a,b,c){const d=c&&c.Fe;c=c&&c.Nh;if(!(a in ia)){const e=self.bootstrap;if(!e)throw Error("Could not find bootstrap");ia[a]=Object.assign({},e[a]);c||delete e[a]}return ja(a,b,d&&a in ka?ka[a]:void 0)};
ja=function(a,b,c){if(a in ma&&null==c&&null!=ma[a])return ma[a];null!=c&&0<c.size&&c.forEach((d,e)=>{e=e.split(".");let f=ia[a],g=e.shift();for(;e.length;)g in f||(f[g]=String(Number(e[0]))===e[0]?[]:{}),f=f[g],g=e.shift();f[g]=na(d,f[g])});b=b(oa.required(a,ia));ma[a]=null==c?b:void 0;return b};qa=function(){var a=window.location.search;const b={};["base","page","ui"].forEach(c=>{const d=pa(a,`bootstrap.${c}.`);0<d.size&&(b[c]=d)});return b};
pa=function(a,b){const c=new Map;(new URLSearchParams(a)).forEach((d,e)=>{e.startsWith(b)&&c.set(decodeURIComponent(e.replace(b,"").replace(/\+/g," ")),decodeURIComponent(d.replace(/\+/g," ")))});return c};
na=function(a,b){b=typeof b;switch(b){case "undefined":if(""===a)return!0;b=ra.exec(a);return null!=b?b[1]:sa.has(a)?sa.get(a):""!==a.trim()&&Number.isFinite(Number(a))?Number(a):ta.has(a)?ta.get(a):a;case "boolean":return l(sa.has(a),"boolean value expected: {}",a),sa.get(a);case "number":return l(""!==a.trim()&&Number.isFinite(Number(a)),"finite numeral expected: {}",a),Number(a);case "object":return l(ta.has(a),"object value expected: {}",a),ta.get(a);case "string":return b=ra.exec(a),null!=b?
b[1]:a;case "function":case "bigint":case "symbol":throw Error(`unexpected hint type: ${b}`);default:throw new m(b);}};va=function(a){return new ua(a)};xa=function(a){return new wa(a)};ya=function(a){return null!=a&&null!=a.then};Ba=function(a){let b;return(...c)=>{l(0===c.length);if(null==b)try{b=za(a()),ya(b.value)&&b.value.then(null,()=>!0)}catch(d){b=Aa(d)}if(b.ok)return b.value;throw b.error;}};
Ca=function(a){let b;b=a.read();let c=b&127;if(128>b)return c;b=a.read();c|=(b&127)<<7;if(128>b)return c;b=a.read();c|=(b&127)<<14;if(128>b)return c;b=a.read();c|=(b&127)<<21;if(128>b)return c;b=a.read();c|=(b&15)<<28;if(128>b)return c>>>0;if(128<=a.read()&&128<=a.read()&&128<=a.read()&&128<=a.read()&&128<=a.read())throw Error();return c};
Fa=async function(a,b){let c=a.init();const d={};await b.Ca(4);var e=Ca(b);for(e=b.$a+e;b.$a<e;){await b.Ca(4);var f=Ca(b);const {tag:h,Xa:k}={tag:f>>>3,Xa:f&7};2===c.type&&c.Pf.has(h)&&(a=c.Pf.get(h).$f,c=a.init());if((f=c.Ie[h])&&null==d[f.name])Ca(b),d[f.name]=f.value;else if(f=c.Qe[h])d[f.name]=await Ea(f,b);else switch(f=b,k){case -1:throw Error("Invalid WireType");case 0:for(;128<=f.read(););break;case 1:for(var g=0;8>g;++g)f.read();break;case 2:g=Ca(f);for(let n=0;n<g;++n)f.read();break;default:throw new m(k);
}}for(const {name:h,config:k}of c.yb)if(null==d[h])switch(k.T){case 3:break;case 2:if(null==k.defaultValue)throw new TypeError(`expected ${k.G} for property "${h}" with tag "${k.tag}", but it was not present.`);d[h]=k.defaultValue;break;case 5:d[h]=new Map;break;case 4:d[h]=[];break;case 1:if(!k.Ne)throw new TypeError(`expected discriminator for property "${h}" with tag "${k.tag}", but it was not present.`);d[h]=k.value;break;default:throw new m(k);}return Object.assign(Object.create(a.prototype),
d)};Ea=async function(a,b){switch(a.T){case 3:case 2:return a.M(b);case 4:await b.Ca(4);var c=Ca(b);c=b.$a+c;for(var d=[];b.$a<c;)d.push(await a.M(b));return d;case 5:await b.Ca(4);c=Ca(b);c=b.$a+c;for(d=new Map;b.$a<c;)d.set(await a.Dh(b),await a.M(b));return d;case 1:throw Error();default:throw new m(a);}};Ga=function(a,b){p(b===Math.floor(b));for(p(0<=b&&4294967296>b);127<b;)a.write(b&127|128),b>>>=7;a.write(b)};
Ha=function(a,b){p(b===Math.floor(b));p(-2147483648<=b&&2147483648>b);if(0<=b)Ga(a,b);else{for(let c=0;9>c;c++)a.write(b&127|128),b>>=7;a.write(1)}};p=function(a){if(!a)throw Error();};Ia=function(a){a.Nc++;a.write(-1);const b=a.Sa,c=a.ub,d=b.push(a.Za-1,0)-1;return()=>{const e=a.ub-c;let f=b[d]=e;for(;127<f;)a.ub++,f>>>=7;a.Nc--;return e}};Ja=function(a,b){for(let c=0;c<b.length;++c)a.write(b[c])};
Ka=function(a,b,c){var d=a.init();if(2===d.type){var e=c[d.Oe];a=d.kf.get(e);if(!a)throw new TypeError(`Unknown oneof deserialized case ${e}.`);Ka(a,b,c)}else{a=Ia(b);for(const {name:g,config:h}of d.yb)switch(d=c[g],h.T){case 3:if(null==d)break;Ja(b,h.la);h.L(b,d);break;case 2:if(null==d||h.defaultValue===d)break;Ja(b,h.la);h.L(b,d);break;case 4:if(!d.length)break;Ja(b,h.la);var f=Ia(b);for(let k=0;k<d.length;++k)h.L(b,d[k]);f();break;case 1:Ja(b,h.la);e=Ia(b);break;case 5:if(!d.size)break;Ja(b,h.la);
f=Ia(b);for(const [k,n]of d)h.oi(b,k),h.L(b,n);f();break;default:throw new m(h);}null===e||void 0===e?void 0:e();a()}};Ma=function(a,b){const c=new La;Ga(c,a<<3|b);return c.flush()};Na=function(a,b,c,d){return{tag:c,la:Ma(c,a.Xa),T:2,H:b,default:null!=d?d:a.defaultValue,L:a.L,M:a.M,defaultValue:a.defaultValue,G:a.G}};Oa=function(a,b,c){return{tag:c,la:Ma(c,a.Xa),T:3,H:b,L:a.L,M:a.M,defaultValue:a.defaultValue,G:a.G}};Pa=function(a,b,c){return{tag:c,la:Ma(c,2),T:4,H:b,L:a.L,M:a.M,G:a.G}};
Ra=function(a){return(b,c,d)=>{const {tag:e,H:f,oa:g}=r(b,c,d);"object"===a?(b=(h,k)=>Ka(g,h,k),c=h=>Fa(g,h),d="object"):"enum"===a?(b=g.Xd,c=g.Wd,d="string"):(b=a.L,c=a.M,d=a.G);return{T:5,tag:e,la:Ma(e,2),H:f,W:g,oi:Qa.L,Dh:Qa.M,L:b,M:c,xe:Qa.G,G:d}}};u=function(a,b){const {tag:c,H:d,oa:e}=r(a,b);return{tag:c,la:Ma(c,2),T:1,H:void 0,cf:d,value:e,Ne:!1,G:"string"}};x=__c.x=function(a,b){const {tag:c,H:d,oa:e}=r(a,b);return{tag:c,la:Ma(c,2),T:2,H:d,W:e,L:(f,g)=>Ka(e,f,g),M:f=>Fa(e,f),G:"object"}};
A=function(a,b){const {tag:c,H:d,oa:e}=r(a,b);return{tag:c,la:Ma(c,2),T:3,H:d,W:e,L:(f,g)=>Ka(e,f,g),M:f=>Fa(e,f),G:"object"}};B=__c.B=function(a,b){const {tag:c,H:d,oa:e}=r(a,b);return{tag:c,la:Ma(c,2),T:4,H:d,W:e,L:(f,g)=>Ka(e,f,g),M:f=>Fa(e,f),G:"object"}};C=function(a,b){const {tag:c,H:d,oa:e,rf:f}=r(a,b);return{tag:c,la:Ma(c,0),T:2,H:d,W:e,L:e.Xd,M:e.Wd,default:f,G:"string"}};Sa=function(a,b){const {tag:c,H:d,oa:e}=r(a,b);return{tag:c,la:Ma(c,0),T:3,H:d,W:e,L:e.Xd,M:e.Wd,G:"string"}};
G=__c.G=function(a){var b={};const c=Ba(()=>{const e=a();var f=Object.keys(e);const g={},h={};for(const k of f)switch(f=e[k],f.T){case 1:h[f.tag]=Object.assign({},f,{name:k});break;case 2:case 3:case 4:case 5:g[f.tag]=Object.assign({},f,{name:k});break;default:throw new m(f);}return{type:1,fields:e,yb:Ta(e,b.Rb),Qe:g,Ie:h}});class d{constructor(e={}){var {yb:f}=c();for(const g of f){f=g.config;const h=g.name,k=e[h];switch(f.T){case 1:this[h]=f.value;break;case 2:this[h]=null==k?f.default:k;break;
case 3:this[h]=k;break;case 4:this[h]=null==k?[]:k;break;case 5:this[h]=null==k?new Map:k;break;default:throw new m(f);}}}static xg(e={}){return new d(e)}static F(e){return d.Ua(e,[])}static D(e){return d.Ja(e,[])}static Ja(e,f){var {yb:g}=c();const h=Object.create(d.prototype);for(const F of g){const v=F.config,D=F.name;var k=F.U,n=F.qa,q=k;g=e[q];null==g&&null!=n&&null!=e[n]&&(q=n,g=e[q]);switch(v.T){case 3:if(null==g){h[D]=void 0;break}else if(typeof g!==v.G)throw Ua({U:k,qa:n},g,v.G,f);f.push(q);
h[D]=v.W?v.W.Ja(g,f):g;f.pop();break;case 2:if(null==g&&null!=v.defaultValue){h[D]=v.defaultValue;break}else if(null==g||typeof g!==v.G)throw Va({U:k,qa:n},g,v.G,f);f.push(q);h[D]=v.W?v.W.Ja(g,f):g;f.pop();break;case 1:var t=F.Rc;q=F.ie;if(null==g&&v.Ne){h[D]=v.value;break}if(g===t){h[D]=v.value;break}if(null!=q&&g===q){h[D]=v.value;break}e=t;var w=q;throw new TypeError(`Expected value ${w?`either "${e}" OR "${w}"`:`"${e}"`} for key ${Wa({U:k,qa:n})} found: ${JSON.stringify(g)} ${E(f)}`);case 4:if(null==
g){h[D]=[];break}else if(!Array.isArray(g))throw Xa({U:k,qa:n},g,v.G,f);if(t=null===(w=v.W)||void 0===w?void 0:w.Ja){var z=Array(g.length);for(var y=0;y<g.length;++y){if(typeof g[y]!==v.G)throw Va({U:k,qa:n},g[y],v.G,[...f,q],y);f.push(`${q}[${y}]`);z[y]=t(g[y],f);f.pop()}h[D]=z}else{for(t=0;t<g.length;++t)if(typeof g[t]!==v.G)throw Va({U:k,qa:n},g[t],v.G,[...f,q],t);h[D]=g}break;case 5:if(null==g){h[D]=new Map;break}else if("object"!==typeof g)throw new TypeError(`Expected Map for key ${Wa({U:k,
qa:n})}, found: ${JSON.stringify(g)} ${E(f)}`);k="number"===v.xe;n=Object.entries(g);t=Array(n.length);for(z=0;z<n.length;++z){const [R,U]=n[z];if(k){if(y=Number(R),isNaN(y))throw new TypeError(`Expected number map key, found: ${JSON.stringify(R)} ${E([...f,q])}`);}else y=R;if(typeof U!==v.G)throw new TypeError(`Expected ${v.G} map value for map key "${y}", found: ${JSON.stringify(g[R])} ${E([...f,q])}`);f.push(`${q}["${y}"]`);const Da=v.W?v.W.Ja(U,f):g[R];f.pop();t[z]=[y,Da]}h[D]=new Map(t);break;
default:throw new m(v);}}return h}}d.init=c;d.Ua=b.Yc?(e,f)=>{throw new TypeError(`Unproducible oneof case ${E(f)}`);}:(e,f)=>{var g,h;if(null==e||"object"!==typeof e)throw new TypeError(`Expected type object, found: ${JSON.stringify(e)} ${E(f)}`);var {yb:k}=c();const n={};for(const z of k){k=z.config;var q=z.U,t=e[z.name];const y=q;switch(k.T){case 1:if(t!==k.value)throw new TypeError(`Expected value ${JSON.stringify(k.value)} for key "${q}", found: ${JSON.stringify(t)} ${E(f)}`);n[y]=z.Rc;break;
case 2:if(null!=k.defaultValue&&t===k.defaultValue)break;f.push(y);var w=k.W?k.W.Ua(t,f):t;f.pop();if(typeof w!==k.G)throw Va({U:q},t,k.G,f);n[y]=w;break;case 3:if(null==t)break;f.push(y);w=k.W?k.W.Ua(t,f):t;f.pop();if(typeof w!==k.G)throw Ua({U:q},t,k.G,f);n[y]=w;break;case 4:if(null==t)break;else{if(!Array.isArray(t))throw Xa({U:q},t,k.G,f);if(0===t.length)break}if(w=null===(g=k.W)||void 0===g?void 0:g.Ua){const F=Array(t.length);for(let v=0;v<t.length;++v){f.push(`${y}[${v}]`);const D=w(t[v],f);
f.pop();if(typeof D!==k.G)throw Va({U:q},D,k.G,[...f,y],v);F[v]=D}n[y]=F}else{for(w=0;w<t.length;++w)if(typeof t[w]!==k.G)throw Va({U:q},t[w],k.G,[...f,y],w);n[y]=t}break;case 5:if(!(t instanceof Map))throw new TypeError(`Expected Map for key "${q}", found: ${JSON.stringify(t)} ${E(f)}`);if(0===t.size)break;q={};w=null===(h=k.W)||void 0===h?void 0:h.Ua;for(const [F,v]of t){if(typeof F!==k.xe)throw new TypeError(`Expected ${k.xe} map key, found: ${JSON.stringify(F)} ${E([...f,y])}`);f.push(`${y}["${F}"]`);
t=w?w(v,f):v;f.pop();if(typeof t!==k.G)throw new TypeError(`Expected ${k.G} map value for map key "${F}", found: ${JSON.stringify(t)} ${E([...f,y])}`);q[F]=t}n[y]=q;break;default:throw new m(k);}}return n};return d};
H=function(a,b){var c={};const d=Ba(()=>{var g=a();const h=Object.keys(g)[0];let k;const n=new Map,q=new Map,t=new Map;for(var w=0;w<g[h].length;w+=2){var z=g[h][w];const v=g[h][w+1],D=v.init().fields[h];if(!D)throw new TypeError("Missing discriminator.");if(1!==D.T)throw new TypeError(`Discriminator must be FieldType.CONSTANT, was ${D.T}.}`);var y=Ya("A?",D.H,c.Rb);const {Ea:R,Ta:U}=Ya(Za(z-1),D.cf,c.Rb);t.set(z,{$f:v,value:D.value});n.set(D.value,v);q.set(R,v);U&&q.set(U,v);if(k&&k.U!==y.Ea)throw new TypeError(`oneOf JSON keys are not consistent. ${k.U} ${y.Ea}`);
if(k&&k.qa!==y.Ta)throw new TypeError(`oneOf secondary JSON keys are not consistent. ${k.qa} ${y.Ta}`);z=D.tag;k={U:y.Ea,qa:y.Ta}}if(null==k||null==z)throw new TypeError("OneOf has no cases.");g=b();y=Object.keys(g);w={};for(var F of y)w[g[F].tag]=Object.assign({},g[F],{name:F});F=null!=c.zg?c.zg():void 0;return{type:2,yb:Ta(g,c.Rb),Oe:h,kf:n,Ni:z,Bg:k,Wh:q,Ag:F,fields:g,Qe:w,Ie:{},Pf:t}}),e=(g,h)=>{const {Oe:k,kf:n}=d(),q=g[k],t=n.get(q);if(!t)throw new TypeError(`Unknown oneof deserialized case: ${JSON.stringify(q)} ${E(h)}`);
return t.Ua(g,h)},f=(g,h)=>{const {Wh:k,Bg:n,Ag:q}=d();var t=n.qa;let w=g[n.U];null==w&&t&&(w=g[t]);if(null==w&&q)return q.Ja(g,h);t=k.get(w);if(!t)throw new TypeError(`Unknown oneof serialized case: ${JSON.stringify(w)} ${E(h)}`);return t.Ja(g,h)};return{init:d,F:g=>e(g,[]),Ua:e,D:g=>f(g,[]),Ja:f}};
I=function(a,b=0,c={}){const d=Ba(()=>{const g=a(),h=[],k=new Map,n=new Map,q=new Map,t=new Map,w=new Set;let z=0,y=1;for(;z<g.length;){const v=y++,D=g[z];var F=Za(D-b);z+=1;let R;const U=g[z];"string"===typeof U&&(R=U,z+=1);const {Ea:Da,Ta:tb}=Ya(F,R,c.Rb);F=g[z];"object"===typeof F&&F.Yc&&(w.add(v),z+=1);h.push(v);k.set(Da,v);tb&&k.set(tb,v);n.set(v,Da);q.set(v,D);t.set(D,v)}return{values:h,Vf:n,mi:q,Ch:t,Xh:k,Yc:w.size?w:void 0}}),e=(g,h,k)=>{const {Yc:n}=d();if(n&&n.has(g))throw new TypeError(`Unproducible enum value: ${JSON.stringify(g)} ${k?
E(k):""}`);h=h.get(g);if(null==h)throw new TypeError(`The proto enum serializer failed to serialize value ${JSON.stringify(g)} into JSON.
It does not recognize value ${JSON.stringify(g)} as a valid member of the TypeScript enum.
${k?E(k):""}`);return h},f=(g,h)=>{const k=d().Xh.get(g);if(null==k)throw new TypeError(`The proto enum deserializer failed to deserialize JSON ${JSON.stringify(g)} into an enum value.
It does not recognize JSON ${JSON.stringify(g)} as a valid JSON value encoding of the enum.
${E(h)}`);return k};return{values:()=>d().values,Kj:()=>{const {values:g,Yc:h}=d();return null==h?g:g.filter(k=>!h.has(k))},F:g=>e(g,d().Vf,[]),Ua:(g,h)=>e(g,d().Vf,h),D:g=>f(g,[]),Ja:f,Xd:(g,h)=>{h=e(h,d().mi);p(h===Math.floor(h));p(-2147483648<=h&&2147483648>h);Ha(g,h)},async Wd(g){const {Ch:h}=d();await g.Ca(4);return h.get(Ca(g))}}};
Ta=function(a,b){return Object.entries(a).map(([c,d])=>{let e=Za(d.tag-1);if(1===d.T){const {Ea:k,Ta:n}=Ya(e,d.cf,b);e="A?";var f={Rc:k,ie:n}}const {Ea:g,Ta:h}=Ya(e,d.H,b);return{config:d,name:c,U:g,qa:h,Rc:null===f||void 0===f?void 0:f.Rc,ie:null===f||void 0===f?void 0:f.ie}})};
Ya=function(a,b,c){if(!b){if(void 0!==c)throw Error("Dual Deserialization config templated but JSON full key/value wasn't");return{Ea:a}}if(void 0===c)return{Ea:b};if(c===$a)return{Ea:a,Ta:b};if(c===ab)return{Ea:b,Ta:a};throw Error("function should have been exhaustive, but wasn't");};Xa=function(a,b,c,d){return new TypeError(`Expected repeated ${c} value for key ${Wa(a)}, found: ${JSON.stringify(b)} ${E(d)}`)};Ua=function(a,b,c,d){return new TypeError(`Expected optional ${c} value for key ${Wa(a)}, found: ${JSON.stringify(b)} ${E(d)}`)};
Va=function(a,b,c,d,e){return new TypeError(`Expected ${c} value${void 0!==e?` at index ${e}`:""} for key ${Wa(a)}, found: ${JSON.stringify(b)} ${E(d)}`)};Wa=function(a){const b=a.U;return(a=a.qa)?`either "${b}" OR "${a}"`:`"${b}"`};E=function(a){return`(path: .${a.join(".")})`};
Za=function(a){if(64>a)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(a);const b=[];for(;0<a;)b.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(a%64)),a=Math.floor(a/64);return b.reverse().join("")};r=function(a,b,c){return"string"===typeof a?{H:a,tag:b,oa:c,rf:void 0}:{tag:a,oa:b,rf:c}};cb=function(a,b){var c=[];if(!a)throw new J({code:"BAD_REQUEST",message:bb(b,...c)});};
bb=function(a,...b){let c=0;return a.replace(/\{}/g,()=>c<b.length?b[c++]:"{}")};db=function(a){var b=[];if(!a)throw new J({code:"INTERNAL_ERROR",message:bb("renderAppElement must not be null",...b)});};eb=function(a,b,c){var d=[];if(null==a)throw new J({code:b,message:bb(c,...d)});return a};
hb=async function(a,b){b=fb.F(b);a=await a.B.request("CONTENT_V1_WHEN_MEDIA_UPLOADED",b);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"CONTENT_V1_WHEN_MEDIA_UPLOADED: Response cannot be empty"});return gb.D(a.value)};
jb=function({type:a,result:b,eb:c}){const d=b.type;switch(d){case "DONE":switch(a){case "IMAGE":return{ref:b.ref,whenUploaded:c({type:a,ref:b.ref,ba:b.ba})};case "VIDEO":return{ref:b.ref,whenUploaded:c({type:a,ref:b.ref,ba:b.ba})};case "AUDIO":return{ref:b.ref,whenUploaded:c({type:a,ref:b.ref,ba:b.ba})};default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected upload type '${a}'.`});}case "FAILED":throw ib(b.Ra);default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected result type '${d}'.`});
}};
kb=function({type:a,result:b,eb:c}){const d=b.type;switch(d){case "DONE":switch(a){case "IMAGE":return{type:"done",ref:b.ref,whenUploaded:c({type:a,ref:b.ref,ba:b.ba})};case "VIDEO":return{type:"done",ref:b.ref,whenUploaded:c({type:a,ref:b.ref,ba:b.ba})};case "AUDIO":return{type:"done",ref:b.ref,whenUploaded:c({type:a,ref:b.ref,ba:b.ba})};default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected upload type '${a}'.`});}case "FAILED":return{type:"failed",reason:{type:b.Ra}};default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected result type '${d}'.`});
}};lb=function(a){switch(a.type){case 1:return{name:a.name,type:"string",values:JSON.parse(a.values)};case 2:return{name:a.name,type:"number",values:JSON.parse(a.values)};case 4:return{name:a.name,type:"boolean",values:JSON.parse(a.values)};case 3:return{name:a.name,type:"date",values:JSON.parse(a.values).map(b=>null==b?b:new Date(b))};default:throw new K({code:"BAD_REQUEST",message:`Invalid column type '${a.type}'`});}};
mb=async function(a){a=await a.B.request("DATA_PROVIDER_V1_REGISTER_SELECT_DATA_TABLE_HANDLER");if(!a.ok)throw a.error;};ob=function(a,b){a.handle("DATA_PROVIDER_V1_SELECT_DATA_TABLE","NONE",async()=>{const c=await b.selectDataTable();return nb.F(c)})};
pb=function(a){switch(a.type){case "string":return{name:a.name,type:1,values:JSON.stringify(a.values)};case "number":return{name:a.name,type:2,values:JSON.stringify(a.values)};case "boolean":return{name:a.name,type:4,values:JSON.stringify(a.values)};case "date":return{name:a.name,type:3,values:JSON.stringify(a.values)};default:throw new m(a);}};sb=function(a,b,c){return{dataProvider:new qb(a,b,c),dataConsumer:new rb(a,b,c)}};
zb=function(a,b){a.handle("DI_V1_SEND_APP_ELEMENT_CHANGE","NONE",async c=>{c=c?ub.D(c):void 0;return b.ke(c)});a.handle("DI_V1_SEND_APP_ELEMENT_DROP","NONE",async c=>{if(void 0===c)throw new J({code:"INTERNAL_ERROR",message:"DI_V1_SEND_APP_ELEMENT_DROP: Request cannot be undefined"});c=vb.D(c);return wb.F(await b.Sh(c))});a.handle("DI_V1_SEND_SELECTION_ACTION_CHANGE_EVENT","NONE",async c=>{if(void 0===c)throw new J({code:"INTERNAL_ERROR",message:"DI_V1_SEND_SELECTION_ACTION_CHANGE_EVENT: Request cannot be undefined"});
c=xb.D(c);return b.Th(c)});a.handle("DI_V1_SEND_SELECTION_OVERLAY_CHANGE_EVENT","NONE",async c=>{if(void 0===c)throw new J({code:"INTERNAL_ERROR",message:"DI_V1_SEND_SELECTION_OVERLAY_CHANGE_EVENT: Request cannot be undefined"});c=yb.D(c);return b.Uh(c)})};
Bb=async function(a){a=await a.B.request("DI_V1_GET_APP_ELEMENT_ID");if(!a.ok){if(a.error instanceof J)throw new J({code:a.error.code,message:`${"Encountered an error while setting app element data"}: ${a.error.rawMessage}`});throw new J({code:"INTERNAL_ERROR",message:`${"Encountered an error while setting app element data"}: ${a.error}`});}if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"DI_V1_GET_APP_ELEMENT_ID: Response cannot be empty"});return Ab.D(a.value)};
Cb=async function(a,b){await a.B.request("DI_V1_CLEAR_APP_ELEMENT_ID",b)};Db=function(a){a.B.request("DI_V1_SUBSCRIBE_APP_ELEMENT_DATA_CHANGE").then(b=>{if(!b.ok)throw new J({code:"INTERNAL_ERROR",message:"Unable to subscribe to app element data change."});})};Fb=async function(a,b){a=await a.B.request("DI_V1_TRACK_APP_API_ELEMENT_ADD_OR_UPDATE_FAILED",Eb.F(b));if(!a.ok)throw a.error;};
Ib=async function(a,b){a=await a.B.request("DI_V1_GET_SELECTION_CONTENT",Gb.F(b));if(!a.ok||void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"Could not retrieve selection information."});return Hb.D(a.value)};Kb=async function(a,b){if(!(await a.B.request("DI_V1_UPDATE_SELECTION_CONTENT",Jb.F(b))).ok)throw new J({code:"INTERNAL_ERROR",message:"Could not save selection cotent."});};
Nb=async function(a,b){a=await a.B.request("DI_V1_SUBSCRIBE_SELECTION_ACTION_CHANGE",Lb.F(b));if(!a.ok||void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"Could not create selection listener."});return Mb.D(a.value)};Qb=async function(a,b){if(!(await a.B.request("DI_V1_UNSUBSCRIBE_SELECTION_ACTION_CHANGE",Pb.F(b))).ok)throw new J({code:"INTERNAL_ERROR",message:"Could not unsubscribe from selection listener."});};
Tb=async function(a,b){a=await a.B.request("DI_V1_OPEN_SELECTION_EVENT_OVERLAY",Rb(void 0,b[1]));if(!a.ok){if(a.error instanceof J)throw new J({code:a.error.code,message:`${"Encountered an error while creating selection event overlay."}: ${a.error.rawMessage}`});throw new J({code:"INTERNAL_ERROR",message:`${"Encountered an error while creating selection event overlay."}: ${a.error}`});}if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"DI_V1_OPEN_SELECTION_EVENT_OVERLAY: Response cannot be empty"});
return Sb.D(a.value)};Ub=async function(a){a.B.request("DI_V1_SUBSCRIBE_SELECTION_OVERLAY_CHANGE")};Vb=function(a){return Object.entries(a).reduce((b,[c,d])=>{"undefined"!==typeof d&&(b[c]=JSON.stringify(d));return b},{})};Wb=function(a){const b={};for(const [c,d]of a)b[c]=JSON.parse(d);return b};Xb=function(a){return"TEXT"===a.type?null!=a.top||null!=a.left||null!=a.width:null!=a.top||null!=a.left||null!=a.width||null!=a.height};
Zb=function(a){if(Xb(a))return"TEXT"===a.type?new Yb({top:a.top,left:a.left,width:"undefined"===typeof a.width?void 0:String(a.width),rotation:a.rotation}):new Yb({top:a.top,left:a.left,width:String(a.width),height:String(a.height),rotation:a.rotation})};cc=function(a){var b;return new $b({elements:null===(b=a.elements)||void 0===b?void 0:b.map(ac),background:a.background&&bc(a.background),title:a.title})};
ec=function(a){let b,c;Array.isArray(a.kb)?b=a.kb.map(ac):"INTERACTIVE_ELEMENT"===a.kb.type&&(c=new dc(a.kb));return new wb({Bd:a.og,rb:new Map(Object.entries(a.rb)),kb:b,interactiveElement:c,placement:a.placement&&new Yb({top:a.placement.top,left:a.placement.left,width:String(a.placement.width),height:String(a.placement.height),rotation:a.placement.rotation})})};
ic=function(a){a=a.map(b=>{if(!b)return new fc;if(b.ref)return new gc({ref:b.ref});if(b.text)return new hc({text:b.text});throw new J({code:"INTERNAL_ERROR",message:`Invalid SelectionValue: ${JSON.stringify(b)}`});});return new Hb({values:a})};jc=function(a){return a.values.map(b=>{switch(b.scope){case "TOMBSTONE":break;case "PLAINTEXT":return{text:b.text};case "IMAGE":return{ref:b.ref};default:throw new J({code:"INTERNAL_ERROR",message:`Invalid ProtoSelectionValue: ${JSON.stringify(b)}`});}})};
kc=function(a){switch(a){case "plaintext":return 1;case "image":return 2;default:throw new J({code:"INTERNAL_ERROR",message:`Invalid scope: ${a}`});}};lc=function(a){var b=a.cc.id;a:{var c=a.scope;switch(c){case 1:c="plaintext";break a;case 2:c="image";break a;default:throw new J({code:"INTERNAL_ERROR",message:`Invalid scope: ${c}`});}}return{id:b,scope:c,count:a.count}};
nc=function(a,b){let c=()=>Promise.resolve();Nb(a.A,new Lb({scope:kc("image")})).then(d=>{const {id:e,Ab:f}={id:d.gf.id,Ab:lc(d.Ab)};c=async()=>{await Qb(a.A,new Pb({id:e}))};const g=h=>{var k,n;(null===(k=a.Ac)||void 0===k?void 0:k.cc)!==h.id&&(null===(n=a.Ac)||void 0===n?void 0:n.Ib&&(n.Ib=!1),a.Ac=new mc(h));if("image"===h.scope){var q=eb(a.Ac,"INTERNAL_ERROR","this.currentInternalSelectionOverlay should exist.");b({get canOpen(){return q.canOpen},get reason(){return q.reason},open:async t=>{if(!q.canOpen)throw new J({code:"BAD_REQUEST",
message:"Overlay can not be opened."});a.Jd||(a.Jd=!0,Ub(a.A).catch(()=>a.Jd=!1));try{return q.ec(!0),(await Tb(a.A,[void 0,t.launchParameters])).gg}catch(w){throw q.ec(!1),new J({code:"INTERNAL_ERROR",message:"There was an issue with opening selection overlay. Please try again."});}}})}};a.Bf.set(e,h=>g(h));g(f)});return()=>{c()}};oc=function(a,b){a.Bf.forEach(c=>c(b))};
uc=function(a){var b=a.children;L(null!=b,"TextElement children must exist.","invalid_element_state");L(Array.isArray(b)&&b.every(c=>"string"===typeof c),"TextElement children must be an array of string.","invalid_element_state");L(1===b.length,"TextElement children must have length of 1.","invalid_element_state");L(0!==b[0].length,"TextElement children cannot be an empty string.","invalid_element_state");a=Object.assign({},a,a.fontSize&&{fontSize:pc(a.fontSize)},null!=a.color&&{color:qc(a.color)});
a.fontRef&&L(rc.test(a.fontRef),"Invalid font reference","invalid_element_state");a.fontSize&&L(sc(a.fontSize,1,1E3),"Text fontSize should be between [1, 1000]","invalid_element_state");a.textAlign&&L(["start","center","end"].includes(a.textAlign),'Incorrect fontAlign value. Allowed values: "start" | "center" | "end".',"invalid_element_state");if(a.fontWeight){a:switch(a.fontWeight){case "normal":case "thin":case "extralight":case "light":case "medium":case "semibold":case "bold":case "ultrabold":case "heavy":b=
!0;break a;default:b=!1}L(b,`Incorrect fontWeight value. Allowed values: ${tc}.`,"invalid_element_state")}a.fontStyle&&L(["normal","italic"].includes(a.fontStyle),'Incorrect fontStyle value. Allowed values: "normal" | "italic".',"invalid_element_state");a.decoration&&L(["none","underline"].includes(a.decoration),'Incorrect decoration. Allowed values: "none" | "underline".',"invalid_element_state");return a};
wc=function(a,b){L(1<b.children.length,"There should be at least 2 elements in a group element's children.","invalid_element_state");return Object.assign({},b,{children:b.children.map(c=>vc(a,c))})};
Ec=function(a,b){L(null!=b,"element must exist","invalid_element_state");b=Object.assign({},b,"top"in b&&{top:void 0},"left"in b&&{left:void 0},"width"in b&&{width:void 0},"height"in b&&{height:void 0},"rotation"in b&&{rotation:void 0});var c=b.type;switch(c){case "IMAGE":c=b.dataUrl;a=b.ref;L(null!=c||null!=a,"Image must have either media ref or dataUrl.","invalid_element_state");L(!(null!=c&&null!=a),"Image elements cannot have both media ref and dataUrl.","invalid_element_state");if(null!=c){L(xc.test(c),
"invalid image dataUrl","invalid_element_state");var d=c.substring(c.indexOf(":")+1,c.indexOf(";"));switch(d){case "image/png":case "image/jpeg":break;case "image/svg+xml":if(yc.test(c))c=atob(c.replace(yc,""));else throw new J({code:"BAD_REQUEST",message:`Failed to load svg from image url: ${c}.`});c=c.toLowerCase();c=c.includes("<script")||c.includes("<metadata")||c.includes("<style");L(!c,"The following SVG tags <script>, <metadata> and <style> are not supported.","invalid_element_state");break;
default:throw new J({code:"BAD_REQUEST",message:`Invalid and/or unsupported image url mime type: '${d}'.`});}}null!=a&&L(zc.test(a),"invalid image media reference","invalid_element_state");return b;case "VIDEO":return L(null!=b.ref,"Video must have a video reference.","invalid_element_state"),L(Ac.test(b.ref),"Invalid video reference","invalid_element_state"),b;case "EMBED":return a=b.url,L(null!=a,"embed url must exist","invalid_element_state"),L(Bc.test(a),"invalid embed url","invalid_element_state"),
b;case "TEXT":return uc(b);case "SHAPE":b=Object.assign({},b);c=b.viewBox;a=b.paths;L(null!=c,"Shape viewBox must exist.","invalid_element_state");L(sc(c.top,-M,M-1),`viewBox top should be between [${-M}, ${M-1}]`,"invalid_element_state");L(sc(c.left,-M,M-1),`viewBox left should be between [${-M}, ${M-1}]`,"invalid_element_state");L(sc(c.width,0,M-1,{Ed:!0}),`viewBox width should be between (0, ${M-1}]`,"invalid_element_state");L(sc(c.height,0,M-1,{Ed:!0}),`viewBox height should be between (0, ${M-
1}]`,"invalid_element_state");L(null!=a,"Shape paths must exist.","invalid_element_state");L(0<a.length&&30>=a.length,"There should be least 1 path and a maximum of 30 paths.","invalid_element_state");c=new Set;d=0;for(var e=0;e<a.length;e++){var f=a[e],g=f.fill,h=f.stroke,k=f.d;void 0===f.fill.dropTarget&&console.warn("Fill dropTarget should not be undefined. Please provide an explicit value.");null!=g.color&&(g.color=qc(g.color));if(null!=g.asset)switch(g.asset.type){case "IMAGE":L(zc.test(g.asset.ref),
"Invalid image media reference","invalid_element_state");break;case "VIDEO":L(Ac.test(g.asset.ref),"Invalid video reference","invalid_element_state");break;default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected asset type: ${g.asset}.`});}h&&(h.color=qc(h.color),L(sc(h.weight,0,100),"Path stroke weight must be between 0 and 100.","invalid_element_state"),L("inset"===h.strokeAlign,"Path stroke alignment should be inset.","invalid_element_state"));L(null!=k&&0<k.length,"Path must exist and cannot be empty.",
"invalid_element_state");h="m"===k[0].toLowerCase();L(h,"Path should begin with a move command.","invalid_element_state");h=k.match(/[mM]/g);L(!(h&&1<h.length),"Path should not have multiple move command.","invalid_element_state");h=k.match(/[qQ]/g);L(!(h&&0<h.length),"Quadratic bezier curve is not supported in path.","invalid_element_state");k=k.match(/\.[^\d]/g);L(!(k&&0<k.length),"Path contains invalid number.","invalid_element_state");c.add(g.color);d+=f.d.length}L(6>=c.size,"There should be a maximum of 6 distinct fill colors.",
"invalid_element_state");L(2048>=d,"There should be a maximum of 2048 bytes for all paths.","invalid_element_state");return b;case "GROUP":return wc(a,b);case "TABLE":Cc(a.K,"addNativeElement","TableElement");a={type:"TABLE",rows:[]};for(c=0;c<b.rows.length;c++){d=[];for(e=0;e<b.rows[c].cells.length;e++){g=b.rows[c].cells[e];f=g.text&&uc(g.text);if(k=g.fill)k=g.fill,h={},null!=k.color&&(h.color=qc(k.color)),k=h;f={text:f,fill:k,rowSpan:void 0!==g.rowSpan?Dc(g.rowSpan):void 0,colSpan:void 0!==g.colSpan?
Dc(g.colSpan):void 0};d.push(f)}a.rows.push({cells:d})}return a;default:throw new K({code:"BAD_REQUEST",message:`Invalid element type: ${c}`});}};
Gc=function(a){L(!("auto"===a.width&&"auto"===a.height),'Height and width cannot both be set to "auto".',"invalid_element_placement");var b=Object,c=b.assign,d=null!=a.top&&{top:pc(a.top)},e=null!=a.left&&{left:pc(a.left)},f=null!=a.width&&{width:Fc(a.width)},g=null!=a.height&&{height:Fc(a.height)},h;if(h=null!=a.rotation)a=pc(a.rotation)%360,h={rotation:180<=a?a-360:-180>a?a+360:a};b=c.call(b,{},d,e,f,g,h);null!=b.top&&L(sc(b.top,-M,M-1),`top should be between [${-M}, ${M-1}]`,"invalid_element_placement");
null!=b.left&&L(sc(b.left,-M,M-1),`left should be between [${-M}, ${M-1}]`,"invalid_element_placement");null!=b.width&&"number"===typeof b.width&&L(sc(b.width,0,M-1),`width should be between (${0}, ${M-1}]`,"invalid_element_placement");null!=b.height&&"number"===typeof b.height&&L(sc(b.height,0,M-1),`height should be between (${0}, ${M-1}]`,"invalid_element_placement");null!=b.rotation&&L(sc(b.rotation,-180,180),"rotation must be between -180deg to 180deg","invalid_element_placement");return b};
vc=function(a,b){L(!("TEXT"===b.type&&"auto"===b.width),"Text element width cannot be set to 'auto'","invalid_element_placement");const c={top:b.top,left:b.left,width:b.width,height:"height"in b?b.height:void 0,rotation:b.rotation};a=Object.assign({},Ec(a,b),Gc(c));"TEXT"===b.type?L(null!=b.top&&null!=b.left,"Top and left properties must be defined for TextElement with box.","invalid_element_placement"):L(null!=b.top&&null!=b.left&&null!=b.width&&null!=b.height,"All box properties (top, left, width, height) must exist for elements with box.",
"invalid_element_placement");return a};pc=function(a){if(!Number.isFinite(a))throw new J({code:"BAD_REQUEST",message:`Number ${a} should be finite.`});return-.001<=a&&.001>=a?0:parseFloat(a.toPrecision(6))};qc=function(a){L(Hc.test(a),`Invalid color: ${a}. Color should be a valid 6 digit hex color code.`,"invalid_element_state");return a.toLowerCase()};
sc=function(a,b,c,d){return Number.isFinite(a)?(null===d||void 0===d?0:d.Ed)&&(null===d||void 0===d?0:d.Og)?a>b&&a<c:(null===d||void 0===d?0:d.Ed)?a>b&&a<=c:(null===d||void 0===d?0:d.Og)?a>=b&&a<c:a>=b&&a<=c:!1};Dc=function(a){if(!Number.isFinite(a)||!Number.isInteger(a)||0>=a)throw new J({code:"BAD_REQUEST",message:`Number ${a} should be an integer greater than 0.`});return a};
Ic=function(a){if("string"!==typeof a)throw new J({code:"BAD_REQUEST",message:"Page title must be a string"});if(255<a.length)throw new J({code:"BAD_REQUEST",message:"Page title must be no longer than 255 characters"});return a};
Jc=function(a){const b={};null!=a.color&&(b.color=qc(a.color));if(null!=a.asset){switch(a.asset.type){case "IMAGE":L(zc.test(a.asset.ref),"Invalid image media reference","invalid_element_state");break;case "VIDEO":L(Ac.test(a.asset.ref),"Invalid video reference","invalid_element_state");break;default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected asset type: ${a.asset}.`});}b.asset=a.asset}return b};Fc=function(a){return"auto"===a?"auto":pc(a)};
Kc=function(a){const b=Vb(a);try{var c=(new TextEncoder).encode(JSON.stringify(b)).length}catch(d){c=0}if(5120<c)throw new J({code:"QUOTA_EXCEEDED",message:"Invalid app config data: Maximum limit of 5KB exceeded."});Object.keys(a).forEach(d=>{if(d.includes("$")||d.includes(".")||d.includes("\x00"))throw new J({code:"BAD_REQUEST",message:"Invalid app config data: AppElementData keys can not include '$' or '.' or '\x00' sign."});});return b};
L=function(a,b,c){if(!a)switch(c){case "invalid_element_placement":throw new J({code:"BAD_REQUEST",message:`Invalid element placement: ${b}`});case "invalid_element_state":throw new J({code:"BAD_REQUEST",message:`Invalid element state: ${b}`});default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected error type: ${c}.`});}};
Nc=function(a,{scope:b,onChange:c}){a.l("registerOnSelectionChange");if(!Lc.includes(b))throw new J({code:"BAD_REQUEST",message:`${b} is not a valid selection scope.`});let d=()=>Promise.resolve();Nb(a.A,new Lb({scope:kc(b)})).then(e=>{const {id:f,Ab:g}={id:e.gf.id,Ab:lc(e.Ab)};d=async()=>{await Qb(a.A,new Pb({id:f}));a.Sc.delete(f)};const h=k=>{k.scope===b&&c({count:k.count,scope:b,read:async()=>{const n=await Ib(a.A,new Gb({id:k.id}));return new Mc(a.A,k.id,b,jc(n),()=>a.Sc.has(f))}})};a.Sc.set(f,
k=>{h(k)});h(g)});return()=>{d()}};Oc=function(a,{target:b,onOpenable:c}){a.l("registerOnOverlayOpenableChange");switch(b){case "image_selection":return nc(a.je,c);default:throw new J({code:"BAD_REQUEST",message:"Invalid overlay target."});}};
Pc=async function(a,{error:b,tc:c,data:d}){try{var e=a.A;var f=new Eb({Ng:{code:b.code,message:b.rawMessage},tc:c,data:d?new Map(Object.entries(d)):void 0});await Fb(e,f)}catch(g){if(g instanceof J)throw new J({code:g.code,message:`${"Encountered an error while trackAppApiElementAddedOrUpdatedFailed"}: ${g.rawMessage}`});throw new J({code:"INTERNAL_ERROR",message:`${"Encountered an error while trackAppApiElementAddedOrUpdatedFailed"}: ${g instanceof Error?g.message:g}`});}};
Qc=function(a,b){db(null!=a.ac);b=a.ac(b);if(Array.isArray(b))b=b.map(c=>{const d=c.type;switch(d){case "EMBED":case "TEXT":case "SHAPE":case "IMAGE":return vc(a.cd,c);default:throw new K({code:"BAD_REQUEST",message:`Unsupported element type '${d}' in app element.`});}});else{L(null!=b,"element must exist","invalid_element_state");if("INTERACTIVE_ELEMENT"!==b.type)throw new J({code:"INTERNAL_ERROR",message:`Attempting to validate element of type 'INTERACTIVE_ELEMENT', but received '${b.type}'`});
b=Object.assign({},{type:b.type},Gc({width:b.width,height:b.height}))}return b};Sc=function(a){return new Promise(b=>{if(!Rc(a))return b(!1);const c=document.createElement("img");c.onload=()=>b(!0);c.onerror=()=>b(!1);c.src=a})};Tc=async function(a){const b=[Sc(a.fullSizeSrc)];a.previewUrl&&a.previewUrl!==a.fullSizeSrc&&b.push(Sc(a.previewUrl));if(0<(await Promise.all(b)).filter(c=>!c).length)throw new J({code:"BAD_REQUEST",message:"image could not be loaded"});};
Uc=function(a){try{return"string"===typeof a&&null!=(new URL(a)).toString()}catch(b){return!1}};Vc=function(a){return a instanceof Function};Wc=function(a,b){return"string"===typeof a&&(!b||a.length>=b)};Xc=function(a){return"number"===typeof a&&0<a};Rc=function(a){var b;return Wc(a)&&1===(null===(b=a.match(/^data:(?:image\/jpeg|image\/png)(?:;base64)?,/))||void 0===b?void 0:b.length)};Zc=function(a){return Wc(a)&&Yc.has(a)};$c=function(a,b){return b.some(c=>c===a)};
bd=function(a){return null!=a&&"object"===typeof a&&ad(a,{width:4,height:4})};cd=function(a,b){switch(b){case 1:return Rc(a);case 3:return Zc(a);case 2:return"number"===typeof a;case 0:return Wc(a);case 4:return Xc(a);default:throw new m(b);}};
ad=function(a,b,c){if("object"!==typeof a||(null===a||void 0===a?void 0:a.constructor)!==Object)return!1;const d=new Set(Object.keys(b)),e=new Set(c?Object.keys(c):[]);for(const f of Object.keys(a)){const g=e.has(f);if(!d.has(f)&&!g)throw new J({code:"BAD_REQUEST",message:`The following unexpected key was supplied: ${f}`});d.delete(f);const h=b[f]||(null===c||void 0===c?void 0:c[f])||(()=>!1);if(null==h)return!1;const k=a[f];if(!(g&&void 0===a[f]||(h instanceof Function?h(k):cd(k,h))))return!1}if(0===
d.size)return!0;throw new J({code:"BAD_REQUEST",message:`The following required keys were not supplied: ${Array.from(d).join(", ")}`});};dd=function(a,b,c){if($c(a,b))return!0;throw new J({code:"BAD_REQUEST",message:`${c||a} must be one of ${b.join(", ")}`});};ed=function(a){return Wc(a)&&rc.test(a)};
N=function(a,b,c,d){d=void 0===d?!1:d;try{if(b(a)||d&&void 0===a)return!0}catch(e){if(e instanceof J)throw e;throw new J({code:"BAD_REQUEST",message:"string"===typeof e?e:`Error encountered while validating '${a}': ${e}`});}throw new J({code:"BAD_REQUEST",message:c});};hd=function(a){return N(a,b=>ad(b,fd,gd),"'UserData' is invalid")};jd=function(a){var b=Object.assign({},id);const c=id.type,d=(delete b.type,b);N(a,e=>ad(e,d,{type:c}),"'UserData' is invalid")};
kd=function(a){N(a,b=>ad(b,{},Object.assign({},fd,gd)),"'UserData' is invalid",!0)};
md=function(a){N(a,b=>ad(b,{type:c=>dd(c,["TEXT"],"type"),fontStyle:c=>dd(c,["italic","normal"],"fontStyle"),decoration:c=>dd(c,["underline","none"],"decoration"),fontWeight:c=>dd(c,ld,"fontWeight"),textAlign:c=>dd(c,["start","center","end"],"textAlign"),children:c=>N(c,d=>{var e=Wc;return Array.isArray(d)&&d.every(e)},'"children must be a string array')},{fontRef:c=>N(c,ed,"Invalid font reference",!0)}),"'TextDragData' is invalid",!1)};
od=function(a){var b=Object.assign({},nd);const c=nd.fullSize,d=(delete b.fullSize,b);return N(a,e=>ad(e,d,{fullSize:c}),"'UserData' is invalid")};qd=function(a){return N(a,b=>ad(b,pd),"'UserData' is invalid")};rd=function(a){var b=Object.assign({},nd);const c=nd.type,d=nd.resolveVideoRef,e=(delete b.type,delete b.resolveVideoRef,b);N(a,f=>ad(f,{type:c,resolveVideoRef:d},e),"'UserData' is invalid")};sd=function(a){try{return"string"===typeof a&&null!=(new URL(a)).toString()}catch(b){return!1}};
td=function(a){return a instanceof Function};ud=function(a,b){return"string"===typeof a&&(!b||a.length>=b)};vd=function(a){return"number"===typeof a&&0<a};wd=function(a,b){return b.some(c=>c===a)};yd=function(a){return null!=a&&"object"===typeof a&&xd(a,{width:4,height:4})};
Ad=function(a,b){switch(b){case 1:var c;return ud(a)&&1===(null===(c=a.match(/^data:(?:image\/jpeg|image\/png)(?:;base64)?,/))||void 0===c?void 0:c.length);case 3:return ud(a)&&zd.has(a);case 2:return"number"===typeof a;case 0:return ud(a);case 4:return vd(a);default:throw new m(b);}};
xd=function(a,b,c){if("object"!==typeof a||(null===a||void 0===a?void 0:a.constructor)!==Object)return!1;const d=new Set(Object.keys(b)),e=new Set(c?Object.keys(c):[]);for(const f of Object.keys(a)){const g=e.has(f);if(!d.has(f)&&!g)throw new J({code:"BAD_REQUEST",message:`The following unexpected key was supplied: ${f}`});d.delete(f);const h=b[f]||(null===c||void 0===c?void 0:c[f])||(()=>!1);if(null==h)return!1;const k=a[f];if(!(g&&void 0===a[f]||(h instanceof Function?h(k):Ad(k,h))))return!1}if(0===
d.size)return!0;throw new J({code:"BAD_REQUEST",message:`The following required keys were not supplied: ${Array.from(d).join(", ")}`});};Bd=function(a,b,c){if(wd(a,b))return!0;throw new J({code:"BAD_REQUEST",message:`${c||a} must be one of ${b.join(", ")}`});};Cd=function(a){return ud(a)&&rc.test(a)};
O=function(a,b,c,d){d=void 0===d?!1:d;try{if(b(a)||d&&void 0===a)return!0}catch(e){if(e instanceof J)throw e;throw new J({code:"BAD_REQUEST",message:"string"===typeof e?e:`Error encountered while validating '${a}': ${e}`});}throw new J({code:"BAD_REQUEST",message:c});};Ed=function(a){var b=Object.assign({},Dd);const c=Dd.type,d=(delete b.type,b);O(a,e=>xd(e,d,{type:c}),"'UserData' is invalid")};
Fd=function(a){O(a,b=>xd(b,{type:c=>Bd(c,["TEXT"],"type"),fontStyle:c=>Bd(c,["italic","normal"],"fontStyle"),decoration:c=>Bd(c,["underline","none"],"decoration"),fontWeight:c=>Bd(c,ld,"fontWeight"),textAlign:c=>Bd(c,["start","center","end"],"textAlign"),children:c=>O(c,d=>Array.isArray(d)&&d.every(ud),'"children must be a string array')},{fontRef:c=>O(c,Cd,"Invalid font reference",!0)}),"'TextDragData' is invalid",!1)};
Hd=function(a){var b=Object.assign({},Gd);const c=Gd.fullSize,d=(delete b.fullSize,b);return O(a,e=>xd(e,d,{fullSize:c}),"'UserData' is invalid")};Id=function(a){var b=Object.assign({},Gd);const c=Gd.type,d=Gd.resolveVideoRef,e=(delete b.type,delete b.resolveVideoRef,b);O(a,f=>xd(f,{type:c,resolveVideoRef:d},e),"'UserData' is invalid")};Kd=function(a){return O(a,b=>xd(b,Jd),"'UserData' is invalid")};
Od=function(a,b){a.handle("DND_V1_RESOLVE_QUEUED_IMAGE","NONE",async()=>{const c=await b.fe();return Ld.F(c)});a.handle("DND_V1_RESOLVE_QUEUED_VIDEO","NONE",async()=>{const c=await b.Lh();return Md.F(c)});a.handle("DND_V1_RESOLVE_QUEUED_AUDIO","NONE",async()=>{const c=await b.$d();return Nd.F(c)})};Qd=async function(a,b){a=await a.B.request("DND_V2_START_DRAG",Pd.F(b));if(!a.ok)throw a.error;};Sd=async function(a,b){a=await a.B.request("DND_V1_SYNC_DRAG",Rd.F(b));if(!a.ok)throw a.error;};
Td=function(a={}){return("IMAGE"===(null===a||void 0===a?void 0:a.type)||null==(null===a||void 0===a?void 0:a.type))&&null!=a.resolveImageRef};Ud=async function(a){try{await Tc(a)}catch(b){if(b instanceof J)throw new J({code:b.code,message:`Encountered an error while dragging element: ${b.rawMessage}`});throw new J({code:"INTERNAL_ERROR",message:`Encountered an error while dragging element: ${b}`});}};Vd=function(a){switch(a){case "start":case "end":case "center":return a;default:return"start"}};
ae=function(a,b,c,d){return async e=>{const f=await d();c.onDragStart(b);a.Kd=void 0;try{switch(a.Cc.start(),f.type){case void 0:case "IMAGE":null!=f.resolveImageRef?(a.Hf(f.resolveImageRef),await a.A.startDrag(new Wd(Object.assign({},f,e)))):await a.A.startDrag(new Xd(Object.assign({},f,e)));break;case "TEXT":await a.A.startDrag(new Yd(Object.assign({},f,e)));break;case "VIDEO":a.Mf(f.resolveVideoRef);await a.A.startDrag(new Zd(Object.assign({},f,e)));break;case "AUDIO":a.Ef(f.resolveAudioRef);await a.A.startDrag(new $d(Object.assign({},
f,e)));break;default:throw new m(f);}}finally{a.Cc.stop(),c.onDragEnd(b)}}};
ee=async function(a,b,c,d,e){const f=null===c||void 0===c?void 0:c.type;if(!f||!be.includes(f))throw new J({code:"BAD_REQUEST",message:`Unsupported and/or invalid drag data type: '${null===c||void 0===c?void 0:c.type}'`});switch(f){case "TEXT":b=await a.Sf.gb(b,c);await ce(a,de(b,d),e);break;case "IMAGE":b=await a.We.gb(b,c);a.Kd=void 0;a.Hf(b.resolveImageRef);await ce(a,de(b,d),e);break;case "VIDEO":b=await a.Wf.gb(b,c);a.Mf(b.resolveVideoRef);await ce(a,de(b,d),e);break;case "AUDIO":b=a.Ge.gb(c);
a.Ef(b.resolveAudioRef);await ce(a,de(b,d),e);break;case "EMBED":await ce(a,de(c,d),e);break;default:throw new m(f);}};ce=async function(a,b,c){try{a.Cc.start(),await Qd(a.A,b)}finally{a.Cc.stop(),c()}};je=function(a,b,c){return{designInteraction:new fe(a,b,c),dragAndDrop:new ge(a,new he(a,c),b,c),export:new ie(a,c)}};le=function(a,b){a.handle("IE_V1_SEND_APP_ELEMENT_DATA_CHANGE","NONE",async c=>{c=c?ke.D(c):void 0;return b.ke(c)})};
me=function(a){a.B.request("IE_V1_SUBSCRIBE_TO_APP_ELEMENT_DATA_CHANGE").then(b=>{if(!b.ok)throw new J({code:"INTERNAL_ERROR",message:"Unable to subscribe to app element data change."});})};ne=function(a){return Object.entries(a).reduce((b,[c,d])=>{"undefined"!==typeof d&&b.set(c,JSON.stringify(d));return b},new Map)};pe=async function(a,b){b=oe.F(b);await a.B.request("NATIVE_FETCH_ANALYTICS_V1_TRACK_NATIVE_FETCH_CALL",b)};
qe=async function(a){a=await a.B.request("UI_CONTEXT_V1_SUBSCRIBE_TO_UI_CONTEXT_CHANGE");if(!a.ok)throw a.error;};se=async function(a,b){b=re.F(b);a=await a.B.request("REGISTER_UNSTABLE_API_USAGE_V1",b);if(!a.ok)throw a.error;};ue=async function(a,b){b=te.F(b);a=await a.B.request("REGISTER_DEPRECATED_API_USAGE_V1",b);if(!a.ok)throw a.error;};
we=function(a,b){a.handle("UI_CONTEXT_V1_SEND_UI_CONTEXT_CHANGE","NONE",async c=>{if(void 0===c)throw new J({code:"INTERNAL_ERROR",message:"UI_CONTEXT_V1_SEND_UI_CONTEXT_CHANGE: request cannot be undefined"});c=ve.D(c);return b.Vh(c)})};
Be=function(a,b){a.handle("APP_PROCESS_V1_NOTIFY_STATE_CHANGE","NONE",async c=>{if(void 0===c)throw new J({code:"INTERNAL_ERROR",message:"APP_PROCESS_V1_NOTIFY_STATE_CHANGE:Request can not be undefined"});c=xe.D(c);await b.mh(c)});a.handle("APP_PROCESS_V1_RUN_STATE_HANDLER","NONE",async c=>{if(void 0===c)throw new J({code:"INTERNAL_ERROR",message:"APP_PROCESS_V1_RUN_STATE_HANDLER:Request can not be undefined"});c=ye.D(c);await b.Rh(c)});a.handle("APP_PROCESS_V1_ROUTE_MESSAGE","NONE",async c=>{if(void 0===
c)throw new J({code:"INTERNAL_ERROR",message:"APP_PROCESS_V1_ROUTE_MESSAGE:Request can not be undefined"});if(!ze(c))throw new J({code:"INTERNAL_ERROR",message:"Could not convert object into RouteMessageRequest"});var d=c[1];c=c[2];if(void 0===d)throw new J({code:"INTERNAL_ERROR",message:"Missing sender AppProcessInfo in RouteMessageRequest"});if(!Array.isArray(c)||2!==c.length)throw new J({code:"INTERNAL_ERROR",message:"Invalid message payload type"});d=[Ae.D(d),[c[0],c[1]]];await b.Qh(d)})};
Ce=function(a){switch(a.type){case "OPENING":return"opening";case "OPEN":return"open";case "CLOSING":return"closing";case "CLOSED":return"closed";default:throw new m(a);}};De=function(a,b){a:{var c=a.surface;switch(c){case 1:c="object_panel";break a;case 2:c="selected_element_overlay";break a;default:throw new m(c);}}return{surface:c,processId:a.processId,launchParams:b}};Ee=function(a){switch(a){case "completed":return 1;case "aborted":return 2;default:throw new m(a);}};
Fe=function(a,b){const c=b.sourceId,d=a.Rd.get(c);d?d.push(b):a.Rd.set(c,[b]);a=a.Mc.get(c);null===a||void 0===a?void 0:a.forEach(e=>{e({state:Ce(b)})})};Ie=async function(a,b,c){const d=await (new Ge(a)).getInfo();return new He(a,De(...d),b,c)};Ke=async function(a){a=await (new Ge(a)).getInfo();return new Je(De(...a))};
Oe=async function(a,b,c,d){let e=new Le;if(d)try{e=await Ie(a,b,c)}catch(f){c.info("Editor does not support app process API, fallback to noop client")}b=await (new Me(a)).getInfo();return{platform:new Ne(a,b.platform.yh,c),appProcess:e}};Qe=function(a,b,c,d){return b.includes(c)?{googleAdsAuth:new Pe(a,d)}:{}};
Re=function(a){const b=a.type;switch(b){case "AUTHENTICATED":return{type:"authenticated"};case "CANCELED":return{type:"canceled"};case "DENIED":return{type:"denied",details:a.details};case "FAILED":return{type:"failed",reason:"signature_verification_failed"===a.Ra?{type:a.Ra,details:a.Fh}:{type:a.Ra}};default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected authentication result type: '${b}'.`});}};
Se=function(a,{Pb:b,Qb:c,Wb:d}){console.warn(`${"Apps SDK"}: The "${c}" ${b} is deprecated. Instead, use "${d}".`);ue(a.Dc,new te({Pb:b,Qb:c,Wb:d})).catch(e=>a.j.C(`Encountered an error while registering unstable api usage: ${e}`))};Cc=function(a,b,c){a.hf("experimental",b,c)};Ue=function(a){const b=Te(a);let c=0;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(d){d=Number(d);return(d^b[c++]&15>>d/4).toString(16)})};
Te=function(a){if(!a&&"undefined"!==typeof window&&"undefined"!==typeof window.crypto&&"function"===typeof window.crypto.getRandomValues)return window.crypto.getRandomValues(new Uint8Array(31));const b=null!==a&&void 0!==a?a:Math.random;return Array.from({length:31},()=>Math.floor(255*b()))};Ze=function(a,b,c){const d=new Ve(a,c.Mb("bus"));a=new We(d.send,c.Mb("client"));b=new Xe(d.send,b,c.Mb("requestHandler"));c=d.handle(Ye(a,b));return c.ok?za({handle:b.handle,request:a.request}):c};
bf=async function(a){var {parent:b,addEventListener:c,removeEventListener:d}=window;let e=new $e(1E3);const f=({ports:h,data:k})=>{k=k?k.source?"parent"!==k.source?Aa("invalid source"):za():Aa("'source' is missing in MessageEvent data object"):Aa("missing 'data' field in MessageEvent");k.ok?1!==h.length?a.error("invalid number of ports received from the parent"):([h]=h,e.resolve(h)):a.Xf(k.error,{J:"failed to verify message"})};c("message",f);const g=async()=>{let h;const k={source:"iframe"};b.postMessage(k,
"*");let n=1;for(;4>=n;)try{h=await e.promise();break}catch(q){e=new $e(1E3*n),b.postMessage(k,"*"),n++}if(null==h)throw af;return h};try{const h=await g();return Ze(h,()=>!0,a.Mb("comms"))}catch(h){return Aa(h)}finally{d("message",f)}};cf=function(a){return null!=a};
hf=function(a,b){const c={};let d=df.get(a);d||df.set(a,d={});for(const [e,f]of Object.entries(b)){if(b=f){b=d;if(e in b){if(b[e]!==f)throw new ef(`Can not apply a different decorator to the already decorated ${e} property. Check the parent class decorator is the same.`);b=!0}else b[e]=f,b=!1;b=!b&&!ff(a,e,f)}b&&(e in a||Object.defineProperty(a,e,{configurable:!0}),c[e]=f)}gf(a,c)};
ff=function(a,b,c){if(c!==jf&&c!==jf.bound)return!1;let d=kf(a,c,a[b]);Object.defineProperty(a,b,{get(){return d},set(e){d=kf(a,c,e)},configurable:!lf().safeDescriptors});return!0};kf=function(a,b,c){return"function"!==typeof c?c:(null===c||void 0===c?0:c.pi)?c:b===jf.bound?jf(c.bind(a)):jf(c)};of=function(){null==mf&&(mf=new Map([["light",nf(":global(.light)")],["dark",nf(":global(.dark)")]]));return mf};qf=function(){null==pf&&(pf=nf(":global(.theme)"));return pf};
rf=function(){const a=[qf(),...of().values(),nf(":global(.classic)")];document.documentElement.classList.remove(...a);document.body.classList.remove(...a)};tf=function(a){return sf(()=>({classicLight:a.qg,classicDark:a.pg,light:a.hh,dark:a.yg}),[a.qg,a.pg,a.hh,a.yg])};uf=function(a){return a.replace(/./g,b=>b.charCodeAt(0).toString(2).padStart(8,"0")).replace(/0/g,"\u2062").replace(/1/g,"\u2064")};
yf=function(a){var b=vf(),c=wf[b];c=c&&c[a];null==c&&(c=void 0);if(null==c)throw Error(`Could not find string for ${b} ${a}`);return xf?"\u2062"+c+uf(a):c};zf=function({src:a,onerror:b,onload:c,async:d=!1,Fg:e}){const f=document.createElement("script");f.src=a;f.onload=null!==c&&void 0!==c?c:null;f.onerror=null!==b&&void 0!==b?b:null;f.async=d;e&&f.setAttribute("crossorigin","anonymous");document.body.append(f)};
Af=function({window:a,Zb:b}){var c;const d=b.Se;if(d){var e=["config",d];"AAFbV22Umog"===b.appId&&e.push({cookie_domain:"app-aafbv22umog.canva-apps.com",cookie_flags:"secure;samesite=none"});a.dataLayer=null!==(c=a.dataLayer)&&void 0!==c?c:[];a.dataLayer.push(["js",new Date],e);zf({src:`https://www.googletagmanager.com/gtag/js?id=${d}`})}};Bf=function(a,b,c){const d=Object.getOwnPropertyDescriptor(a,b);Object.defineProperty(a,b,Object.assign({},d,{value:c,configurable:!1}))};
Cf=function(a,b){a[b]&&delete a[b]};Ff=function({j:a,Ka:b,va:c,appId:d,appName:e,Ha:f,Ya:g}){a={j:a,Ka:b,va:c,appId:d,appName:e,Ha:f,Ya:g};Df(a);Ef(a)};
Df=function(a){const b=window.fetch;Bf(window,"fetch",async(...c)=>{var d=c[0];d=!d||"object"!==typeof d||d instanceof URL?d:d.url;try{var e=(new URL(d)).hostname}catch(f){e="unknown"}e=Gf(1,a,{hostname:e});try{const f=await b(...c);e.complete(f.status);return f}catch(f){throw e.complete(499),c=e.span?e.span.context.traceId:void 0,c&&a.j.setTag("fetch_trace_id",c),a.j.jc(f,{J:"Fetch Exception: encountered an issue calling 3rd party endpoint"}),f;}})};
Ef=function(a){const b=window.XMLHttpRequest;class c extends b{open(d,e,f,g,h){try{this.hostname=(new URL(e)).hostname}catch(k){this.hostname="unknown"}super.open(d,e,f,g,h)}send(d){const e=Gf(2,a,{hostname:this.hostname});this.addEventListener("loadend",()=>{e.complete(this.status)});super.send(d)}}Bf(window,"XMLHttpRequest",c)};Gf=function(a,b,c){return new Hf(a,b,c)};
If=function(a){return new Promise((b,c)=>{if(!a.name)return b();const d=setTimeout(()=>{c(`Timed out whilst deleting database '${a.name}'`)},100),e=(g,h)=>{clearTimeout(d);"done"===g.readyState&&g.result&&g.result.close();h()},f=window.indexedDB.deleteDatabase(a.name);f.addEventListener("blocked",()=>e(f,b));f.addEventListener("error",g=>e(f,()=>c(g)));f.addEventListener("success",()=>e(f,b))})};
Mf=async function({Dc:a,j:b,va:c,appId:d,appName:e,Ha:f,Ya:g,Sb:h}){Jf({Sb:h,window});Ff({j:b,Ka:a,va:c,appId:d,appName:e,Ha:f,Ya:g});Kf();await Lf({Ka:a,j:b})};Nf=function(a){var b=window;for(const c in a){if(c in b)throw Error(`field '${c}' already defined`);const d=Object.freeze(a[c]);Object.defineProperty(b,c,{get(){return d},configurable:!1,enumerable:!1})}};Of=function(a){return new Promise(b=>setTimeout(b,a))};Pf=function(a){return()=>Of(a)};
Qf=function(a,b,c,d){const e=a.context?[a.context]:[];null!=d&&e.push(d);0<Object.keys(a.tags).length&&e.push(a.tags);return[`[ConsoleErrorClient][${a.name}][${b}]: ${c}`,...e]};Rf=function(a){Object.keys(a).forEach(b=>null==a[b]&&delete a[b])};Tf=function(a){if(a instanceof __c.Sf){const b=[];a.values.forEach(c=>{b.push(Tf(c))});return b}if(a instanceof __c.Uf){const b={};a.values.forEach(c=>{b[c.name]=Tf(c.value)});return b}return a.value};
Vf=function(a,b){return null!=b&&"object"===typeof b&&null!=b.sampleRate&&b instanceof Error?Math.min(Math.max(0,b.sampleRate),1):a.Me};
Zf=function(a){var b;const c=[],d=Error();d.name=a.error.name;d.message=a.error.message;d.stack=null!==(b=a.error.stack)&&void 0!==b?b:void 0;const e=a.error.severity;a.contexts.forEach(f=>{var g=[...f.context.tags];g.push(new __c.Wf({name:"offlineCount",value:String(f.ra)}));g.push(new __c.Wf({name:"offline",value:"true"}));f=[...f.context.extra];f.push(new __c.Xf({name:"offlineFirstSeen",value:new __c.Yf({value:(new Date(a.zb)).toString()})}));f.push(new __c.Xf({name:"offlineLastSeen",value:new __c.Yf({value:(new Date(a.Bb)).toString()})}));
g={fingerprint:[...a.error.fingerprint],J:a.error.J,tags:new Map(g.map(h=>[h.name,h.value])),extra:new Map(f.map(h=>[h.name,Tf(h.value)]))};c.push({error:d,dsn:a.error.dsn,severity:e,params:g})});return c};$f=function(a,b){let c=b;Object.entries(a.Df).forEach(([d,e])=>{c=c.split(e).join(d)});return c};ag=function(a,b={}){Object.keys(b).forEach(c=>{const d=b[c];"string"===typeof d&&(b[c]=$f(a,d))})};
bg=function(a,b){var c;return Object.assign({},b,{frames:null===(c=null===b||void 0===b?void 0:b.frames)||void 0===c?void 0:c.map(d=>{for(const [e,f]of Object.entries(a.Df)){const g=h=>null===h||void 0===h?void 0:h.replace(f,e);d.module=g(d.module);d.abs_path=g(d.abs_path);d.filename=g(d.filename)}return d})})};
cg=function(a,b){var c,d;b.exception&&b.exception.values&&(b.exception=Object.assign({},b.exception,{values:null===(d=null===(c=b.exception)||void 0===c?void 0:c.values)||void 0===d?void 0:d.map(e=>Object.assign({},e,e.stacktrace&&{stacktrace:bg(a,e.stacktrace)}))}))};dg=function(a,b){var c=b.request;null!=c&&null!=c.url&&(c.url=$f(a,c.url));cg(a,b);null!=b.tags&&ag(a,b.tags)};
eg=function(a,b){const c=[];b.message&&c.push(b.message);if(b.exception){const {type:d="",value:e=""}=b.exception.values&&b.exception.values[0]||{};"Error"!==d&&c.push(d,e)}return c.some(d=>a.cg.some(e=>"[object RegExp]"===Object.prototype.toString.call(e)?e.test(d):"string"===typeof e?-1!==d.indexOf(e):!1))};
gg=function(a,b){var c,d;if((null===a||void 0===a?void 0:a.message)!==(null===b||void 0===b?void 0:b.message))return!1;a=null===(c=a.exception)||void 0===c?void 0:c.values;b=null===(d=b.exception)||void 0===d?void 0:d.values;if(null==a||null==b||a.length!==b.length)return!1;for(d=0;d<a.length;d++)if(a[d].value!==b[d].value||a[d].type!==b[d].type||!fg(a[d].stacktrace,b[d].stacktrace))return!1;return!0};
fg=function(a,b){a=null===a||void 0===a?void 0:a.frames;b=null===b||void 0===b?void 0:b.frames;if(null==a&&null==b)return!0;if(null==a||null==b||a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c].filename!==b[c].filename||a[c].colno!==b[c].colno||a[c].lineno!==b[c].lineno)return!1;return!0};ig=function(a,b){const c=a.history.find(f=>gg(f.event,b));if(null==c)return!1;const d=hg.now(),e=c.timestamp;return gg(b,c.event)&&d-e<a.gi};lg=function(){return new jg({iteratee:a=>kg({frame:a,Zh:"/dist/renderer/"})})};
kg=function({frame:a,Zh:b}){if(null==a.filename)return a;const c=a.filename.replace(/\\/g,"/").split(b);if(1>=c.length)return a;a.filename="app://"+b+c.pop();return a};
ng=function(a,b){var c;null===(c=null===b||void 0===b?void 0:b.breadcrumbs)||void 0===c?void 0:c.map((d,e)=>{if(null===b||void 0===b?0:b.breadcrumbs){var f=b.breadcrumbs,g,h;"http"===d.type&&(d.data=d.data||{},d.data.url=mg(a,null!==(h=null===(g=d.data)||void 0===g?void 0:g.url)&&void 0!==h?h:""));f[e]=d}});b.request&&(b.request=a.ge(b.request));return b};
mg=function(a,b){try{const c=new URL(b,`${a.location.protocol}//${a.location.host}`);if(!["http:","https:"].includes(c.protocol))return"";a.dg.some(d=>c.hostname.includes(d))&&c.pathname.startsWith("/_ajax")||(c.pathname="");c.search="";return b.includes(c.host)?c.toString():c.pathname||"/"}catch(c){return""}};pg=function(a){const b=[];for(const c of og){const d=c(a);d&&b.push(d)}return b};rg=function(a,b){null!=a&&"string"!==typeof a&&a instanceof qg&&null!=a.requestId&&b("requestId",a.requestId)};
Dg=function(a,b,c){var d,e,f,g,h=null===(d=a.X)||void 0===d?void 0:d.getCurrentHub().getClient();d=h&&h.getOptions()||{};h=[new sg,new tg,new ug,new vg(2E3),new wg(null!==(e=b.sampleRate)&&void 0!==e?e:1),new xg,new yg,new zg(a.allowUrls,location),lg()];a.P.flags&&a.P.flags.Gg&&h.push(new Ag(Bg));a.setTags(a.P.tags);a.setExtras(a.P.extra);if(e="undefined"!==typeof navigator?navigator.userAgent:void 0)e=pg(e),a.setTags(e);b=b.wh;1!==b&&a.setTag("webx",String(3===b));a.setTag("iframe",String("undefined"!==
typeof window&&window.self!==window.top));c.sf&&a.setTag("webview",c.sf);d.beforeSend=Cg(a);c=Object.assign({},d,{maxValueLength:1024,dsn:d.dsn||a.P.dsn,environment:d.environment||a.P.environment,release:d.release||a.P.release,tracesSampleRate:0,sampleRate:1,integrations:h,allowUrls:a.allowUrls,autoSessionTracking:!1});Rf(c);null===(f=a.X)||void 0===f?void 0:f.init(c);null===(g=a.X)||void 0===g?void 0:g.configureScope(k=>{k.setUser({id:Ue()});k.setExtra("isAnonymousUser",!0)})};
Hg=async function(a,b){var c;(null===(c=b.Xb)||void 0===c?0:c.Cd)&&__webpack_require__.me(364944).then(()=>__c.Eg).then(({Zf:d})=>{var e;a.Na=new d(a.P.Xb);null===(e=a.Na)||void 0===e?void 0:e.init().then(()=>{const f=self.requestIdleCallback;Fg(a)&&f&&f(()=>{Gg(a)})})})};
Fg=function(a){var b,c,d,e,f;const g=null!==(d=null===(c=null===(b=a.P)||void 0===b?void 0:b.Xb)||void 0===c?void 0:c.Cd)&&void 0!==d?d:!1;if(!g)return!1;b=void 0!==a.Db;c=void 0!==a.Na;a=null!==(f=null===(e=a.Na)||void 0===e?void 0:e.ok())&&void 0!==f?f:!1;return g&&b&&c&&a};
Gg=async function(a){var b,c,d,e,f;if(!await Ig(a)&&1===(null===(b=a.Db)||void 0===b?void 0:b.status)){const g=null!==(d=null===(c=a.P.Xb)||void 0===c?void 0:c.nf)&&void 0!==d?d:10;let h=await (null===(e=a.Na)||void 0===e?void 0:e.vf(g,a.P.dsn));null===(f=a.Na)||void 0===f?void 0:f.ag(async()=>{for(var k,n,q;h&&0<h.length&&1===(null===(k=a.Db)||void 0===k?void 0:k.status);){for(const t of h){const w=Zf(t);for(const z of w)Jg(a,z.severity,z.error,z.params)}await (null===(n=a.X)||void 0===n?void 0:
n.flush());await new Promise(t=>setTimeout(t,1E3));h=await (null===(q=a.Na)||void 0===q?void 0:q.vf(g,a.P.dsn))}})}};Cg=function(a){return(b,c)=>{b.request&&(b.request=a.ge(b.request));if(Kg(a,b))return null;rg(null===c||void 0===c?void 0:c.originalException,(d,e)=>{null==b.tags&&(b.tags={});b.tags[d]=e});try{dg(a.Le,b)}catch(d){a.C(d)}return a.pd.reduce((d,e)=>e(d,c),b)}};
Kg=function(a,b){const c=b.exception&&b.exception.values&&0<b.exception.values.length&&b.exception.values[0],d=c&&c.stacktrace||void 0,e=d&&d.frames&&d.frames[0]&&d.frames[0].filename,f=b.message||c&&c.value||void 0;return a.Fd.some(g=>g({message:f,filename:e,location,tags:b.tags}))};Lg=function(a,b){var c,d;b instanceof Error?null===(c=a.X)||void 0===c?void 0:c.captureException(b):null===(d=a.X)||void 0===d?void 0:d.captureMessage(b)};Ig=async function(a){try{if(void 0!==a.Na)return a.Na.empty()}catch(b){}return!0};
Jg=async function(a,b,c,d){null==a.X?(console.error(c),d&&console.log("errorParams",d)):a.X&&a.X.withScope(e=>{"string"===typeof d&&(d={J:d});c=Mg(e,c,"string"===typeof d?d:null===d||void 0===d?void 0:d.J);null!=d&&(d.fingerprint&&e.setFingerprint(d.fingerprint),d.Zc&&e.setTag("userFlow",d.Zc),d.extra&&d.extra.forEach((f,g)=>e.setExtra(g,f)),d.tags&&d.tags.forEach((f,g)=>e.setTag(g,f)));0<a.componentStack.length&&e.setTag("component",a.componentStack.join("."));e.setLevel(b);Lg(a,c)})};
Ng=async function(a,b,c,d){var e,f;if(Fg(a)&&2===(null===(e=a.Db)||void 0===e?void 0:e.status))try{a.P.dsn&&(null===(f=a.Na)||void 0===f?void 0:f.enqueue(b,a.P.dsn,c,d))}catch(g){}else Jg(a,b,c,d),Fg(a)&&await Gg(a)};
Mg=function(a,b,c){if(null==b)return Error((c?c+" ":"")+"[null error thrown]");if("object"===typeof b){const d=b instanceof Og?new Og(b.message,b.sampleRate):Error(b.message);b.stack&&(d.stack=b.stack);if(c){if(b.message.startsWith(c))return a.setTag("prefixCollision","true"),b;a=c+" "+(d.message||"[no message on error]");try{d.message=a}catch(e){if(e instanceof TypeError)return Error(a);throw e;}}return d}return b.toString()};Pg=function(a,b){const c=new Map;for(const [d,e]of a)c.set(d,b(e,d));return c};
ch=function(a){const b=a.statusCode;switch(b){case 400:return new Qg(a);case 401:return new Rg(a);case 403:return new Sg(a);case 404:return new Tg(a);case 409:return new Ug(a);case 418:return new Vg(a);case 429:return new Wg(a);case 500:return new Xg(a);case 503:return new Yg(a);case 504:return new Zg(a);default:return 400<=b&&500>b?new $g(a):500<=b&&600>b?new ah(a):new bh(a)}};
dh=function(a){if(!a.startsWith("'\"])}while(1);</x>//"))throw new Xg;try{var b=JSON.parse(a.substring(20));if(null==b||"object"!==typeof b)throw new TypeError(`expected an object, found: ${b}`);return b}catch(c){throw new Xg(c);}};eh=function(a){let b;try{b=dh(a)}catch(d){return{}}a=b.endUserMessage;const c=b.error;return{endUserMessage:"string"===typeof a?a:void 0,message:"string"===typeof c?c:void 0,body:b}};
ih=async function(a,b,c){const d=c&&c.tracing,e=d&&(c&&c.Zd||d.Uc);e&&(c=Object.assign({},c,{tracing:Object.assign({},d,{Uc:`${e}.csrf`}),Zd:`${e}.csrf`}));return a.Tc("GET",`${a.Fb}/${fh}/${b}`,{Ba:c,dc:gh}).then(f=>hh.D(f.body))};
kh=async function(a,b,c,d,e=1){let f=a.Qa.get(b);null==f&&(f=ih(a,b,c),a.Qa.set(b,f));let g;try{g=await f}catch(h){throw a.Qa.get(b)===f&&a.Qa.delete(b),h;}try{if(1===e&&g.Qg<a.yc.now()+jh)throw new Vg;return await d(g)}catch(h){if(h instanceof Vg)return a.Qa.get(b)===f&&a.Qa.delete(b),kh(a,b,c,d,e+1);throw h;}};
lh=function(a,b,c){const d=c.status,e=c.body;if(200<=d&&300>d)return a.xf(c),{body:dh(e),getResponseHeader:k=>{k=c.getResponseHeader(k);return null!=k?k:void 0}};const {message:f,endUserMessage:g,body:h}=eh(e);a=c.getResponseHeader("x-request-id")||c.getResponseHeader("cf-ray")||void 0;throw ch({statusCode:d,message:f,requestId:a,requestUrl:b,endUserMessage:g,body:h});};mh=function(a){l(a.startsWith("/")&&1<a.length);return a.split("/")[1]};
nh=async function(a,b,c,d,e,f){return(await a.Tc(b,`${a.Fb}/_ajax${c}`,{headers:null!=f?{"Content-Type":"application/json;charset=UTF-8"}:void 0,Ba:d,dc:gh,Ke:e,body:null!=f?JSON.stringify(f):void 0})).body};oh=function(a){var b,c;return(null===(c=null===(b=a.PerformanceObserver)||void 0===b?void 0:b.supportedEntryTypes)||void 0===c?void 0:c.includes(a.Pc.type||""))||!1};
ph=function(a){var b,c;try{null===(b=a.observer)||void 0===b?void 0:b.observe({type:a.Pc.type,buffered:a.Pc.buffered})}catch(d){null===(c=a.observer)||void 0===c?void 0:c.observe({entryTypes:[a.Pc.type]})}};rh=function(a,b,c){if(!oh(a))return{count:void 0,duration:void 0};if(null==b||null==c)return{count:0,duration:0};a=qh(a,b,c);return{count:a.length,duration:a.reduce((d,{duration:e})=>d+e,0)}};qh=function(a,b,c){const d=[];for(const e of a.Ub)a=e.startTime+e.duration,a>b&&a<=c&&d.push(e);return d};
sh=function(a,b,c){let d;for(const e of a.Wa){if(e.time>=b&&e.time<=c&&0===e.status)return!1;e.time<=b&&(d=e)}if(null!=d)return 1===d.status;if(a.Tf===a.Wa[0].time)return 1===a.Wa[0].status};th=function(a){return{hb:a.ob.count,Gd:0<a.ob.count?a.ob.kh:void 0,Re:0<a.ob.count?a.ob.Ah:void 0}};vh=function(a){a.jd&&a.Yd.cancelAnimationFrame(a.jd);a.document.removeEventListener("visibilitychange",a.Yb);a=th(a);var b=uh;const c=a.hb*a.Gd,d=a.Gd+2*a.Re;0<c&&(b.hb+=a.hb,b.jf.add(d,c));for(const e of b.Ye)e(a)};
yh=function({span:a,j:b,xa:c,performance:d=window.performance,Ii:e=new Map,Aj:f="spanStart"}){var g,h,k,n;try{fa(null!=c,"Global trace provider has not been set!");fa(!a.$e(),"Span must be ended before a PerformanceContext can be generated");const q=c.Id("LongTaskService"),t=c.Id("VisibilityService"),w=a.startTime,z=a.endTime;if(null==w||null==z)return{};let y,F;switch(f){case "navigationStart":y=0;F="navigation_start";break;case "responseStart":y=wh(d);F="response_start";break;case "spanStart":y=
w;F=void 0;break;default:throw new m(f);}if(null==y)return{};const v=xh(a,y),D=v(w),R=v(z),U=new Map([["start",D]]);a.Jb.forEach(Ob=>U.set(Ob.name,v(Ob.startTime)));for(const [Ob,uk]of e.entries())U.set(Ob,v(uk));U.set("finish",R);if(null==q||null==t)return Object.assign({},{lh:U},null===(h=null===(g=a.Oa)||void 0===g?void 0:g.frameRate)||void 0===h?void 0:th(h));const {count:Da,duration:tb}=rh(q,y,z),vk=sh(t,D,R);return Object.assign({},{lh:U,yj:F,vj:Da,wj:tb,hk:vk,resources:void 0},null===(n=null===
(k=a.Oa)||void 0===k?void 0:k.frameRate)||void 0===n?void 0:th(n))}catch(q){return b.C(q),{}}};xh=function(a,b){return c=>{let d=c;a&&(d=Math.max(c-b,0));return Math.round(d)}};wh=function(a=window.performance){if(a.getEntriesByType){const b=a.getEntriesByType("navigation")[0];if(b)return b.responseStart}if(a.timing&&(a=a.timing.responseStart-a.timing.navigationStart,0<=a))return a};
zh=__c.zh=function(a){return[["name",a.name],["attributes",Object.fromEntries(a.attrs)],["status",a.status],["globalAttributes",Object.fromEntries(a.aa)],["instrumentationScope",a.ea],["startTime",a.startTime],["endTime",a.endTime],["duration",a.duration],["parentSpanId",a.parentSpanId]]};Ah=function(a){let b,c;a instanceof Map?b=a:a&&(c=a);return{Jc:b,Kc:c}};
Ch=function(a){return function(){for(let b=0;b<2*a;b++)Bh[b]=Math.floor(16*Math.random())+48,58<=Bh[b]&&(Bh[b]+=39);return String.fromCharCode.apply(null,Bh.slice(0,2*a))}};Dh=function(a){var b;for(const c of a.ya.plugins)if(c.isEnabled())try{null===(b=c.Od)||void 0===b?void 0:b.call(c,a)}catch(d){a.j.C(d,{J:"Plugin.onSpanEnd error",extra:new Map([["plugin",c.name],...zh(a)])})}};
Gh=function(a){var b;null===(b=a.za)||void 0===b?void 0:Eh(b,a);a.O instanceof Fh&&null!=a.O.za&&a.O.za!==a.za&&Eh(a.O.za,a)};
Hh=function(a,b,c,d){var e;const f={bb:a.bb,cb:a.cb};try{a.timeout&&clearTimeout(a.timeout);let g,h,k;b instanceof Map?h=b:null!=b&&(g=b);c instanceof Map?h=c:null!=c&&(k=c);null!=d&&(k=d);a.Hb=!1;null!=g&&a.setStatus(g);h&&a.Va(h);if(null===(e=a.Oa)||void 0===e?0:e.frameRate){vh(a.Oa.frameRate);const {Gd:n,Re:q,hb:t}=th(a.Oa.frameRate);null!=n&&null!=q&&null!=t&&(a.attrs.set("frame_duration_mean",n),a.attrs.set("frame_duration_standard_deviation",q),a.attrs.set("frame_count",t),a.attrs.set("long_frame_duration",
n+2*q))}a.ended=!0;a.endTime=null!==k&&void 0!==k?k:a.getCurrentTime();a.duration=a.endTime-a.startTime;Dh(a);Gh(a);a.ya.$b.process(a);a.Md.forEach(n=>n(f));a.Hb=!0;return f}catch(g){return a.j.C(g,{J:"Error ending span",extra:new Map(zh(a))}),f}};
Jh=function({Oc:{performance:a,name:b,type:c,attrs:d,startTime:e,timeout:f},va:g,O:h,wg:k,j:n,ph:q}){d=d||new Map;c&&d.set("uop_attr_type",c);d.set("sample_rate_override",1);const t=null===h||void 0===h?void 0:h.Ma();if(null!=h&&!h.Ma()){const z=h.Fa();z instanceof Ih&&(h=z.Pa)}d.set("is_uop",!0);e=h?g.startSpan(b,h,{performance:a,attrs:d,startTime:e,timeout:f}):g.Vc(b,{performance:a,attrs:d,startTime:e,timeout:f});e.setAttribute("user_operation_id",e.context.traceId);fa(e instanceof Fh,"User operations can only be created by BasicSpans");
const w=new Ih(b,c,e,n,t,(null===a||void 0===a?0:a.bk)?new Map:void 0);e.za=w;k.forEach(z=>{try{const y=z.Ki();w.Va(y)}catch(y){n.C(y)}});w.Va(d);null===q||void 0===q?void 0:q(e);return w};Kh=function(a){a=null===a||void 0===a?void 0:a.Fa();return a instanceof Ih?a:void 0};
Eh=function(a,b){a.zd.delete(b);if(!a.ended){"error"===b.status&&(a.ended=!0,a.Pa.end("error"));if(a.Bc&&"span"===b.Aa&&!b.aborted){a.Bc.set(`${b.name}_start`,b.startTime);for(const d of b.Jb)a.Bc.set(`${b.name}_${d.name}`,d.startTime);null!=b.endTime&&a.Bc.set(`${b.name}_end`,b.endTime)}if(0===a.zd.size)if(a.ended=!0,b=Lh(a,a.Pa),null!=b){var c=a.Pa.end("ok",b.endTime);a.Md.forEach(d=>d(c))}else a.Pa.abort()}};
Lh=function(a,b){if(!b.aborted){var c=null!=b.endTime?b:void 0;for(const d of b.Kb)b=Lh(a,d),null!=b&&(null==c||b.endTime>c.endTime)&&(c=b);return c}};Mh=function(a){if(a){var b=null===a||void 0===a?void 0:a.Fa();return b instanceof Ih?b.bc:a.Ma()}};Th=function(a=new Nh({}),b){try{if("undefined"===typeof window)return new Oh;const f=Ph(a,b);try{if("NOOP"!==a.N&&a.Kg){if(a.Ig){var c=new Qh(b);f.qc(c);var d=new Rh(b);f.qc(d)}var e=new Sh(b);f.qc(e)}}catch(g){b.C(g)}return f}catch(f){return b.C(f),new Oh}};
Ph=function(a=new Nh({}),b){if("NOOP"===a.N)return{jb:(new Oh).jb,Te:(new Oh).jb,Ff:()=>{},Kf:()=>{},Lf:()=>{},qc:()=>{},Id:()=>{}};a=Uh(a,b);return new Vh(a,b)};
Uh=function(a,b){var c,d,e,f;let g,h;"HTTP"===a.N?(g=new Wh(a.ki,b),h=new Map([["telemetry_version","v2"],["app.component",a.app],["service.name",a.app],["app.release",null!==(c=a.release)&&void 0!==c?c:""],["app.source",null!==(d=a.source)&&void 0!==d?d:"web"],["app.flavor",null!==(e=a.Vg)&&void 0!==e?e:""],["app.build.variant",null!==(f=a.variant)&&void 0!==f?f:"baseline"],["session_id",Ue()],["ctx.user",a.$c],["ctx.anonymous_user",a.De],["x-canva-tenant","canva-app"],["device.platform",a.platform]])):
(g=new Xh,h=new Map([["telemetry_version","v2"],["app.component",a.app],["service.name",a.app],["app.source","web"],["session_id",Ue()],["ctx.user",a.$c],["ctx.anonymous_user",a.De],["x-canva-tenant","canva-app"]]));const k={P:a,j:b};a=__webpack_require__.me(735406).then(()=>__c.Yh).then(({eh:n})=>n(k));b=new Zh(a,b);return{Af:g,$b:b,aa:h}};
ei=async function({od:a,fj:b}){a:{var c=a.j;switch(c.N){case "CONSOLE":b=new $h;break a;case "SENTRY":c=new ai(c);c.Gf([bi]);if(b)for(var d of b)c.setTag(...d);b=c;break a;default:throw new m(c);}}d=Th(a.di,b);switch(a.mode){case "REAL":return c=new ci(a.Ve,void 0,new di),{j:b,Ve:c,mode:a.mode,Wc:d};case "FAKE":return{j:b,mode:a.mode,Zj:Pf(a.ci),Wc:d};default:throw new m(a);}};bi=function(a){return a.tags&&a.tags.app_approval_status?"RELEASED"!==a.tags.app_approval_status:!1};
fi=function(a,b){return`third_party_app.${a.toLowerCase().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"*")}_${b}`};
oi=async function({j:a,Wc:b,Zb:c,Ph:d}){var e=fi(c.appName,c.appId);b=b.jb(e);a.setTag("app_tracer_name",e);e=await bf(a);if(!e.ok)throw a.Nb(e.error,{J:"Could not init sandbox comms"}),d.Fa().ua("init_comms_failed"),Error("Could not init sandbox comms");d.Fa().ua("init_comms_completed");e=e.value;const f=new Me(e);let g="object_panel";try{g=(await Ke(e)).getInfo().surface}catch(h){a.info("Editor does not support process API, fallback to object panel")}try{const h=()=>{};await Mf({window,Dc:f,j:a,
va:b,appId:c.appId,appName:c.appName,Ha:c.Ha,Ya:c.Ya,Sb:c.Sb});const k=new gi(f,a),n=await Oe(e,k,a,c.Dg),q={canva:Object.assign({},{authentication:new hi(e,k,a)},{CanvaError:J},je(e,k,a),{content:new ii(e,k,a)},{fetch:{get:h,post:h}},{interactiveElement:new ji(e,k)},n,sb(e,k,a),{generation:new ki(e,a)}),__canva__:Object.assign({},{uiKit:new li(e,a)},Qe(e,c.Zg,c.appId,a),{context:{locale:c.locale,country:c.country}})};Nf(q)}catch(h){throw a.Nb(h,{J:"failed to initialise sdk"}),console.error("failed to initialise sdk"),
d.Fa().ua("init_sdk_failed"),h;}d.Fa().ua("init_sdk_completed");rf();mi(g);c.Se&&Af({window,Zb:c});try{await ni(a,c.fg,c.Ha)}catch(h){throw d.Fa().ua("bootstrap_app_failed"),h;}d.Fa().ua("bootstrap_app_completed")};
mi=function(a){const b=eb(document.getElementById("root"),"INTERNAL_ERROR","Page 'root' div is missing");b.style.margin="0px";b.style.height="100%";b.style.backgroundColor="transparent";switch(a){case "selected_element_overlay":b.style.paddingLeft="0";document.body.style.backgroundColor="transparent";b.style.overflow="hidden";break;case "object_panel":b.style.paddingLeft="16px";b.style.overflow="auto";break;default:throw new m(a);}};
ni=function(a,b,c){const {origin:d}=new URL(b);return new Promise((e,f)=>{zf({src:b,onerror:()=>{5===c?a.error(`Unable to load script from: '${b}',`,{J:"Could not load app JS script"}):console.error(`Unable to load script from: '${b}',`);const g=document.createElement("p");g.id="errorMessageBox";g.style.color="white";g.style.fontFamily='"Canva Sans", Helvetica, sans-serif';g.style.fontSize="14px";g.style.whiteSpace="break-spaces";if(1===c){var h=[b],k=vf();var n={};for(let q=0;q<h.length;++q)n[q]=
h[q];if(h=pi.get("5hF43A"))n=h.format(n),n=xf?"\u2062"+n+uf("5hF43A"):n;else{h=(h=wf[k])&&h["5hF43A"];null==h&&(h=void 0);if(null==h)throw Error(`Could not find string for ${k} ${"5hF43A"}`);switch(k){case "en-psaccent":k="en";break;case "ar":case "ar-AE":case "ar-EG":case "ar-SA":case "fa-IR":case "he-IL":case "pa-PK":case "ur-PK":case "ckb-IQ":case "ug-CN":k=`${k}-u-nu-latn`}try{qi.resolveLocale(k)}catch(q){k=qi.defaultLocale}k=new qi(h,k,ri,{ignoreTag:!0});pi.set("5hF43A",k);n=k.format(n);n=xf?
"\u2062"+n+uf("5hF43A"):n}}else n=yf("Qb9veg");g.textContent=n;document.body.appendChild(g);f()},onload:()=>{var g;null===(g=document.getElementById("errorMessageBox"))||void 0===g?void 0:g.remove();e()},Fg:0<=si.indexOf(d)})})};ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};ba=aa(this);
da("Object.fromEntries",function(a){return a?a:function(b){var c={};if(!(Symbol.iterator in b))throw new TypeError(""+b+" is not iterable");b=b[Symbol.iterator].call(b);for(var d=b.next();!d.done;d=b.next()){d=d.value;if(Object(d)!==d)throw new TypeError("iterable for fromEntries should yield objects");c[d[0]]=d[1]}return c}});da("globalThis",function(a){return a||ba});__webpack_require__(427164);__webpack_require__(446166);var ti=__webpack_require__(735129).Z;var ui=__webpack_require__(832333).en;var vi=__webpack_require__(189525).en;var wi=__webpack_require__(544339).en;var xi=__webpack_require__(785893).jsx;var yi=__webpack_require__(667294),zi=yi.useState,Ai=yi.useContext,sf=yi.useMemo,Bi=yi.createContext;var Ci=__webpack_require__(168949),jf=Ci.aD,Di=Ci.LO,Ei=Ci.Fl,gf=Ci.rC,lf=Ci.pu;var Fi=__webpack_require__(129323).Pi;var qi=__webpack_require__(821697).ZP;var tg=__webpack_require__(812699).S;var ug=__webpack_require__(353610).I;var Gi=__webpack_require__,Hi=Gi(294184),Ii=Gi.n_x(Hi)();var jg=__webpack_require__(464517).m;Intl&&!Intl.PluralRules&&(Intl.PluralRules=ti(Intl.NumberFormat,()=>ui,(a,b)=>vi[b?"ordinal":"cardinal"],()=>wi));__webpack_require__.p=self.__canva_public_path__;m=__c.m=class extends Error{constructor(a){super(`unhandled case: ${JSON.stringify(a)}`)}};var Ji=class{constructor(a){this.type=a}};var Ki=class extends Ji{required(a,b){b=b[a];if(null==b||typeof b!==this.type)throw new TypeError(`expected ${this.type} for property "${a}", found: ${JSON.stringify(b)}`);return b}optional(a,b){b=b[a];if(null!=b){if(typeof b!==this.type)throw new TypeError(`expected optional ${this.type} for property "${a}", found: ${JSON.stringify(b)}`);return b}}},oa=new Ki("object");var ma={},ia={},ka="undefined"!==typeof window&&window.location?qa():{},sa=new Map([["",!0],["true",!0],["false",!1]]),ta=new Map([["",void 0],["null",null],["undefined",void 0]]),ra=/^str\((.*)\)$/;var ua=class{constructor(a){this.value=a}get ok(){return!0}map(a){return new ua(a(this.value))}},wa=class{constructor(a){this.error=a}get ok(){return!1}map(){return this}},za=va,Aa=xa;var Li=class extends Error{constructor(){super("Open size reservations open during close")}};new DataView(new ArrayBuffer(8));var Mi=0,Ni=0;var Oi=new DataView(new ArrayBuffer(8)),La=class{constructor(){this.bufferSize=8;this.Sa=[];this.Ud=[];this.Nc=this.ub=this.Za=0;this.buffer=new Uint8Array(8)}write(a){this.Za===this.bufferSize&&(this.Ud.push({buffer:this.buffer,Sa:this.Sa}),this.buffer=new Uint8Array(this.bufferSize),this.Sa=[],this.Za=0);this.buffer[this.Za]=a;this.Za++;this.ub++}flush(){if(this.Nc)throw new Li;const a=new Uint8Array(this.ub);let b=0;var c=[...this.Ud,{buffer:this.buffer,Sa:this.Sa}];for(const {buffer:f,Sa:g}of c){var d=
f===this.buffer?this.Za:this.bufferSize;c=0;for(let h=0;h<g.length;h+=2){var e=g[h];let k=g[h+1];if(127>k)f[e]=k;else{e-=c;a.set(new Uint8Array(f.buffer,c,e),b);b+=e;for(c+=e;127<k;)a[b++]=k&127|128,k>>>=7;a[b++]=k;c+=1}}c<d&&(d-=c,a.set(new Uint8Array(f.buffer,c,d),b),b+=d)}this.buffer=new Uint8Array(this.bufferSize);this.Ud=[];this.ub=this.Za=0;this.Sa=[];this.Nc=0;return a}};var Qa,Pi,Qi,Ri,Si,Ti,P,Vi,Q,Wi,Xi,V,W,Zi,$i,$a,ab;
Qa={G:"string",Xa:2,L(a,b){const c=Ia(a);for(let d=0;d<b.length;d++){let e=b.charCodeAt(d);if(128>e)a.write(e);else if(2048>e)a.write(e>>6|192),a.write(e&63|128);else if(65536>e){if(55296<=e&&56319>=e&&d+1<b.length){const f=b.charCodeAt(d+1);if(56320<=f&&57343>=f){e=1024*(e-55296)+f-56320+65536;a.write(e>>18|240);a.write(e>>12&63|128);a.write(e>>6&63|128);a.write(e&63|128);d++;continue}}a.write(e>>12|224);a.write(e>>6&63|128);a.write(e&63|128)}}c()},M:async a=>{await a.Ca(4);var b=Ca(a);await a.Ca(b,
!0);b=a.$a+b;const c=[];let d="";for(;a.$a<b;){var e=a.read();if(128>e)c.push(e);else if(192>e)continue;else if(224>e){var f=a.read();c.push((e&31)<<6|f&63)}else if(240>e){f=a.read();var g=a.read();c.push((e&15)<<12|(f&63)<<6|g&63)}else if(248>e){f=a.read();g=a.read();const h=a.read();e=(e&7)<<18|(f&63)<<12|(g&63)<<6|h&63;e-=65536;c.push((e>>10&1023)+55296,(e&1023)+56320)}8192<=c.length&&(d+=String.fromCharCode.apply(null,c),c.length=0)}return d+=String.fromCharCode.apply(null,c)}};
Pi={G:"boolean",defaultValue:!1,Ug:1,Xa:0,L:function(a,b){a.write(b?1:0)},M:a=>a.Ca(1,!0).then(()=>!!a.read())};Qi={G:"number",defaultValue:0,Ug:8,Xa:1,L:function(a,b){p(Infinity===b||-Infinity===b||isNaN(b)||-1.7976931348623157E308<=b&&1.7976931348623157E308>=b);Oi.setFloat64(0,b,!0);for(b=0;8>b;++b)a.write(Oi.getUint8(b))},M:a=>a.Ca(8,!0).then(()=>a.Mj())};Ri={G:"number",defaultValue:0,Xa:0,L:Ha,M:a=>a.Ca(4).then(()=>Ca(a))};
Si={G:"number",defaultValue:0,Xa:0,L:function(a,b){p(b===Math.floor(b));p(-0x7fffffffffffffff<=b&&0x7fffffffffffffff>b);var c=b;b=0>c;c=Math.abs(c);var d=c>>>0;c=Math.floor((c-d)/4294967296);c>>>=0;b&&(c=~c>>>0,d=(~d>>>0)+1,4294967295<d&&(d=0,c++,4294967295<c&&(c=0)));Mi=d;Ni=c;b=Mi;d=Ni;p(b===Math.floor(b));p(d===Math.floor(d));p(0<=b&&4294967296>b);for(p(0<=d&&4294967296>d);0<d||127<b;)a.write(b&127|128),b=(b>>>7|d<<25)>>>0,d>>>=7;a.write(b)},M:a=>a.Ca(8).then(()=>{var b=128,c=0;var d=0;for(var e=
0;4>e&&128<=b;e++)b=a.read(),c|=(b&127)<<7*e;128<=b&&(b=a.read(),c|=(b&127)<<28,d|=(b&127)>>4);if(128<=b)for(e=0;5>e&&128<=b;e++)b=a.read(),d|=(b&127)<<7*e+3;if(128>b){b=c>>>0;c=d>>>0;if(d=c&2147483648)b=~b+1>>>0,c=~c>>>0,0===b&&(c=c+1>>>0);b=4294967296*c+(b>>>0);d=d?-b:b}else throw Error("Failed to read varint, encoding is invalid.");return d})};Ti=a=>{const {tag:b,H:c,oa:d}=r(a);return Na(Qi,c,b,d)};P=a=>{const {tag:b,H:c,oa:d}=r(a);return Na(Ri,c,b,d)};
__c.Ui=a=>{const {tag:b,H:c,oa:d}=r(a);return Na(Si,c,b,d)};Vi=a=>{const {tag:b,H:c}=r(a);return Oa(Qi,c,b)};Q=a=>{const {tag:b,H:c}=r(a);return Oa(Ri,c,b)};Wi=a=>{const {tag:b,H:c}=r(a);return Oa(Si,c,b)};Xi=a=>{const {tag:b,H:c}=r(a);return Pa(Ri,c,b)};S=__c.S=(a,b)=>{const {tag:c,H:d,oa:e}=r(a,b);return Na(Qa,d,c,e)};T=__c.T=a=>{const {tag:b,H:c}=r(a);return Oa(Qa,c,b)};Yi=__c.Yi=a=>{const {tag:b,H:c}=r(a);return Pa(Qa,c,b)};V=a=>{const {tag:b,H:c,oa:d}=r(a);return Na(Pi,c,b,d)};
W=a=>{const {tag:b,H:c}=r(a);return Oa(Pi,c,b)};Zi=Ra(Qa);$i=Ra("object");$a=0;ab=1;var aj=G(()=>Object.assign({},{},{N:u(2,"CONSOLE")}));var bj=I(()=>[1,2,3],1);__c.Wf=G(()=>({name:S(1),value:S(2)}));var cj=G(()=>({Gg:W(1)}));var dj=G(()=>({Cd:W(1),lf:Q(2),mf:Q(3),nf:Q(4)}));__c.Yf=G(()=>Object.assign({},{},{type:u(1,"STRING"),value:S(1)}));__c.ej=G(()=>Object.assign({},{},{type:u(2,"BOOL"),value:V(1)}));__c.fj=G(()=>Object.assign({},{},{type:u(3,"INT"),value:P(1)}));__c.gj=G(()=>Object.assign({},{},{type:u(4,"DOUBLE"),value:Ti(1)}));__c.Sf=G(()=>Object.assign({},{},{type:u(5,"ARRAY"),values:B(1,hj)}));__c.Uf=G(()=>Object.assign({},{},{type:u(6,"KVLIST"),values:B(1,__c.Xf)}));var hj=H(()=>({type:[1,__c.Yf,2,__c.ej,3,__c.fj,4,__c.gj,5,__c.Sf,6,__c.Uf]}),()=>({}));__c.Xf=G(()=>({name:S(1),value:x(2,hj)}));var ij=G(()=>Object.assign({},{},{N:u(3,"SENTRY"),dsn:T(28),environment:T(30),release:T(34),sampleRate:Vi(29),tracesSampleRate:Vi(31),Yi:W(32),wh:Sa(33,bj),tags:B(35,__c.Wf),flags:A(36,cj),Xb:A(37,dj),extra:B(38,__c.Xf)}));var jj=H(()=>({N:[2,aj,3,ij]}),()=>({}));var kj=I(()=>[0,"CLIENT_FULL",1,"CLIENT_HYDRATE",2,"SERVER_FULL"]);var lj=I(()=>[1,3,2],1);var mj=G(()=>Object.assign({},{},{action:u(1,"REGISTER"),Sj:S(1),scope:S(2),Ji:V(5),dj:V(6)}));var nj=G(()=>Object.assign({},{},{action:u(2,"UNREGISTER")}));var oj=G(()=>Object.assign({},{},{action:u(3,"UPDATE")}));var pj=G(()=>Object.assign({},{},{action:u(4,"RETAIN")}));var qj=H(()=>({action:[1,mj,2,nj,3,oj,4,pj]}),()=>({}));var rj=I(()=>[1,2]);var sj=I(()=>[1,2,3,4]);var tj=G(()=>({category:C(1,sj),name:S(2)}));var uj=G(()=>({Wj:V(12),dk:V(13),Ei:V(1),Qi:V(2),Ti:V(7),Zi:V(14),Gi:S(3),xj:S(9),Jj:S(10),Lj:B(5,tj),Hj:T(6)}));var vj=G(()=>({enable:W(1),Nj:Q(2),Oi:Q(3),jj:Q(4)}));var wj=()=>({Kg:W(5),Ic:Q(6),Hc:Q(7),Rg:Q(8),Ig:W(9),Qj:Vi(10),ki:Vi(11),Xb:A(12,vj),source:T(13),$c:T(14),De:T(15),Tg:W(16)});var xj=G(()=>Object.assign({},wj(),{N:u(1,"HTTP"),app:S(27),endpoint:S(28),release:T(29),Vg:T(31),aj:W(32),bj:W(33),platform:T(35),variant:T(36)}));var yj=G(()=>Object.assign({},wj(),{N:u(2,"CONSOLE"),app:S(27)}));var Nh=G(()=>Object.assign({},wj(),{N:u(3,"NOOP")}));var zj=H(()=>({N:[1,xj,2,yj,3,Nh]}),wj);var Aj=G(()=>({traceId:S(1),spanId:S(2),we:P(3)}));var Bj=G(()=>({href:S(1),Yj:T(3)}));var Cj=()=>({Oh:V(12),Hg:V(14),commit:T(5),timestamp:Wi(11),j:x(6,jj),Oj:C(7,kj),Rj:C(9,lj),Vj:A(15,qj),Bj:T(13),tj:Sa(17,rj),ck:A(18,uj),Wi:V(19),Xi:V(23),di:A(20,zj),Gj:A(24,Aj),Ij:B(21,Bj),fk:Yi(22),cj:V(33)});var hh=G(()=>({token:S(1),Qg:__c.Ui(2)}));var Dj=G(()=>({rc:T(1),ld:T(9),sb:T(2),tb:T(3),bd:T(12),uc:T(4),Gc:T(10),app:T(11),vc:T(5),wc:T(6),Fb:T(7),Qa:$i(8,hh)}));var Ej=G(()=>({rc:T(1),sb:T(2),tb:T(3),bd:T(9),uc:T(4),Gc:T(5),app:T(6),vc:T(7),wc:T(8)}));var Fj=G(()=>({url:S(1),context:A(2,Ej)}));var Gj=G(()=>({Pg:S(27)}));var Hj=G(()=>({Pg:S(27),Hi:T(28),locale:S(29),Fi:Q(30),Ci:T(31),Ej:T(37),$c:T(34),hj:T(32),kj:T(33),deviceId:T(35)}));var Ij=()=>({gk:A(3,Gj),gj:x(4,Hj),ij:Zi(5),appName:T(9),sj:Xi(16),$j:Xi(17),Si:V(18)});var Jj=G(()=>Object.assign({},Ij(),{N:u(2,"CONSOLE")}));var Kj=G(()=>Object.assign({},Ij(),{N:u(7,"CORDOVA"),Lg:V(27)}));var Lj=G(()=>Object.assign({},Ij(),{N:u(8,"NOOP")}));var Mj=G(()=>({containerId:S(1)}));var Nj=G(()=>({ri:S(1),projectId:S(2)}));var Oj=G(()=>({eg:S(1)}));var Pj=G(()=>({}));var Qj=G(()=>({rj:A(2,Mj),Cj:A(4,Nj),zi:A(6,Oj),qj:A(7,Pj)}));var Rj=G(()=>Object.assign({},Ij(),{N:u(14,"PRODUCT_ANALYTICS"),plugins:A(32,Qj),lk:Q(36),Lg:V(37),nk:V(40),$i:V(43)}));var Sj=H(()=>({N:[2,Jj,7,Kj,8,Lj,14,Rj]}),Ij);var Tj=G(()=>Object.assign({},{},{N:u(1,"NONE")}));var Uj=G(()=>Object.assign({},{},{N:u(2,"FULLSTORY"),Dj:S(28)}));var Vj=H(()=>({N:[1,Tj,2,Uj]}),()=>({}));var Wj=G(()=>({$c:T(1),eg:S(2)}));var Xj=G(()=>({url:S(1),wi:T(2),ye:V(3),ik:T(4)}));var Yj=G(()=>Object.assign({},Cj(),{mode:u(2,"REAL"),Ve:x(27,Dj),jk:A(30,Fj),ui:x(28,Sj),uj:A(29,Vj),Di:A(32,Wj),Tj:A(31,Xj)}));var Zj=G(()=>Object.assign({},Cj(),{mode:u(3,"FAKE"),ci:P(27),hostname:T(28)}));var ak=H(()=>({mode:[2,Yj,3,Zj]}),Cj);"internal comment";var J=class extends Error{constructor(a){const b=a.message.endsWith(".")?"":".";super(`[${a.code}]:  ${a.message}${b}`.trim());this.name="CanvaError";this.rawMessage=a.message;this.code=a.code;Object.setPrototypeOf(this,J.prototype)}};var K=class extends J{};var X=({ma:a,client:b,method:c})=>({level:"log",data:{app_api_namespace:a,app_api_client:b,app_api_method:c}});var bk=G(()=>Object.assign({},{},{type:u(1,"IMAGE"),id:S(1),parentRef:T(7),url:S(2),mimeType:S(3),thumbnailUrl:S(4),width:Q(5),height:Q(6),uploadedToastVisibility:T(8)}));var ck=G(()=>Object.assign({},{},{type:u(2,"VIDEO"),id:S(1),parentRef:T(8),url:S(2),mimeType:S(3),thumbnailImageUrl:S(4),thumbnailVideoUrl:T(5),width:Q(6),height:Q(7),uploadedToastVisibility:T(9)}));var dk=G(()=>Object.assign({},{},{type:u(3,"AUDIO"),id:S(1),url:S(2),mimeType:S(3),title:S(4),durationMs:P(5),uploadedToastVisibility:T(6)}));var ek=H(()=>({type:[1,bk,2,ck,3,dk]}),()=>({}));var fk=G(()=>Object.assign({},{},{type:u(1,"DONE"),ref:S(1),ba:V(2)}));var gk=G(()=>Object.assign({},{},{type:u(2,"FAILED"),Ra:S(1)}));var hk=H(()=>({type:[1,fk,2,gk]}),()=>({}));var ik=G(()=>Object.assign({},{},{type:u(1,"IMAGE"),ref:S(1)}));var jk=G(()=>Object.assign({},{},{type:u(2,"VIDEO"),ref:S(1)}));var kk=G(()=>Object.assign({},{},{type:u(3,"AUDIO"),ref:S(1)}));var fb=H(()=>({type:[1,ik,2,jk,3,kk]}),()=>({}));var lk=G(()=>Object.assign({},{},{type:u(1,"DONE")}));var mk=G(()=>Object.assign({},{},{type:u(2,"FAILED"),Ra:S(1)}));var gb=H(()=>({type:[1,lk,2,mk]}),()=>({}));var nk=G(()=>Object.assign({},{},{type:u(1,"IMAGE"),ref:S(1)}));var ok=G(()=>Object.assign({},{},{type:u(2,"VIDEO"),ref:S(1)}));var pk=H(()=>({type:[1,nk,2,ok]}),()=>({}));var qk=G(()=>Object.assign({},{},{type:u(1,"IMAGE"),ref:S(1),url:S(2)}));var rk=G(()=>Object.assign({},{},{type:u(2,"VIDEO"),ref:S(1),url:S(2)}));var sk=H(()=>({type:[1,qk,2,rk]}),()=>({}));var tk=G(()=>({}));var wk=G(()=>({weight:S(1),styles:Yi(2)}));var xk=G(()=>({ref:S(1),name:S(2),weights:B(3,wk),previewUrl:T(4)}));var yk=G(()=>({fonts:B(1,xk)}));var zk=G(()=>({selectedFontRef:T(1)}));var Ak=G(()=>Object.assign({},{},{type:u(1,"COMPLETED"),font:x(1,xk)}));var Bk=G(()=>Object.assign({},{},{type:u(2,"ABORTED")}));var Ck=H(()=>({type:[1,Ak,2,Bk]}),()=>({}));var Dk=class{constructor(a){this.B=a}async queueMediaUpload(a){a=ek.F(a);a=await this.B.request("CONTENT_V1_QUEUE_MEDIA_UPLOAD",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"CONTENT_V1_QUEUE_MEDIA_UPLOAD: Response cannot be empty"});return hk.D(a.value)}async getTemporaryUrl(a){a=pk.F(a);a=await this.B.request("CONTENT_V1_GET_TEMPORARY_URL",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"CONTENT_V1_GET_TEMPORARY_URL: Response cannot be empty"});
return sk.D(a.value)}async findFonts(a){a=tk.F(a);a=await this.B.request("CONTENT_V1_FIND_FONTS",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"CONTENT_V1_FIND_FONTS: Response cannot be empty"});return yk.D(a.value)}async requestFontSelection(a){a=zk.F(a);a=await this.B.request("CONTENT_V1_REQUEST_FONT_SELECTION",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"CONTENT_V1_REQUEST_FONT_SELECTION: Response cannot be empty"});
return Ck.D(a.value)}};var Ek=a=>{const b=a.type;switch(b){case "IMAGE":return new bk(a);case "VIDEO":return new ck(a);case "AUDIO":return new dk(a);default:throw new K({code:"BAD_REQUEST",message:`Unexpected upload options type '${b}'.`});}},Fk=a=>{const b=a.type;switch(b){case "IMAGE":return new ik(Object.assign({},a));case "VIDEO":return new jk(Object.assign({},a));case "AUDIO":return new kk(Object.assign({},a));default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected options type '${b}'.`});}},Gk=a=>{const b=
a.type;switch(b){case "DONE":return{type:"done"};case "FAILED":return{type:"failed",reason:{type:a.Ra}};default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected result type '${b}'.`});}},Hk=a=>a.map(b=>{switch(b){case "normal":case "italic":return b;default:throw new K({code:"BAD_REQUEST",message:`Unknown font style ${b}`});}}),Ik=a=>{const b=a.weight;switch(b){case "normal":case "thin":case "extralight":case "light":case "medium":case "semibold":case "bold":case "ultrabold":case "heavy":return{weight:a.weight,
styles:Hk(a.styles)};default:throw new K({code:"BAD_REQUEST",message:`Unknown font weight ${b}`});}},Jk=a=>Object.assign({},a,{weights:a.weights.map(Ik),ref:a.ref}),ib=a=>{switch(a){case "invalid_dimensions":return new J({code:"BAD_REQUEST",message:"Invalid asset dimensions received."});case "invalid_id":return new J({code:"BAD_REQUEST",message:"Invalid asset ID received."});case "invalid_parent_ref":return new J({code:"BAD_REQUEST",message:"Invalid reference to parent asset received."});case "invalid_duration":return new J({code:"BAD_REQUEST",
message:"Invalid asset duration received."});case "invalid_media_type":return new J({code:"BAD_REQUEST",message:"Invalid asset type received."});case "invalid_options":return new J({code:"BAD_REQUEST",message:"Invalid upload options received."});case "invalid_thumbnail_url":return new J({code:"BAD_REQUEST",message:"Invalid asset thumbnail URL received."});case "invalid_title":return new J({code:"BAD_REQUEST",message:"Invalid asset title received."});case "invalid_url":return new J({code:"BAD_REQUEST",
message:"Invalid asset URL received."});case "mismatched_mime_type":return new J({code:"BAD_REQUEST",message:"Mime type mismatch between supplied and asset mime-types."});case "unsupported_mime_type":return new J({code:"BAD_REQUEST",message:"Unsupported asset mime-type."});case "offline":return new J({code:"USER_OFFLINE",message:"Could not carry out the request due to the user being offline."});case "quota_exceeded":return new J({code:"QUOTA_EXCEEDED",message:"Unable to upload asset due to user having exceeded their uploads quota."});
case "timeout":return new J({code:"TIMEOUT",message:"Upload operation timed-out. Please try again later."});case "unavailable_thumbnail":return new J({code:"NOT_FOUND",message:"Asset thumbnail was unavailable at provided URL."});case "unavailable_media":return new J({code:"NOT_FOUND",message:"Asset was unavailable at provided URL."});case "unknown":return new J({code:"INTERNAL_ERROR",message:"Something unexpected went wrong."});case "oversized_media":return new J({code:"BAD_EXTERNAL_SERVICE_RESPONSE",
message:"Asset upload failed due to it exceeding the maximum supported file size of 25 MBs. "});case "oversized_media_dimensions":return new J({code:"BAD_EXTERNAL_SERVICE_RESPONSE",message:"Asset upload failed due to it exceeding the 250 megapixels limit."});default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected failure reason type '${a}'.`});}};var Kk=["IMAGE","VIDEO","AUDIO"],Lk=["IMAGE","VIDEO"],Pk=a=>{if("object"!==typeof a||null==a)return{type:"invalid_options"};if(!Y(a.type)||!Kk.includes(a.type))return{type:"invalid_media_type"};if(null!=a.uploadedToastVisibility&&!Y(a.uploadedToastVisibility))return{type:"invalid_options"};const b=a.type;switch(b){case "IMAGE":return Mk(a);case "VIDEO":return Nk(a);case "AUDIO":return Ok(a);default:return new m(b),{type:"invalid_media_type"}}},Mk=a=>{if(!Y(a.id))return{type:"invalid_id"};if(a.parentRef&&
!Y(a.parentRef))return{type:"invalid_parent_ref"};if(!Y(a.url))return{type:"invalid_url"};if(!Y(a.mimeType))return{type:"unsupported_mime_type"};if(!Y(a.thumbnailUrl))return{type:"invalid_thumbnail_url"};if(!Qk(a))return{type:"invalid_dimensions"}},Nk=a=>{if(!Y(a.id))return{type:"invalid_id"};if(a.parentRef&&!Y(a.parentRef))return{type:"invalid_parent_ref"};if(!Y(a.url))return{type:"invalid_url"};if(!Y(a.mimeType))return{type:"unsupported_mime_type"};if(!Y(a.thumbnailImageUrl)||null!=a.thumbnailVideoUrl&&
!Y(a.thumbnailVideoUrl))return{type:"invalid_thumbnail_url"};if(!Qk(a))return{type:"invalid_dimensions"}},Ok=a=>{if(!Y(a.id))return{type:"invalid_id"};if(!Y(a.url))return{type:"invalid_url"};if(!Y(a.mimeType))return{type:"unsupported_mime_type"};if(!Y(a.title))return{type:"invalid_title"};var b;(b="number"!==typeof a.durationMs)||(a=a.durationMs,b=!(Number.isSafeInteger(a)&&0<a));if(b)return{type:"invalid_duration"}},Y=a=>"string"===typeof a,Qk=({width:a,height:b})=>"number"===typeof a&&"number"===
typeof b||null==a&&null==b;var ii=class{constructor(a,b,c){this.K=b;this.j=c;this.A=new Dk(a);this.eb=this.eb.bind(this);this.xd=this.xd.bind(this)}async queueMediaUpload(a){this.l("queueMediaUpload");Se(this.K,{Pb:"method",Qb:"queueMediaUpload",Wb:"upload"});try{const b=Pk(a);if(null!=b){const d=a.type;switch(d){case "IMAGE":return{type:"failed",reason:b};case "VIDEO":return{type:"failed",reason:b};case "AUDIO":return{type:"failed",reason:b};default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected request type '${d}'.`});
}}const c=await this.A.queueMediaUpload(Ek(a));return kb({type:a.type,result:c,eb:this.xd})}catch(b){if(b instanceof J)throw b;throw new J({code:"INTERNAL_ERROR",message:`
      Something unexpected happened while trying to find or import media.

      Error Details: ${b instanceof Error?b.message:b}

      Please check that:

      1. You are connected to the internet.
      2. You are using the recent version of the Canva mobile app, if you're on a Canva mobile app.
      3. The media MIME type is supported.
      4. The MIME type you've provided matches the media MIME type.
      5. The media you're trying to import is available at the specified URL and does not require cookies or the basic HTTP authentication to access it.

      If you have tried all the above and it has not helped, please report your issue to Canva.
`});}}async getTemporaryUrl(a){this.l("getTemporaryUrl");try{if(!("object"===typeof a&&null!=a&&Y(a.type)&&Lk.includes(a.type)&&Y(a.ref)))throw new J({code:"BAD_REQUEST",message:"Malformed request"});const c=await this.A.getTemporaryUrl(a);a:{const d=c.type;switch(d){case "IMAGE":var b={type:"IMAGE",ref:c.ref,url:c.url};break a;case "VIDEO":b={type:"VIDEO",ref:c.ref,url:c.url};break a;default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected result type '${d}'.`});}}return b}catch(c){if(c instanceof
J)throw new J({code:c.code,message:`Encountered an error while trying to get a temporary URL: ${c.rawMessage}`});throw new J({code:"INTERNAL_ERROR",message:`Encountered an error while trying to get a temporary URL: ${c instanceof Error?c.message:c}`});}}async upload(a){this.l("upload");a:{if("object"!==typeof a||null==a)throw new J({code:"BAD_REQUEST",message:"Upload options must be an object and cannot be undefined."});if(!Y(a.type))throw new J({code:"BAD_REQUEST",message:`Invalid upload type. Expected "string" received "${typeof a.type}".`});
if(null!=a.uploadedToastVisibility&&!Y(a.uploadedToastVisibility))throw new J({code:"BAD_REQUEST",message:`Invalid uploaded toast visibility. Expected "string" or "undefined" received "${typeof a.type}".`});var b=a.type;switch(b){case "IMAGE":if(!Y(a.id))throw new J({code:"BAD_REQUEST",message:`Invalid image 'id'. Expected "string" received "${typeof a.id}".`});if(a.parentRef&&!Y(a.parentRef))throw new J({code:"BAD_REQUEST",message:`Invalid image 'parentRef'. Expected "string" received "${typeof a.parentRef}".`});
if(!Y(a.url))throw new J({code:"BAD_REQUEST",message:`Invalid image 'url'. Expected "string" received "${typeof a.url}".`});if(!Y(a.mimeType))throw new J({code:"BAD_REQUEST",message:`Invalid image 'mimeType'. Expected "string" received "${typeof a.mimeType}".`});if(!Y(a.thumbnailUrl))throw new J({code:"BAD_REQUEST",message:`Invalid image 'thumbnailUrl'. Expected "string" received "${typeof a.thumbnailUrl}".`});if(!Qk(a))throw new J({code:"BAD_REQUEST",message:"Invalid image 'dimensions'."});break a;
case "VIDEO":if(!Y(a.id))throw new J({code:"BAD_REQUEST",message:`Invalid video 'id'. Expected "string" received "${typeof a.id}".`});if(a.parentRef&&!Y(a.parentRef))throw new J({code:"BAD_REQUEST",message:`Invalid video 'parentRef'. Expected "string" received "${typeof a.parentRef}".`});if(!Y(a.url))throw new J({code:"BAD_REQUEST",message:`Invalid video 'url'. Expected "string" received "${typeof a.url}".`});if(!Y(a.mimeType))throw new J({code:"BAD_REQUEST",message:`Invalid video 'mimeType'. Expected "string" received "${typeof a.mimeType}".`});
if(!Y(a.thumbnailImageUrl))throw new J({code:"BAD_REQUEST",message:`Invalid video 'thumbnailImageUrl'. Expected "string" received "${typeof a.thumbnailImageUrl}".`});if(null!=a.thumbnailVideoUrl&&!Y(a.thumbnailVideoUrl))throw new J({code:"BAD_REQUEST",message:`Invalid video 'thumbnailVideoUrl'. Expected "string" or "undefined" received "${typeof a.thumbnailVideoUrl}".`});if(!Qk(a))throw new J({code:"BAD_REQUEST",message:"Invalid video 'dimensions'."});break a;case "AUDIO":if(!Y(a.id))throw new J({code:"BAD_REQUEST",
message:`Invalid audio 'id'. Expected "string" received "${typeof a.id}".`});if(!Y(a.url))throw new J({code:"BAD_REQUEST",message:`Invalid audio 'url'. Expected "string" received "${typeof a.url}".`});if(!Y(a.mimeType))throw new J({code:"BAD_REQUEST",message:`Invalid audio 'mimeType'. Expected "string" received "${typeof a.mimeType}".`});if(!Y(a.mimeType))throw new J({code:"BAD_REQUEST",message:`Invalid audio 'title'. Expected "string" received "${typeof a.title}".`});if("number"!==typeof a.durationMs)throw new J({code:"BAD_REQUEST",
message:`Invalid audio 'durationMs'. Expected "number" received "${typeof a.durationMs}".`});b=a.durationMs;if(!(Number.isSafeInteger(b)&&0<b))throw new J({code:"BAD_REQUEST",message:"Invalid audio 'durationMs'. Duration must be a non-zero positive integer."});break a;default:throw new K({code:"BAD_REQUEST",message:`Invalid upload type "${b}".`});}}try{const c=await this.A.queueMediaUpload(Ek(a));return jb({type:a.type,result:c,eb:this.eb})}catch(c){if(c instanceof J)throw c;throw new J({code:"INTERNAL_ERROR",
message:`Encountered an error while uploading asset: ${c instanceof Error?c.message:c}`});}}async findFonts(){this.l("findFonts");return{fonts:(await this.A.findFonts(new tk)).fonts.map(Jk)}}async requestFontSelection(a){a=void 0===a?{}:a;this.l("requestFontSelection");a=await this.A.requestFontSelection(new zk(a));return"ABORTED"===a.type?{type:"ABORTED"}:{type:"COMPLETED",font:Jk(a.font)}}xd(a){var b=Object.assign({},a),c=a.ba,d=(delete b.ba,b);return async()=>{try{if(c)return{type:"done"};const e=
await hb(this.A,Fk(d));return Gk(e)}catch(e){if(e instanceof J)throw e;throw new J({code:"INTERNAL_ERROR",message:`
      Something unexpected happened while trying to find or get the media upload status.

      Error Details: ${e instanceof Error?e.message:e}

      Please check that:

      1. You are connected to the internet.
      2. You are using the recent version of the Canva mobile app, if you're on a Canva mobile app.
      3. The media you're trying to import is supported. We support:
         - Images:
           - JPEG, PNG, HEIC, or WEBP of up to 25 MB.
           - SVGs of up to 3 MB.
         - Videos:
           - AVI, GIF, M4V, Matroska, QuickTime, MP4, MPEG, or WEBM of up to 100 MB.
           - SVGs of up to 3 MB.
           - Lottie of up to 0.5 MB
         - Audio:
           - MP3, MP4, WAV, OGG or WEBM of up to 50 MB.
      4. There are additional limitations per each supported media type:
         - JPEGs, PNGs, and HEICs must not have more than 250 million pixels.
         - SVG images must not contain external links, external fonts, duplicate ids, and some other attributes, properties, and tags.
           Please refer to the Canva developer documentation to find the full list of things not allowed in SVGs.
      5. The media you're trying to import is available at the specified URL and does not require cookies or the basic HTTP authentication to access it.

      If you have tried all the above and it has not helped, please report your issue to Canva.
`});}}}eb(a){var b=Object.assign({},a),c=a.ba,d=(delete b.ba,b);return async()=>{if(!c){var e=await hb(this.A,Fk(d));e=Gk(e);var f=e.type;switch(f){case "done":break;case "failed":throw ib(e.reason.type);default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected upload result type '${f}'.`});}}}}l(a){this.j.l(X({ma:"asset",client:"Content",method:a}))}};var Rk=I(()=>[0,1,2,3]);var Sk=G(()=>({name:S(1),type:C(2,Rk),values:S(3)}));var nb=G(()=>({name:S(1),columns:B(2,Sk)}));var Tk=class{constructor(a){this.B=a}async getDataTable(){const a=await this.B.request("getDataTable");if(!a.ok)throw new J({code:"INTERNAL_ERROR",message:"Failed to retrieve a data table."});if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"Data table cannot be undefined."});return nb.D(a.value)}};var rb=class{constructor(a,b,c){this.K=b;this.j=c;this.A=new Tk(a)}async getDataTable(){this.l("getDataTable");Cc(this.K,"getDataTable");const a=await this.A.getDataTable();return{name:a.name,columns:a.columns.map(lb)}}l(a){this.j.l(X({ma:"data",client:"DataConsumer",method:a}))}};var Uk=class{constructor(a){this.B=a}};var qb=class{constructor(a,b,c){this.B=a;this.K=b;this.j=c;this.onSelectDataTable=async d=>{this.l("onSelectDataTable");this.K.hf("preview","onSelectDataTable");this.He.handler=d;await mb(this.A)};this.He=new Vk;this.A=new Uk(a);ob(a,this.He)}l(a){this.j.l(X({ma:"data",client:"DataProvider",method:a}))}},Vk=class{constructor(){this._handler=void 0;this.Fc=!1}set handler(a){this._handler=a}get handler(){return this._handler}async selectDataTable(){if(this.Fc)throw new J({code:"FAILED_PRECONDITION",
message:"Received 'selectDataTable' request while the user is still selecting data. Please wait until the initial request has settled before sending another request."});this.Fc=!0;return new Promise(async a=>{if(null==this._handler)throw this.Fc=!1,new J({code:"FAILED_PRECONDITION",message:"You've tried calling 'selectDataTable' before the provider registered a callback with 'onSelectDataTable'.\nPlease wait a moment for the provider to register its callback before calling the 'selectDataTable' method."});
this._handler({selectDataTable:b=>{this.Fc=!1;return a({name:b.name,columns:b.columns.map(pb)})}})})}};var Rb=(a,b)=>["<MULTI_SEGMENT>",a,b],ze=a=>Array.isArray(a)&&3===a.length&&"<MULTI_SEGMENT>"===a[0];var ub=G(()=>({data:Zi(1),version:P(2)}));var Wk=G(()=>({id:S(1),version:P(2)}));var vb=G(()=>({data:Zi(1),version:P(2),mediaRef:x(3,Wk)}));var Yb=G(()=>({top:Ti(1),left:Ti(2),width:T(3),height:T(4),rotation:Vi(5)}));var Xk=G(()=>Object.assign({},{},{type:u(1,"IMAGE"),ref:T(1),dataUrl:T(2),box:A(3,Yb)}));var Yk=G(()=>Object.assign({},{},{type:u(2,"VIDEO"),ref:S(1),box:A(2,Yb)}));var Zk=G(()=>Object.assign({},{},{type:u(3,"EMBED"),url:S(1),box:A(2,Yb)}));var $k=G(()=>Object.assign({},{},{type:u(4,"TEXT"),children:Yi(1),fontSize:Q(2),textAlign:T(3),color:T(4),fontRef:T(9),fontWeight:T(5),fontStyle:T(6),decoration:T(7),box:A(8,Yb)}));var al=G(()=>({top:Ti(1),left:Ti(2),width:Ti(3),height:Ti(4)}));var bl=G(()=>({ref:S(1)}));var cl=G(()=>({ref:S(1)}));var dl=G(()=>({dropTarget:W(1),color:T(2),image:A(3,bl),video:A(4,cl)}));var el=G(()=>({weight:P(1),color:S(2),strokeAlign:S(3)}));var fl=G(()=>({d:S(1),fill:x(2,dl),stroke:A(3,el)}));var gl=G(()=>Object.assign({},{},{type:u(5,"SHAPE"),viewBox:x(1,al),paths:B(2,fl),box:A(3,Yb)}));var il=G(()=>Object.assign({},{},{type:u(6,"GROUP"),children:B(1,hl),box:A(2,Yb)}));var jl=G(()=>({text:A(1,$k),fill:A(2,dl),rowSpan:Q(3),colSpan:Q(4)}));var kl=G(()=>({cells:B(1,jl)}));var ll=G(()=>Object.assign({},{},{type:u(10,"TABLE"),rows:B(1,kl)}));var hl=H(()=>({type:[1,Xk,2,Yk,3,Zk,4,$k,5,gl,6,il,10,ll]}),()=>({}));var dc=G(()=>({type:S(1,"INTERACTIVE_ELEMENT"),width:Ti(2),height:Ti(3)}));var wb=G(()=>({Bd:T(1),rb:Zi(2),kb:B(3,hl),interactiveElement:A(4,dc),placement:A(5,Yb)}));var Gb=G(()=>({id:S(1)}));var ml=I(()=>[1,2]);var xb=G(()=>({cc:x(1,Gb),scope:C(2,ml),count:P(3)}));var yb=G(()=>({fh:V(1)}));var $b=G(()=>({elements:B(1,hl),background:A(2,dl),title:T(3)}));var nl=G(()=>({token:S(1)}));var ol=G(()=>({width:Ti(1),height:Ti(2)}));var pl=G(()=>({dimensions:A(1,ol)}));var ql=G(()=>({dimensions:A(1,ol)}));var rl=G(()=>({ref:S(1)}));var Ab=G(()=>({Bd:T(1)}));var sl=G(()=>({code:S(1),message:S(2)}));var Eb=G(()=>({Ng:A(1,sl),tc:S(5),data:Zi(6)}));var fc=G(()=>Object.assign({},{},{scope:u(1,"TOMBSTONE")}));var hc=G(()=>Object.assign({},{},{scope:u(2,"PLAINTEXT"),text:S(1)}));var gc=G(()=>Object.assign({},{},{scope:u(3,"IMAGE"),ref:S(1)}));var tl=H(()=>({scope:[1,fc,2,hc,3,gc]}),()=>({}));var Hb=G(()=>({values:B(1,tl)}));var Jb=G(()=>({cc:x(1,Gb),scope:C(2,ml),values:B(3,tl)}));var Lb=G(()=>({scope:C(1,ml)}));var Pb=G(()=>({id:P(1)}));var Mb=G(()=>({gf:x(1,Pb),Ab:x(2,xb)}));var Sb=G(()=>({gg:S(1)}));var ul=class{constructor(a){this.B=a}async addNativeElement(a){a=await this.B.request("DI_V1_ADD_NATIVE_ELEMENT",hl.F(a));if(!a.ok)throw a.error;}async setCurrentPageBackground(a){a=await this.B.request("DI_V1_SET_CURRENT_PAGE_BACKGROUND",dl.F(a));if(!a.ok)throw a.error;}async addPage(a){a=await this.B.request("DI_V1_ADD_PAGE",$b.F(a));if(!a.ok){if(a.error instanceof J)throw new J({code:a.error.code,message:`${"Encountered an error while adding page"}: ${a.error.rawMessage}`});throw new J({code:"INTERNAL_ERROR",
message:`${"Encountered an error while adding page"}: ${a.error}`});}}async getDesignToken(){const a=await this.B.request("DI_V1_GET_DESIGN_TOKEN");if(!a.ok){if(a.error instanceof J)throw a.error;throw new J({code:"INTERNAL_ERROR",message:`${"Encountered an error while trying to retrieve design token."}: ${a.error}`});}if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"Encountered an error while trying to retrieve design token.: DI_V1_GET_DESIGN_TOKEN: Response cannot be empty"});return nl.D(a.value)}async getDefaultPageDimensions(){const a=
await this.B.request("DI_V1_GET_DEFAULT_PAGE_DIMENSIONS");if(!a.ok){if(a.error instanceof J)throw new J({code:a.error.code,message:`${"Encountered an error while trying to read default page dimensions."}: ${a.error.rawMessage}`});throw new J({code:"INTERNAL_ERROR",message:`${"Encountered an error while trying to read default page dimensions."}: ${a.error}`});}if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"Encountered an error while trying to read default page dimensions.: DI_V1_GET_DEFAULT_PAGE_DIMENSIONS: Response cannot be empty"});
return pl.D(a.value)}async getCurrentPageContext(){const a=await this.B.request("DI_V1_GET_CURRENT_PAGE_CONTEXT");if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"DI_V1_GET_CURRENT_PAGE_CONTEXT: Response cannot be empty"});return ql.D(a.value)}async addAudioTrack(a){a=await this.B.request("DI_V1_ADD_AUDIO_TRACK",rl.F(a));if(!a.ok)throw a.error;}async setAppElementData(a){a=await this.B.request("DI_V1_SET_APP_ELEMENT_DATA",wb.F(a));if(!a.ok){if(a.error instanceof
J)throw new J({code:a.error.code,message:`${"Encountered an error while setting app element data"}: ${a.error.rawMessage}`});throw new J({code:"INTERNAL_ERROR",message:`${"Encountered an error while setting app element data"}: ${a.error}`});}}registerRenderAppElement(){this.B.request("DI_V1_REGISTER_RENDER_APP_ELEMENT")}};var bc=a=>{var b,c;return new dl({dropTarget:a.dropTarget,color:a.color,image:"IMAGE"===(null===(b=a.asset)||void 0===b?void 0:b.type)?new bl({ref:a.asset.ref}):void 0,video:"VIDEO"===(null===(c=a.asset)||void 0===c?void 0:c.type)?new cl({ref:a.asset.ref}):void 0})},vl=a=>new jl({fill:a.fill&&bc(a.fill),colSpan:a.colSpan,rowSpan:a.rowSpan,text:a.text&&ac(a.text)}),ac=a=>{switch(a.type){case "TEXT":return new $k(Object.assign({},a,{box:Zb(a)}));case "IMAGE":return new Xk(Object.assign({},a,{box:Zb(a)}));
case "VIDEO":return new Yk(Object.assign({},a,{box:Zb(a)}));case "EMBED":return new Zk(Object.assign({},a,{box:Zb(a)}));case "SHAPE":return new gl(Object.assign({},a,{box:Zb(a),paths:a.paths.map(b=>new fl(Object.assign({},b,{fill:bc(b.fill),stroke:b.stroke?new el(b.stroke):void 0})))}));case "GROUP":return new il(Object.assign({},a,{box:Zb(a),children:a.children.map(ac)}));case "TABLE":return ll.xg({rows:a.rows.map(b=>{({cells:b}=b);return{cells:b.map(vl)}})});default:throw new K({code:"INTERNAL_ERROR",
message:`Unsupported element type: '${a}'.`});}};var Mc=class{constructor(a,b,c,d,e){this.A=a;this.id=b;this.scope=c;this.qf=d;this.gh=e;this.Ue=!1;this.contents=Object.freeze(d.filter(f=>null!=f).map(f=>Object.assign({},f)))}async save(){if(this.Ue)throw new J({code:"BAD_REQUEST",message:"Attempted to save a new change on an outdated draft. To make another change, read a fresh draft from the selection event."});if(!this.gh())throw new J({code:"BAD_REQUEST",message:"Attempted to save a change on a selection event which has been disposed of"});var a=
[],b=this.contents,c=0;for(let g=0;g<this.qf.length;g++){const h=this.qf[g];if(null==h)a.push(void 0);else{const k=b[c++];var d=a,e=d.push;a:{var f=this.scope;switch(f){case "plaintext":f=h.text!==k.text;break a;case "image":f=h.ref!==k.ref;break a;default:throw new J({code:"BAD_REQUEST",message:`${f} is not a supported selection scope.`});}}e.call(d,f?k:void 0)}}this.Ue=!0;b=this.A;c=this.scope;d=this.id;a=ic(a);a=new Jb({cc:new Gb({id:d}),scope:kc(c),values:a.values});await Kb(b,a)}};var mc=class{constructor(a){this.Ec=a;this.Ib=!0;this.hd=!1}get canOpen(){return this.Ib&&this.bf&&!this.hd}get reason(){if(!this.canOpen){if(!this.Ib)return"Overlay can only be opened on currently selected element";if(!this.bf)return"Overlay can only be opened on current selection with single image fill.";if(this.hd)return"There can only be a single overlay opened at any time."}}get cc(){return this.Ec.id}get selection(){return this.Ec}get bf(){return"image"===this.Ec.scope&&1===this.Ec.count}ec(a){this.Ib&&
(this.hd=a)}};var wl=class{constructor(a){this.A=a;this.Jd=!1;this.Bf=new Map}ec(a){const b=eb(this.Ac,"INTERNAL_ERROR","currentInternalSelectionOverlay should exist.");b.ec(a);oc(this,b.selection)}};var rc=/^Y[A-Za-z0-9_-]{10}:[0-9]+$/,ld="normal thin extralight light medium semibold bold ultrabold heavy".split(" ");var xc=/data:.*,.*/,yc=/^data:image\/svg\+xml;base64,/i,Bc=/^https?:\/\/[^\s]+\s*$/,Hc=/^#[0-9a-f]{6}$/i,zc=/^M[a-zA-Z0-9_-]{10}:[0-9]+$/,Ac=/^V[A-Za-z0-9_-]{10}$/,xl=/^a[A-Za-z0-9_-]{10}$/,M=Math.pow(2,15),tc=ld.map(a=>`"${a}"`).join(" | "),yl=class{constructor(a){this.K=a}};var Lc=["plaintext","image"],fe=class{constructor(a,b,c){this.wb=a;this.K=b;this.j=c;this.Sc=new Map;this.selection={registerOnChange:d=>Nc(this,d)};this.overlay={registerOnOpenable:d=>{Cc(this.K,"registerOnOpenable");return Oc(this,d)}};this.registerRenderAppElement=d=>{this.l("registerRenderAppElement");this.ac=d;this.A.registerRenderAppElement()};this.onAppElementChange=d=>{this.l("onAppElementChange");this.md=d;Db(this.A)};this.onAppElementDrop=d=>{this.Ee=d};this.getCurrentPageContext=()=>{this.l("getCurrentPageContext");
return this.A.getCurrentPageContext().catch(d=>{if(d instanceof J)throw d;throw new J({code:"INTERNAL_ERROR",message:`Encountered an error while trying to read current page context: ${d instanceof Error?d.message:d}`});})};this.getDefaultPageDimensions=async()=>{this.l("getDefaultPageDimensions");const {dimensions:d}=await this.A.getDefaultPageDimensions();return d};this.setCurrentPageBackground=({color:d,asset:e})=>{this.l("setCurrentPageBackground");null==d&&null==e&&(d="#ffffff");if(null!=d&&null!=
e)throw new J({code:"BAD_REQUEST",message:"Only 1 of color or asset can be defined."});d=Jc({color:d,asset:e});return this.A.setCurrentPageBackground(bc(d))};this.addNativeElement=async d=>{this.l("addNativeElement");try{const e=Xb(d)?vc(this.cd,d):Ec(this.cd,d);await this.A.addNativeElement(ac(e))}catch(e){e instanceof J&&Pc(this,{error:e,hg:d,tc:"addNativeElement"});if(e instanceof J)throw e;throw new J({code:"INTERNAL_ERROR",message:`Encountered an error while adding native element: ${e instanceof
Error?e.message:e}`});}};this.addPage=async d=>{var e;this.l("addPage");const f=null===(e=null===d||void 0===d?void 0:d.elements)||void 0===e?void 0:e.map(g=>vc(this.cd,g));e=(null===d||void 0===d?void 0:d.background)&&Jc(d.background);d=(null===d||void 0===d?void 0:d.title)&&Ic(d.title);await this.A.addPage(cc({elements:f,background:e,title:d}))};this.getDesignToken=()=>{this.l("getDesignToken");return this.A.getDesignToken()};this.pe();this.A=new ul(this.wb);this.je=new wl(this.A);this.cd=new yl(this.K)}async setAppElementData(a,
b){this.l("setAppElementData");let c,d;try{"function"===typeof a?(c=await Bb(this.A),{appElementData:d,placement:b}=await a()):d=a;if(!this.ac)throw new J({code:"FAILED_PRECONDITION",message:"You've tried calling the 'setAppElementData' method without registering a callback with the 'registerRenderAppElement' method.\nThis doesn't work because setting the app element's data triggers the callback, so the callback needs to be registered first.\n\nPlease register a callback with 'registerRenderAppElement' before calling the 'setAppElementData' method."});
try{if(null!=b){a=b;const e=[];null==a.top&&e.push("top");null==a.left&&e.push("left");null==a.width&&e.push("width");null==a.height&&e.push("height");L(0===e.length,`Missing placement properties: ${e.join(",")}.`,"invalid_element_placement");Gc(a)}await this.A.setAppElementData(ec({rb:Kc(d),kb:Qc(this,d),placement:b,og:null===c||void 0===c?void 0:c.Bd}))}catch(e){throw e instanceof J&&Pc(this,{error:e,hg:this.ac(d),tc:"setAppElementData",data:Vb(d)}),e;}}finally{c&&await Cb(this.A,c)}}async addAudioTrack(a){this.l("addAudioTrack");
try{L(null!=a,"audio track must exist","invalid_element_state"),L(xl.test(a.ref),"Invalid audio reference","invalid_element_state"),await this.A.addAudioTrack(new rl({ref:a.ref}))}catch(b){if(b instanceof J)throw new J({code:b.code,message:`${"Encountered an error while adding audio track"}: ${b.rawMessage}`});throw new J({code:"INTERNAL_ERROR",message:`${"Encountered an error while adding audio track"}: ${b instanceof Error?b.message:b}`});}}pe(){zb(this.wb,{ke:async a=>{var b;null===(b=this.md)||
void 0===b?void 0:b.call(this,a?{data:Wb(a.data),version:a.version}:void 0)},Sh:async a=>{if(!this.ac)throw new J({code:"FAILED_PRECONDITION",message:"You've registered an onDrop callback for this AppElement using the 'onAppElementDrop' method,\nwithout registering a render callback with the 'registerRenderAppElement' method.\n\nThis doesn't work because the AppElement re-renders based on the AppElementData produced by\nthe onDrop callback.\n\nPlease ensure you've registered the render callback using 'registerRenderAppElement'."});
if(!this.Ee)throw new J({code:"INTERNAL_ERROR",message:"Unexpected drop event"});var b=a.mediaRef;const c=a.version;b=await this.Ee({data:Wb(a.data),version:c},{mediaRef:b});a=Kc(b);b=Qc(this,b);return ec({rb:a,kb:b})},Th:async a=>{const b=lc(a);this.Sc.forEach(c=>c(b));oc(this.je,b)},Uh:async a=>{this.je.ec(a.fh)}})}initAppElement({render:a}){this.l("initAppElement");this.registerRenderAppElement(a);return{addOrUpdateElement:(...b)=>this.setAppElementData(...b),registerOnElementChange:(...b)=>this.onAppElementChange(...b)}}l(a){this.j.l(X({ma:"design",
client:"DesignInteraction",method:a}))}};var Yc=new Set(["IMAGE"]),fd={type:a=>N(a,Zc,"'type' is not a valid drag type"),fullSizeSrc:a=>N(a,Rc,"'fullSizeSrc' must be a jpg or png data url"),previewSize:a=>N(a,bd,"'previewSize' must be an object containing only a positive numeric width and height")},id={type:a=>dd(a,["IMAGE"],"type"),previewSrc:a=>N(a,Uc,"'previewSrc' must be a url"),resolveImageRef:a=>N(a,Vc,"'resolveImageRef' must be a function"),previewSize:a=>N(a,bd,"'previewSize' must be an object containing only a positive numeric width and height"),
fullSize:a=>N(a,bd,"'fullSize' must be an object containing only a positive numeric width and height")},gd={fullSize:a=>N(a,bd,"'fullSize' must be an object containing only a positive numeric width and height or undefined",!0),previewSrc:a=>N(a,Rc,"'previewSrc' must be a jpg or png data url or undefined",!0)},nd={type:a=>dd(a,["VIDEO"],"type"),previewSrc:a=>N(a,Uc,"'previewSrc' must be a url"),resolveVideoRef:a=>N(a,Vc,"'resolveVideoRef' must be a function"),previewSize:a=>N(a,bd,"'previewSize' must be an object containing only a positive numeric width and height"),
fullSize:a=>N(a,bd,"'fullSize' must be an object containing only a positive numeric width and height")},pd={type:a=>dd(a,["AUDIO"],"type"),title:a=>N(a,Wc,"'title' must be supplied"),resolveAudioRef:a=>N(a,Vc,"'resolveAudioRef' must be a function"),durationMs:a=>N(a,Xc,"'durationMs' must be a number greater than 0")};var zd=new Set(["IMAGE"]),Dd={type:a=>Bd(a,["IMAGE"],"type"),previewUrl:a=>O(a,sd,"'previewUrl' must be a url"),resolveImageRef:a=>O(a,td,"'resolveImageRef' must be a function"),previewSize:a=>O(a,yd,"'previewSize' must be an object containing only a positive numeric width and height"),fullSize:a=>O(a,yd,"'fullSize' must be an object containing only a positive numeric width and height")},Gd={type:a=>Bd(a,["VIDEO"],"type"),previewUrl:a=>O(a,sd,"'previewUrl' must be a url"),resolveVideoRef:a=>O(a,td,
"'resolveVideoRef' must be a function"),previewSize:a=>O(a,yd,"'previewSize' must be an object containing only a positive numeric width and height"),fullSize:a=>O(a,yd,"'fullSize' must be an object containing only a positive numeric width and height")},Jd={type:a=>Bd(a,["AUDIO"],"type"),title:a=>O(a,ud,"'title' must be supplied"),resolveAudioRef:a=>O(a,td,"'resolveAudioRef' must be a function"),durationMs:a=>O(a,vd,"'durationMs' must be a number greater than 0")};var zl=class{ib({dragData:a}){if("AUDIO"!==(null===a||void 0===a?void 0:a.type))throw new J({code:"BAD_REQUEST",message:`Invalid drag type. Expected 'AUDIO' received '${null===a||void 0===a?void 0:a.type}'`});if(!qd(a))throw new J({code:"BAD_REQUEST",message:"invalid drag data"});return()=>a}gb(a){if(!Kd(a))throw new J({code:"BAD_REQUEST",message:"invalid drag data"});return a}};var Ld=G(()=>({ref:S(1)}));var Md=G(()=>({ref:S(1)}));var Nd=G(()=>({ref:S(1)}));var Al=G(()=>({x:P(1),y:P(2)}));var Bl=G(()=>({width:P(1),height:P(2)}));var Xd=G(()=>Object.assign({},{},{type:u(1,"IMAGE"),ab:x(1,Al),mb:x(2,Al),fb:x(3,Bl),fullSizeSrc:S(4),previewSize:x(5,Bl),fullSize:A(6,Bl),previewSrc:T(7)}));var Yd=G(()=>Object.assign({},{},{type:u(2,"TEXT"),ab:x(1,Al),mb:x(2,Al),fb:x(3,Bl),children:Yi(4),fontRef:T(10),fontSize:Q(5),fontWeight:T(6),fontStyle:T(7),decoration:T(8),textAlign:T(9)}));var Wd=G(()=>Object.assign({},{},{type:u(3,"EXTERNAL_IMAGE"),ab:x(1,Al),mb:x(2,Al),fb:x(3,Bl),previewSize:x(4,Bl),previewSrc:S(5)}));var Zd=G(()=>Object.assign({},{},{type:u(4,"VIDEO"),ab:x(1,Al),mb:x(2,Al),fb:x(3,Bl),previewSize:x(5,Bl),fullSize:A(6,Bl),previewSrc:S(7)}));var $d=G(()=>Object.assign({},{},{type:u(5,"AUDIO"),ab:x(1,Al),mb:x(2,Al),fb:x(3,Bl),title:S(5),durationMs:P(6)}));var Cl=G(()=>Object.assign({},{},{type:u(6,"EMBED"),ab:x(1,Al),mb:x(2,Al),fb:x(3,Bl),previewSize:x(4,Bl),previewSrc:S(5),embedUrl:S(6)}));var Pd=H(()=>({type:[1,Xd,2,Yd,3,Wd,4,Zd,5,$d,6,Cl]}),()=>({}));var Rd=G(()=>({x:P(1),y:P(2),timestamp:__c.Ui(3),bi:S(4)}));var Dl=class{constructor(a){this.B=a}async startDrag(a){a=await this.B.request("DND_V1_START_DRAG",Pd.F(a));if(!a.ok)throw a.error;}};var El={now:()=>Date.now()},Fl=class{constructor(a,b){this.node=a;this.startDrag=b;this.yc=El;this.Vb=!1;this.init=()=>{this.Rf();this.node.addEventListener("mouseup",this.onMouseUp);this.node.addEventListener("mousedown",this.onMouseDown);this.node.addEventListener("mousemove",this.onMouseMove);this.node.addEventListener("mouseleave",this.onMouseLeave)};this.Rf=()=>{this.node.removeEventListener("mouseup",this.onMouseUp);this.node.removeEventListener("mousedown",this.onMouseDown);this.node.removeEventListener("mousemove",
this.onMouseMove);this.node.removeEventListener("mouseleave",this.onMouseLeave)};this.onMouseDown=c=>{c.preventDefault();c.stopPropagation();this.Vb=!0;this.Cb={coords:Object.assign({},{x:c.clientX,y:c.clientY}),timestamp:this.yc.now()};return!1};this.onMouseUp=()=>{this.Vb=!1;this.Cb=void 0;return!1};this.onMouseMove=c=>{if(this.Vb&&this.bh(c))return this.Xe(c),!1};this.onMouseLeave=c=>{this.Vb&&this.Xe(c)};this.Xe=c=>{this.Vb=!1;this.Cb=void 0;c={x:c.clientX,y:c.clientY};const {top:d,left:e,width:f,
height:g}=this.node.getBoundingClientRect();this.startDrag({ab:c,mb:{x:e,y:d},fb:{width:f,height:g}})};this.bh=c=>{if(null==this.Cb)return!0;var d=c.clientX,e=c.clientY;c=this.Cb.timestamp>this.yc.now()-100;d=10>Math.abs(this.Cb.coords.x-d);e=10>Math.abs(this.Cb.coords.y-e);return!(c&&d&&e)}}};var Gl=class{Hd({node:a,dragData:b}){return()=>{"img"===a.nodeName.toLowerCase()&&(b=Object.assign({},{fullSize:{width:a.naturalWidth||a.width,height:a.naturalHeight||a.height},previewSrc:a.src,previewSize:{width:a.width,height:a.height}},b));jd(b);return Promise.resolve(b)}}ib({node:a,dragData:b}){if(Td(b))return this.Hd({node:a,dragData:b});"img"===a.nodeName.toLowerCase()?kd(Object.assign({},{fullSizeSrc:a.src},b)):hd(b);if((null===b||void 0===b?0:b.type)&&"IMAGE"!==b.type)throw new J({code:"BAD_REQUEST",
message:`Invalid drag type. Expected 'IMAGE' received '${b.type}'`});return async()=>{var c="img"===a.nodeName.toLowerCase()?a:void 0;c=Object.assign({},{type:"IMAGE"},c&&{fullSizeSrc:c.src,fullSize:{width:c.naturalWidth,height:c.naturalHeight},previewSize:{width:c.width,height:c.height}},b);if(!hd(c))throw new J({code:"BAD_REQUEST",message:"Invalid image data"});await Ud(c);return c}}async gb(a,b){var c=Object.assign({},b);"img"===a.nodeName.toLowerCase()&&(c={fullSize:{width:a.naturalWidth||a.width,
height:a.naturalHeight||a.height},previewSize:{width:a.width,height:a.height}},a.src&&(c.previewUrl=a.src),c=Object.assign({},c,b));Ed(c);return Promise.resolve(c)}};var de=(a,b)=>{switch(a.type){case "TEXT":return new Yd(Object.assign({},a,b));case "AUDIO":return new $d(Object.assign({},a,b));case "EMBED":return Object.assign({},b,Hl(a,["previewUrl"]),{previewSrc:a.previewUrl});case "VIDEO":return new Zd(Object.assign({},b,Hl(a,["previewUrl"]),{previewSrc:a.previewUrl}));case "IMAGE":return new Wd(Object.assign({},b,Hl(a,["previewUrl","fullSize"]),{previewSrc:a.previewUrl}));default:throw new K({code:"INTERNAL_ERROR",message:`Unsupported drag type: '${a}'.`});
}},Hl=(a,b)=>Object.keys(a).filter(c=>!b.includes(c)).reduce((c,d)=>Object.assign({},c,{[d]:a[d]}),{});var Jl=class{constructor(){this.Be=window}ib(a){return()=>{var b=this.Be.getComputedStyle(a.node),c=a.dragData&&Object.fromEntries(Object.entries(a.dragData).filter(([,d])=>null!=d));c=Object.assign({},{fontStyle:"italic"===b.fontStyle?"italic":"normal",decoration:b.textDecoration.includes("underline")?"underline":"none",fontWeight:600<=parseInt(b.fontWeight,10)?"bold":"normal",textAlign:Vd(b.textAlign),children:[a.node.innerText]},c,{type:"TEXT"});md(c);if(b=parseFloat(b.fontSize))c.fontSize=b;return Promise.resolve(c)}}async gb(a,
b){var c=Il(a);c=this.Be.getComputedStyle(c);b=b&&Object.fromEntries(Object.entries(b).filter(([,d])=>null!=d));a=Object.assign({},{fontStyle:"italic"===c.fontStyle?"italic":"normal",decoration:c.textDecoration.includes("underline")?"underline":"none",fontWeight:600<=parseInt(c.fontWeight,10)?"bold":"normal",textAlign:Vd(c.textAlign),children:[a.innerText]},b,{type:"TEXT"});Fd(a);if(c=parseFloat(c.fontSize))a.fontSize=c;return Promise.resolve(a)}},Il=a=>{var b;if(a.nodeType===Node.TEXT_NODE||(null===
(b=a.firstChild)||void 0===b?void 0:b.nodeType)===Node.TEXT_NODE)return a;b=[...a.querySelectorAll("*")].filter(c=>{var d;return(null===(d=c.firstChild)||void 0===d?void 0:d.nodeType)===Node.TEXT_NODE});return 0<b.length?b[0]:a};var Kl=class{Hd({node:a,dragData:b}){return()=>{"img"===a.nodeName.toLowerCase()&&(b=Object.assign({},{fullSize:{width:a.naturalWidth||a.width,height:a.naturalHeight||a.height},previewSrc:a.src,previewSize:{width:a.width,height:a.height}},b));if(!od(b))throw new J({code:"BAD_REQUEST",message:"invalid drag data"});return Promise.resolve(b)}}ib({node:a,dragData:b}){"img"===a.nodeName.toLowerCase()?rd(Object.assign({},{previewSrc:a.src},b)):od(b);if("VIDEO"!==(null===b||void 0===b?void 0:b.type))throw new J({code:"BAD_REQUEST",
message:`Invalid drag type. Expected 'Video' received '${null===b||void 0===b?void 0:b.type}'`});return this.Hd({node:a,dragData:b})}async gb(a,b){"img"===a.nodeName.toLowerCase()?Id(Object.assign({},{previewUrl:a.src},b)):Hd(b);let c=Object.assign({},b);"img"===a.nodeName.toLowerCase()&&(c=Object.assign({},{fullSize:{width:a.naturalWidth||a.width,height:a.naturalHeight||a.height},previewUrl:a.src,previewSize:{width:a.width,height:a.height}},b));if(!Hd(c))throw new J({code:"BAD_REQUEST",message:"invalid drag data"});
return Promise.resolve(c)}};var be=["VIDEO","IMAGE","TEXT","AUDIO","EMBED"],Ll=(a,b)=>{a=new Fl(a,b);a.init();return a},ge=class{constructor(a,b,c,d){var e=new Gl,f=new Jl,g=new Kl,h=new zl;this.Cc=b;this.K=c;this.j=d;this.Cg=Ll;this.We=e;this.Sf=f;this.Wf=g;this.Ge=h;this.Ad=new Map;this.Ih=k=>{const n=this.Ad.get(k);if(n)try{n.Rf()}finally{this.Ad.delete(k)}};this.ih=k=>({onDragStart:n=>{k.onDragStart(n)},onDragEnd:n=>{k.onDragEnd(n)}});this.Gh=(k,n,q)=>{this.Ih(k);this.Ad.set(k,this.Cg(k,ae(this,k,this.ih(n),q)))};this.Hf=
k=>{this.Kd=k};this.Mf=k=>{this.ni=k};this.Ef=k=>{this.jg=k};this.A=new Dl(a);Od(a,{fe:()=>this.fe(),Lh:()=>eb(this.ni,"BAD_REQUEST","resolveVideoRef could not be found. Please confirm that it has been supplied in dragData")(),$d:()=>this.$d()})}makeDraggable(a){var b;this.l("makeDraggable");Se(this.K,{Pb:"method",Qb:"makeDraggable",Wb:"startDrag"});const c={onDragStart:a.onDragStart,onDragEnd:a.onDragEnd};let d;try{const e=null===(b=a.dragData)||void 0===b?void 0:b.type;switch(e){case void 0:case "IMAGE":d=
this.We.ib(a);break;case "TEXT":d=this.Sf.ib(a);break;case "VIDEO":d=this.Wf.ib(a);break;case "AUDIO":d=this.Ge.ib(a);break;default:throw new K({code:"BAD_REQUEST",message:`Unsupported and/or invalid drag data type: '${e}'`});}this.Gh(a.node,c,d)}catch(e){if(e instanceof J)throw new J({code:e.code,message:`Encountered an error while trying to make node draggable: ${e.rawMessage}`});throw new J({code:"INTERNAL_ERROR",message:`Encountered an error while trying to make node draggable: ${e instanceof
Error?e.message:e}`});}}async startDrag(a,b){this.l("startDrag");a.preventDefault();const c=a.currentTarget;if(c){var d=document.body.style.pointerEvents||"all";document.body.style.pointerEvents="none";var {top:e,left:f,width:g,height:h}=c.getBoundingClientRect();await ee(this,c,b,{ab:{x:a.clientX,y:a.clientY},mb:{x:f,y:e},fb:{width:g,height:h}},()=>{document.body.style.pointerEvents=d;const k=new DragEvent("dragend",a);c.dispatchEvent(k)})}}$d(){return eb(this.jg,"BAD_REQUEST","'resolveAudioRef' could not be found. Please confirm that it has been supplied in 'dragData'")()}fe(){return eb(this.Kd,
"BAD_REQUEST","resolveImageRef could not be found. Please confirm that it has been supplied in dragData")()}l(a){this.j.l(X({ma:"design",client:"DragAndDrop",method:a}))}};var he=class{constructor(a,b,c=f=>window.requestAnimationFrame(f),d=(f,g)=>window.addEventListener(f,g),e=(f,g)=>window.removeEventListener(f,g)){this.B=a;this.j=b;this.requestAnimationFrame=c;this.addEventListener=d;this.removeEventListener=e;this.timestamp=0;this.Je=g=>async({clientX:h,clientY:k})=>{await Sd(this.A,{bi:g,timestamp:this.timestamp,x:h,y:k})};this.A=new Dl(a);const f=this.Je("mousemove");this.pf=g=>{this.requestAnimationFrame(h=>{if(!(h<=this.timestamp))return this.timestamp=h,f(g)})};
this.onDragEnd=this.Je("mouseup")}start(){this.l("start");this.stop();this.addEventListener("mousemove",this.pf);this.addEventListener("mouseup",this.onDragEnd)}stop(){this.l("stop");this.removeEventListener("mousemove",this.pf);this.removeEventListener("mouseup",this.onDragEnd)}l(a){this.j.l(X({ma:"design",client:"DragSync",method:a}))}};var Ml=G(()=>({acceptedFileTypes:Yi(1)}));var Nl=G(()=>({url:S(1)}));var Ol=G(()=>({exportBlobs:B(1,Nl),status:S(2),title:T(3)}));var Pl=class{constructor(a){this.B=a}async requestExport(a){a=Ml.F(a);a=await this.B.request("EXPORT_V1_REQUEST_EXPORT",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"EXPORT_V1_REQUEST_EXPORT: Response cannot be empty"});return Ol.D(a.value)}};var Ql=new Set("PNG JPG PDF_STANDARD VIDEO GIF PPTX SVG".split(" ")),Rl=a=>{cb("object"===typeof a&&null!=a,"options passed to requestExport is not an object");cb(null!=a.acceptedFileTypes,"`acceptedFileTypes` must be passed");cb(Array.isArray(a.acceptedFileTypes),"`acceptedFileTypes` should be an array");cb(0<a.acceptedFileTypes.length,"`acceptedFileTypes` requires at least one file type specified in the options");a=a.acceptedFileTypes.filter(b=>!("string"===typeof b&&Ql.has(b)));cb(0===a.length,
`Invalid file type(s) passed to requestExport: ${a.join(", ")}`)};var ie=class{constructor(a,b){this.j=b;this.A=new Pl(a)}async queueDocument(a){this.l("queueDocument");return this.requestExport(a)}async requestExport(a){this.l("requestExport");Rl(a);return await this.A.requestExport(new Ml(a))}l(a){this.j.l(X({ma:"design",client:"Export",method:a}))}};var Sl=I(()=>[1,2]);var Tl=G(()=>({feature:C(1,Sl)}));var Ul=G(()=>Object.assign({},{},{status:u(1,"COMPLETED")}));var Vl=G(()=>Object.assign({},{},{status:u(2,"ABANDONED")}));var Wl=G(()=>Object.assign({},{},{status:u(3,"UNAVAILABLE")}));var Xl=H(()=>({status:[1,Ul,2,Vl,3,Wl]}),()=>({}));var Yl=G(()=>({requestId:S(1)}));var Zl=G(()=>Object.assign({},{},{status:u(1,"COMPLETED")}));var $l=G(()=>Object.assign({},{},{status:u(2,"ABANDONED")}));var am=H(()=>({status:[1,Zl,2,$l]}),()=>({}));var bm=G(()=>({feature:C(1,Sl)}));var cm=G(()=>({limit:Q(1),usage:P(2),resetsAt:Wi(3),canUpgrade:V(4)}));var dm=G(()=>Object.assign({},{},{type:u(1,"IMAGEN"),prompt:S(1)}));var em=G(()=>Object.assign({},{},{type:u(2,"DALLE"),prompt:S(1)}));var fm=H(()=>({type:[1,dm,2,em]}),()=>({}));var gm=G(()=>({url:S(1),thumbnailUrl:T(2)}));var hm=G(()=>Object.assign({},{},{type:u(1,"SUCCESS"),images:B(1,gm),requestId:S(2)}));var im=I(()=>[1,2,3]);var jm=G(()=>Object.assign({},{},{type:u(2,"FAILURE"),reason:C(1,im)}));var km=H(()=>({type:[1,hm,2,jm]}),()=>({}));var lm=class{constructor(a){this.B=a}async requestUpgrade(a){a=Tl.F(a);a=await this.B.request("GENERATION_V1_REQUEST_UPGRADE",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"GENERATION_V1_GET_QUOTA: Response cannot be empty"});return Xl.D(a.value)}async requestReportContent(a){a=Yl.F(a);a=await this.B.request("GENERATION_V1_REQUEST_REPORT",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"GENERATION_V1_GET_QUOTA: Response cannot be empty"});
return am.D(a.value)}async getQuota(a){a=bm.F(a);a=await this.B.request("GENERATION_V1_GET_QUOTA",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"GENERATION_V1_GET_QUOTA: Response cannot be empty"});return cm.D(a.value)}async generateImages(a){a=fm.F(a);a=await this.B.request("GENERATION_V1_GENERATE",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"GENERATION_V1_GENERATE: Response cannot be empty"});return km.D(a.value)}};var ki=class{constructor(a,b){this.j=b;this.requestReportContent=async c=>{this.l("requestReportContent");return{status:(await this.A.requestReportContent(c)).status}};this.requestUpgrade=async c=>{this.l("requestUpgrade");switch(c.feature){case "DALLE":c=2;break;case "IMAGEN":c=1;break;default:throw new J({code:"INTERNAL_ERROR",message:`Unknown feature ${c.feature}`});}return{status:(await this.A.requestUpgrade({feature:c})).status}};this.generateImages=async c=>{this.l("generateImages");if(!["DALLE",
"IMAGEN"].includes(c.type))throw new J({code:"BAD_REQUEST",message:`Request type must be one of "DALLE" or "IMAGEN". Received ${c.type}`});if(!c.prompt||0===c.prompt.length)throw new J({code:"BAD_REQUEST",message:"Request requires a non-empty prompt"});c=await this.A.generateImages({type:c.type,prompt:c.prompt});if("FAILURE"===c.type){switch(c.reason){case 1:c="QUOTA_EXCEEDED";break;case 2:c="INTERNAL_ERROR";break;case 3:c="UNSAFE_CONTENT";break;default:throw new m(c.reason);}return{status:"FAILURE",
reason:c}}return{status:"SUCCESS",images:c.images,requestId:c.requestId}};this.getQuota=async c=>{this.l("getQuota");switch(c.feature){case "DALLE":c=2;break;case "IMAGEN":c=1;break;default:throw new J({code:"INTERNAL_ERROR",message:`Unknown feature ${c.feature}`});}c=await this.A.getQuota({feature:c});return{limit:c.limit,usage:c.usage,resetsAt:null!=c.resetsAt?new Date(c.resetsAt):void 0,canUpgrade:c.canUpgrade}};this.A=new lm(a)}l(a){this.j.l(X({ma:"generation",client:"Generation",method:a}))}};var ke=G(()=>({data:Zi(1),version:P(2)}));var mm=G(()=>({rb:Zi(1)}));var nm=class{constructor(a){this.B=a}async setAppElementData(a){a=await this.B.request("IE_V1_SET_APP_ELEMENT_DATA",mm.F(a));if(!a.ok){if(a.error instanceof J)throw new J({code:a.error.code,message:`${"Encountered an error while setting app element data"}: ${a.error.rawMessage}`});throw new J({code:"INTERNAL_ERROR",message:`${"Encountered an error while setting app element data"}: ${a.error}`});}}};var ji=class{constructor(a,b){this.wb=a;this.K=b;this.onAppElementChange=c=>{Cc(this.K,"onAppElementChange");this.md=c;me(this.A)};this.pe();this.A=new nm(this.wb)}async setAppElementData(a){Cc(this.K,"setAppElementData");a=ne(a);if(5120<(new TextEncoder).encode(JSON.stringify(Object.fromEntries(a))).length)throw Error("Your app config data exceeds the maximum limit of 5KB.");await this.A.setAppElementData(new mm({rb:a}))}pe(){le(this.wb,{ke:async a=>{var b;if(null===(b=this.md)||void 0===b)void 0;
else{var c=b.call;if(a){var d=a.data;const e={};for(const [f,g]of d)e[f]=JSON.parse(g);a={data:e,version:a.version}}else a=void 0;c.call(b,this,a)}}})}};var om=I(()=>[1,2]);var oe=G(()=>({kd:C(1,om),durationMs:P(2),Mh:P(3)}));var ve=G(()=>({theme:T(1),direction:T(2),disableUiRefresh:W(3),refreshDisabled:W(4)}));var pm=G(()=>({version:S(1)}));var re=G(()=>({Hh:S(1),methodName:S(2),propertyName:T(3)}));var te=G(()=>({Pb:S(1),Qb:S(2),Wb:S(3)}));var qm=G(()=>({qe:V(1)}));var rm=G(()=>({canAcceptPayments:V(1)}));var sm=G(()=>({yh:x(1,rm)}));var tm=G(()=>({platform:x(1,sm)}));var Me=class{constructor(a){this.B=a}async getUiContext(){const a=await this.B.request("UI_CONTEXT_V1_GET_UI_CONTEXT");if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"UI_CONTEXT_V1_GET_UI_CONTEXT: response cannot be empty"});return ve.D(a.value)}async registerAppUiKitVersion(a){a=pm.F(a);a=await this.B.request("UI_CONTEXT_V1_REGISTER_APP_UI_KIT_VERSION",a);if(!a.ok)throw a.error;}async qe(){const a=await this.B.request("LOCAL_STORAGE_V1_SHOULD_CLEAR");if(!a.ok)throw a.error;
if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"LOCAL_STORAGE_V1_SHOULD_CLEAR: response cannot be empty"});return qm.D(a.value)}async getInfo(){const a=await this.B.request("GET_INFO_V1");if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"GET_INFO_V1: response cannot be empty"});return tm.D(a.value)}};var um=I(()=>[1,2]);var Ae=G(()=>({surface:C(1,um),processId:S(2)}));var vm=I(()=>[1,2]);var wm=G(()=>({reason:C(1,vm)}));var xm=G(()=>({params:x(1,wm),Qf:S(2)}));var ym=()=>({sourceId:S(1)});var zm=G(()=>Object.assign({},ym(),{type:u(2,"OPENING")}));var Am=G(()=>Object.assign({},ym(),{type:u(3,"OPEN")}));var Bm=G(()=>Object.assign({},ym(),{type:u(4,"CLOSING"),params:x(2,wm)}));var Cm=G(()=>Object.assign({},ym(),{type:u(5,"CLOSED")}));var xe=H(()=>({type:[2,zm,3,Am,4,Bm,5,Cm]}),ym);var Dm=()=>({sourceId:S(1)});var Em=G(()=>Object.assign({},Dm(),{type:u(2,"CLOSING"),params:x(2,wm)}));var ye=H(()=>({type:[2,Em]}),Dm);var Ge=class{constructor(a){this.B=a}async requestClose(a){a=xm.F(a);a=await this.B.request("APP_PROCESS_V1_REQUEST_CLOSE",a);if(!a.ok)throw a.error;}async getInfo(){var a=await this.B.request("APP_PROCESS_V1_GET_INFO");if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"APP_PROCESS_V1_GET_INFO: Response cannot be empty"});var b=a.value;if(!ze(b))throw new J({code:"INTERNAL_ERROR",message:"Could not convert object into GetInfoResponse"});a=b[1];b=b[2];if(void 0===
a)throw new J({code:"INTERNAL_ERROR",message:"Missing AppProcessInfo in GetInfoResponse"});return[Ae.D(a),b]}async broadcastMessage(a){a=Rb(...a);a=await this.B.request("APP_PROCESS_V1_BROADCAST_MESSAGE",a);if(!a.ok)throw a.error;}};var He=class{constructor(a,b,c,d){this.Ia=b;this.K=c;this.j=d;this.Mc=new Map;this.Rd=new Map;this.Nd=new Set;this.current={getInfo:()=>{this.l("current.getInfo");Cc(this.K,"current.getInfo");return this.Ia},requestClose:async e=>{this.l("current.requestClose");Cc(this.K,"current.requestClose");if("selected_element_overlay"!==this.Ia.surface)throw new J({code:"BAD_REQUEST",message:`requestClose is not implemented for surface ${this.Ia.surface}`});await this.A.requestClose({params:{reason:Ee(e.reason)},
Qf:this.Ia.processId})},registerOnBeforeClose:e=>{this.l("current.registerOnBeforeClose");Cc(this.K,"current.registerOnBeforeClose");if("selected_element_overlay"!==this.Ia.surface)throw new J({code:"BAD_REQUEST",message:`registerOnBeforeClose is not implemented for surface ${this.Ia.surface}`});if(this.Lc)throw new J({code:"BAD_REQUEST",message:"onBeforeClose callback is already registered"});this.Lc=e;return()=>new Promise(f=>{this.Lc=void 0;f()})}};this.requestClose=async(e,f)=>{this.l("requestClose");
Cc(this.K,"requestClose");await this.A.requestClose({params:{reason:Ee(f.reason)},Qf:e})};this.registerOnStateChange=(e,f)=>{this.l("registerOnStateChange");Cc(this.K,"registerOnStateChange");var g=this.Rd.get(e);g&&0<g.length&&f({state:Ce(g[g.length-1])});(g=this.Mc.get(e))?g.add(f):this.Mc.set(e,new Set([f]));return()=>new Promise(h=>{this.Mc.get(e).delete(f);h()})};this.registerOnMessage=e=>{this.l("registerOnMessage");Cc(this.K,"registerOnMessage");this.Nd.add(e);return()=>new Promise(f=>{this.Nd.delete(e);
f()})};this.broadcastMessage=e=>{this.l("broadcastMessage");Cc(this.K,"broadcastMessage");this.A.broadcastMessage([void 0,e])};this.A=new Ge(a);Be(a,{mh:async e=>Fe(this,e),Rh:async e=>{if("CLOSING"===e.type&&e.sourceId===this.Ia.processId&&this.Lc){var f=this.Lc;a:switch(e=e.params.reason,e){case 1:e="completed";break a;case 2:e="aborted";break a;default:throw new m(e);}await f.call(this,{reason:e})}},Qh:async e=>{const [f,[g,h]]=e;this.Nd.forEach(k=>{k(De(f,g),h)})}})}l(a){this.j.l(X({ma:"platform",
client:"AppProcess",method:a}))}},Le=class{constructor(){this.current={getInfo:()=>{throw Error("Unimplemented");},requestClose:async()=>{throw Error("Unimplemented");},registerOnBeforeClose:()=>{throw Error("Unimplemented");}};this.requestClose=async()=>{throw Error("Unimplemented");};this.registerOnStateChange=()=>{throw Error("Unimplemented");};this.registerOnMessage=()=>{throw Error("Unimplemented");};this.broadcastMessage=()=>{throw Error("Unimplemented");}}};var Je=class{constructor(a){this.Ia=a;this.getInfo=()=>this.Ia}};var Fm=G(()=>({url:S(1)}));var Gm=G(()=>Object.assign({},{},{status:u(1,"COMPLETED")}));var Hm=G(()=>Object.assign({},{},{status:u(2,"ABORTED")}));var Im=H(()=>({status:[1,Gm,2,Hm]}),()=>({}));var Jm=class{constructor(a){this.B=a}async requestOpenExternalUrl(a){a=Fm.F(a);a=await this.B.request("PLATFORM_V1_REQUEST_OPEN_EXTERNAL_URL",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"PLATFORM_V1_REQUEST_OPEN_EXTERNAL_URL: Response cannot be empty"});return Im.D(a.value)}};var Ne=class{constructor(a,b,c){this.info=b;this.j=c;this.requestOpenExternalUrl=async d=>{this.l("requestOpenExternalUrl");let e;try{e=new URL(d.url)}catch(f){throw new J({code:"BAD_REQUEST",message:"Invalid URL."});}if("https:"!==e.protocol.toLowerCase())throw new J({code:"BAD_REQUEST",message:`Received a request to open an external URL with '${e.protocol}' protocol. Only URLs with '${"https:"}' protocol are supported.`});return{status:(await this.A.requestOpenExternalUrl(d)).status}};this.getPlatformInfo=
()=>{this.l("getPlatformInfo");return this.info};this.A=new Jm(a)}l(a){this.j.l(X({ma:"platform",client:"Platform",method:a}))}};var Km=G(()=>({}));var Lm=G(()=>Object.assign({},{},{status:u(1,"COMPLETED")}));var Mm=G(()=>Object.assign({},{},{status:u(2,"ABORTED")}));var Nm=H(()=>({status:[1,Lm,2,Mm]}),()=>({}));var Om=G(()=>({token:S(1)}));var Pm=class{constructor(a){this.B=a}async requestOauth(a){a=a?Km.F(a):void 0;a=await this.B.request("TEMP_GOOGLE_ADS_REQUEST_OAUTH_V1",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"TEMP_GOOGLE_ADS_REQUEST_OAUTH_V1: Response cannot be empty"});return Nm.D(a.value)}async getOauthToken(){const a=await this.B.request("TEMP_GOOGLE_ADS_GET_OAUTH_TOKEN_V1");if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"TEMP_GOOGLE_ADS_REQUEST_OAUTH_V1: Response cannot be empty"});
return Om.D(a.value)}};var Pe=class{constructor(a,b){this.j=b;this.requestOauth=async c=>{this.l("requestOauth");try{return await this.A.requestOauth(c)}catch(d){if(d instanceof J)throw d;throw new J({code:"INTERNAL_ERROR",message:"Something unexpected happened during oauth"});}};this.getOauthToken=async()=>{this.l("getOauthToken");try{const c=await this.A.getOauthToken();return null===c||void 0===c?void 0:c.token}catch(c){if(c instanceof J)throw c;throw new J({code:"INTERNAL_ERROR",message:"Something unexpected happened during while requesting an OAuth token"});
}};this.A=new Pm(a)}l(a){this.j.l(X({ma:"tmp_google_ads_auth",client:"TmpGoogleAdsAuth",method:a}))}};var Qm=G(()=>({context:T(1)}));var Rm=G(()=>Object.assign({},{},{type:u(1,"AUTHENTICATED")}));var Sm=G(()=>Object.assign({},{},{type:u(2,"CANCELED")}));var Tm=G(()=>Object.assign({},{},{type:u(3,"DENIED"),details:Yi(1)}));var Um=G(()=>Object.assign({},{},{type:u(4,"FAILED"),Ra:S(1),Fh:Yi(2)}));var Vm=H(()=>({type:[1,Rm,2,Sm,3,Tm,4,Um]}),()=>({}));var Wm=G(()=>({token:S(1)}));var Xm=class{constructor(a){this.B=a}async authenticate(a){a=Qm.F(a);a=await this.B.request("AUTH_V1_AUTHENTICATE",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"AUTH_V1_AUTHENTICATE: Response cannot be empty"});return Vm.D(a.value)}async getCanvaUserToken(){const a=await this.B.request("AUTH_V1_GET_CANVA_USER_TOKEN");if(!a.ok)throw a.error;if(void 0===a.value)throw new J({code:"INTERNAL_ERROR",message:"AUTH_V1_GET_CANVA_USER_TOKEN: Response cannot be empty"});
return Wm.D(a.value)}};var hi=class{constructor(a,b,c){this.wb=a;this.K=b;this.j=c;this.A=new Xm(a)}async authenticate(a={}){this.l("authenticate");Se(this.K,{Pb:"method",Qb:"authenticate",Wb:"requestAuthentication"});try{const b=await this.A.authenticate(new Qm(a));return Re(b)}catch(b){if(b instanceof J)throw b;throw new J({code:"INTERNAL_ERROR",message:`Something unexpected happened while authenticating: ${b instanceof Error?b.message:b}`});}}async requestAuthentication(a={}){this.l("requestAuthentication");if(null!=
a&&"object"!==typeof a)throw new J({code:"BAD_REQUEST",message:`Invalid authentication request. Expected an object but received '${typeof a}'.`});var b=a.context;if(null!=b){if("string"!==typeof b)throw new J({code:"BAD_REQUEST",message:`Invalid authentication context. Expected a string but received '${typeof b}'.`});if(!(32>=b.length))throw new J({code:"BAD_REQUEST",message:`Authentication context can be at most '${32}' characters. Received context of length '${b.length}'.`});}try{const d=await this.A.authenticate(new Qm(a)),
e=Re(d);a:{const f=e.type;switch(f){case "authenticated":var c={status:"COMPLETED"};break a;case "canceled":c={status:"ABORTED"};break a;case "denied":c={status:"DENIED",details:e.details};break a;case "failed":const g=e.reason.type;switch(g){case "invalid_context":throw new J({code:"BAD_REQUEST",message:"Invalid authentication context provided."});case "invalid_options":throw new J({code:"BAD_REQUEST",message:"Invalid authentication request."});case "invalid_redirect_parameters":throw new J({code:"BAD_EXTERNAL_SERVICE_RESPONSE",
message:"Invalid redirect parameters received from app backend."});case "invalid_redirect_url":throw new J({code:"FAILED_PRECONDITION",message:"Invalid redirect URL received. Please make sure a valid redirect URL has been provided via the developer portal."});case "offline":throw new J({code:"USER_OFFLINE",message:"Unable to authenticate user as they are offline."});case "popup_is_not_available":throw new J({code:"PERMISSION_DENIED",message:"Unable to open popup dialog as it was blocked either by the user or their browser."});
case "signature_verification_failed":throw new J({code:"INTERNAL_ERROR",message:"Signature verification is no longer supported. If issue persists please report to Canva."});case "get_connection_status_failed":throw new J({code:"INTERNAL_ERROR",message:"Something went wrong while authenticating."});case "fetch_redirect_url_failed":throw new J({code:"INTERNAL_ERROR",message:"Something went wrong while authenticating."});case "unknown":throw new J({code:"INTERNAL_ERROR",message:"Something went wrong while authenticating."});
default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected auth failure reason type: '${g}'.`});}default:throw new K({code:"INTERNAL_ERROR",message:`Unexpected auth result: '${f}'.`});}}return c}catch(d){if(d instanceof J)throw d;throw new J({code:"INTERNAL_ERROR",message:`Something unexpected happened while authenticating: ${d instanceof Error?d.message:d}`});}}async getCanvaUserToken(){this.l("getCanvaUserToken");try{return(await this.A.getCanvaUserToken()).token}catch(a){if(a instanceof J)throw a;
throw new J({code:"INTERNAL_ERROR",message:`Something unexpected happened while retrieving the Canva Token: ${a instanceof Error?a.message:a}`});}}l(a){this.j.l(X({ma:"user",client:"Authentication",method:a}))}};var gi=class{constructor(a,b){this.Dc=a;this.j=b;this.hf=(c,d,e)=>{console.warn(`${"Apps SDK"}: ${null!=e?`The property "${e}" in the options for "${d}"`:`The method ${d}`} is currently ${"preview"===c?"in "+c:c} and cannot be used in production code. While you can experiment with it in your apps, please note that apps using ${c} methods cannot be submitted for review until a stable version is released.`);se(this.Dc,new re({Hh:c,methodName:d,propertyName:e})).catch(f=>this.j.C(`Encountered an error while registering unstable api usage: ${f}`))}}};var Ve=class{constructor(a,b){this.port=a;this.j=b;this.send=c=>{try{return this.port.postMessage(c),za()}catch(d){return this.j.C(d),Aa(d)}};this.handle=c=>{if(this.handler)return Aa(new J({code:"INTERNAL_ERROR",message:"a handler for Bus has already been defined"}));this.handler=c;return za()};this.rh=c=>{this.j.C(c)};this.qh=({data:c})=>{if(this.handler)if(c)try{this.handler(c)}catch(d){this.j.C(d)}else this.j.error(new J({code:"INTERNAL_ERROR",message:"missing data in 'MessageEvent'"}));else this.j.error(new J({code:"INTERNAL_ERROR",
message:"no handler configured for bus"}))};this.port.onmessage=this.qh;this.port.onmessageerror=this.rh}};var Ym=new J({code:"INTERNAL_ERROR",message:"Comms promise timed out."}),$e=class{constructor(a){this.dc=a;this.p=new Promise((b,c)=>{this.Kh=b;this.yf=c});this.setTimeout()}reset(a){a&&(this.dc=a);this.setTimeout()}resolve(a){clearTimeout(this.ue);this.Kh(a)}reject(a){clearTimeout(this.ue);this.yf(a)}promise(){return this.p}setTimeout(){clearTimeout(this.ue);this.ue=setTimeout(()=>{this.yf(Ym)},this.dc)}};var We=class{constructor(a,b){this.send=a;this.j=b;this.Jh=Ue;this.Vd=new Map;this.request=async(c,d)=>{const e=new $e(5E3);var f=this.Jh();this.Vd.set(f,e);d={type:"request",requestId:f,path:c,payload:d};f=this.send(d);if(!f.ok)return this.j.C(f.error,{J:"unable to send request",tags:new Map([["type",d.type],["path",c]])}),f;try{const g=await e.promise();return za(g)}catch(g){return Aa(g)}};this.$g=c=>{const d=c.requestId,e=c.type,f=this.Vd.get(d);if(f)switch(e){case "response":f.resolve(c.payload);
this.Vd.delete(d);break;case "ack":f.reset(2E4);break;case "error":f.reject(new J({code:c.code,message:c.message}));break;default:throw new m(c);}else this.j.error("request has already been handled and resolved or was not sent from this client",{tags:new Map([["type",e],["requestId",`${d}`]])})}}};var Zm=()=>"Something went wrong on our end, if this issue persists please contact us.",$m=a=>`No request handler configured for path: "${a}".`,Xe=class{constructor(a,b,c){this.Eb=a;this.dh=b;this.Jg=!1;this.j=c;this.requestHandler=new Map;this.uf=new Map;this.handle=(d,e,f)=>{if(this.requestHandler.has(d))throw new J({code:"INTERNAL_ERROR",message:`Handler for '${d}' is already defined.`});this.requestHandler.set(d,f);"NONE"!==e&&this.uf.set(d,Array.from(e))};this.ah=async d=>{const e=d.requestId,
f=d.path;d=d.payload;if(this.Jg){var g=this.uf.get(f);if(g&&g.filter(n=>!this.dh(n)).length){this.Eb({type:"error",requestId:e,code:"PERMISSION_DENIED",message:"Some required permissions for this request were not granted by the user."});return}}if(g=this.requestHandler.get(f)){this.Eb({type:"ack",requestId:e});var h=setInterval(()=>this.Eb({type:"ack",requestId:e}),9E3);try{var k=await g(d);clearInterval(h);this.Eb({type:"response",requestId:e,payload:k})}catch(n){clearInterval(h),k={code:"INTERNAL_ERROR",
message:Zm()},n instanceof J&&(k.code=n.code,"INTERNAL_ERROR"===n.code?(console.error(n.message),k.message=Zm()):k.message=n.rawMessage),k=this.Eb(Object.assign({},{type:"error",requestId:e},k)),k.ok||this.j.Nb(k.error,{J:"unable to send error response",tags:new Map([["type","request"],["path",f]])})}}else this.j.error("failed to handle incoming request",{J:$m(f),tags:new Map([["type","request"],["path",f]])}),k=this.Eb({type:"error",requestId:e,code:"INTERNAL_ERROR",message:$m(f)}),k.ok||this.j.Nb(k.error,
{J:"unable to send error response",tags:new Map([["type","request"],["path",f]])})}}};var Ye=(a,b)=>c=>{switch(c.type){case "ack":case "error":case "response":a.$g(c);break;case "request":b.ah(c);break;default:throw new m(c);}};var af=new J({code:"INTERNAL_ERROR",message:"Iframe connection timed out after 4 retries"});Bi(null);var df=new WeakMap,ef=class extends Error{constructor(a){super(a);this.name="MakeObservableError";Object.setPrototypeOf(this,ef.prototype)}};var nf=a=>{var b;return null!==(b=null===a||void 0===a?void 0:a.replace(/^\s*:global\(\.(.+?)\)\s*$/,"$1"))&&void 0!==b?b:""},mf,pf,an=class{constructor(){hf(this,{parent:Di.ref,Ae:Di.ref,re:Di.deep,If:jf,Yh:jf,appearance:Ei,Jf:jf,yd:Ei});this.re={}}If(a){this.parent=a}Yh(a){this.Ae=a}get appearance(){var a,b;return null!==(a=this.Ae)&&void 0!==a?a:null===(b=this.parent)||void 0===b?void 0:b.appearance}Jf(a){this.re=a}get yd(){var a,b;const c=this.appearance;if(null!=c)return null!==(a=this.re[c])&&
void 0!==a?a:null===(b=this.parent)||void 0===b?void 0:b.yd}},bn=class{constructor(a){hf(this,{classNames:Ei,className:Ei,mode:Ei});this.store=a}get classNames(){var a=this.store.yd;if(null==a)a=[];else{const b=of();a=[qf(),ha(b.get(a))]}return a}get className(){const a=this.classNames;if(0!==a.length)return Ii(a)}get mode(){switch(this.store.appearance){case "dark":case "light":return"modern";case "classicDark":case "classicLight":return"classic";case void 0:break;default:throw new m(this.store.appearance);
}}},cn=new an,dn=new bn(cn),en=Bi({store:cn,data:dn});Fi(function(a){var b=Object.assign({},a);a=a.children;b=(delete b.children,b);b=tf(b);const [c]=zi(()=>{const e=new an;return{store:e,data:new bn(e)}}),{store:d}=Ai(en);c.store.If(d);c.store.Jf(b);return xi(en.Provider,{value:c,children:a(c.data)})});Fi(function(a){({children:a}=a);const b=Ai(en).data;return a(b)});var fn=I(()=>[1,2],1);var gn=I(()=>[1,"ADAPTIVE",2,"LIGHT",3,"DARK"]);var hn=I(()=>[0,1,2]);var jn=G(()=>({Ri:V(1),direction:C(2,fn),Mi:V(3),ej:V(4),theme:Sa(7,gn),Vi:W(8),Ui:V(13),xi:Sa(11,hn),Li:V(9),Sg:V(10)}));var xf=!1;null!=("undefined"===typeof window?void 0:window)&&(xf=la("ui",jn.D,{Fe:!0}).Sg);var kn,ln="undefined"===typeof window?void 0:window,wf=(null===(kn=null===ln||void 0===ln?void 0:ln.cmsg)||void 0===kn?void 0:kn.strings)||{},pi=new Map,mn,vf=()=>{var a;return mn=mn||(null===(a=null===ln||void 0===ln?void 0:ln.cmsg)||void 0===a?void 0:a.locale)||"en"},ri={date:{weekday:{weekday:"long"},mediumNoYear:{month:"short",day:"numeric"},mediumNoYearUTC:{month:"short",day:"numeric",timeZone:"UTC"},monthUTC:{month:"long",timeZone:"UTC"},shortMonthUTC:{month:"short",timeZone:"UTC"},monthYear:{month:"long",
year:"numeric"},monthYearUTC:{month:"long",year:"numeric",timeZone:"UTC"},longNoYear:{month:"long",day:"numeric"},longUTC:{month:"long",day:"numeric",year:"numeric",timeZone:"UTC"}}};var nn=I(()=>[1,"DEVELOPMENT",2,"APPROVED",3,"SUBMITTED",4,"REJECTED",5,"RELEASED",6,"SUPERSEDED",7,"DISABLED"],0,{Rb:ab});var on=G(()=>({fg:S(1),appId:S(5),appName:S(6),Ha:C(10,nn),Ya:V(8),locale:T(2),country:T(3),Se:T(4),Sb:V(11),Zg:Yi(12),Dg:V(13)}));var pn,qn;pn=null!==(qn=":global(.cc24)".replace(/^\s*:global\(\.(.+?)\)\s*$/,"$1"))&&void 0!==qn?qn:"";var li=class{constructor(a,b){this.B=a;this.j=b;this.Eg=()=>{window.document.documentElement.classList.add(pn)};this.Ka=new Me(a)}async getUiContext(){this.l("getUiContext");const a=await this.Ka.getUiContext();a.disableUiRefresh||this.Eg();return a}onUiContextChange(a){we(this.B,{Vh:a});qe(this.Ka)}registerAppUiKitVersion(a){return this.Ka.registerAppUiKitVersion(a)}l(a){this.j.l(X({ma:"ui_kit",client:"UiKit",method:a}))}};var Kf=()=>{Bf(Clipboard.prototype,"write",async function(){return Promise.reject(new J({code:"NOT_ALLOWED",message:yf("PYu9hQ")}))})};var Jf=({Sb:a,window:b})=>{a||(a=Object.getOwnPropertyDescriptor(b.Document.prototype,"cookie"))&&a.configurable&&(Object.defineProperty(b.Document.prototype,"cookie",Object.assign({},a,{set:()=>{console.warn("Canva apps setting cookies is not yet supported.")}})),Cf(b,"cookieStore"),Cf(b,"CookieStore"))};var Hf=class{constructor(a,b,c){this.kd=a;this.Oc=b;this.$h=Date.now();switch(a){case 1:a="fetch";break;case 2:a="xml_http";break;default:throw new m(a);}5!==b.Ha||b.Ya||(this.span=b.va.Vc("fetch",new Map([["net.peer.name",c.hostname],["apps_sdk_app.id",b.appId],["apps_sdk_app.name",b.appName],["apps_sdk_app.approval_status",nn.F(b.Ha)],["browser_api",a]])))}complete(a){this.span&&this.span.end(199<a&&300>a?"ok":"error",new Map([["response_code",a]]));const b=Date.now()-this.$h;pe(this.Oc.Ka,new oe({kd:this.kd,
durationMs:b,Mh:a})).catch(c=>this.Oc.j.C(c,{J:"unable to track native fetch call"}))}};var Lf=async({Ka:a,j:b})=>{({qe:a}=await a.qe());if(a){try{ha(window.localStorage),window.localStorage.clear()}catch(c){b.jc(c)}try{ha(window.sessionStorage),window.sessionStorage.clear()}catch(c){b.jc(c)}try{ha(window.indexedDB);ha(window.indexedDB.databases);window.location.origin.includes("localhost")&&console.warn("\n      WARNING: If you're Proxying the App Sandbox Editor webpage locally on the same origin \n\n               as the Editor (ie localhost:9090 for both the Editor and App Sandbox) you will increase \n\n               the likelihood of IndexDB operations timing out as both the editor \n\n               and App Sandbox share the same web storage layers. \n\n\n               To avoid this, run the Editor and the App Sandbox development environments on \n\n               different ports. Such as running the Editor on port 9090, and the App Sandbox on 9091.\n      ");
const c=await window.indexedDB.databases();for(const d of c)await If(d)}catch(c){b.jc(c)}}};var rn=!1,$h=class{constructor(a=console,b="default"){this.name=b;this.tags={};if(!rn&&"object"===typeof window){const c=window.onerror;window.onerror=(...e)=>{"function"===typeof c&&c(...e);console.error("unhandled error:",...e)};const d=window.onunhandledrejection;window.onunhandledrejection=e=>{"function"===typeof d&&d(e);console.error("[ConsoleErrorClient]: Unhandled promise rejection",e)};rn=!0}l(-1===b.indexOf("."),"name must not contain a dot");a instanceof $h?(this.name=`${a.name}.${b}`,this.console=
a.console):this.console=a}setTag(a,b){this.tags[a]=b}Gf(){}Ce(){}Mb(a){return new $h(this,a)}l(a){this.console.log("breadcrumb added",a)}setContext(a){this.context=a}Nb(a,b){this.console.error(...Qf(this,"critical",a,b))}error(a,b){this.console.error(...Qf(this,"error",a instanceof Error?a:Error(a),b))}C(a,b){this.console.error(...Qf(this,"error",a,b))}Xf(a,b){this.console.warn(...Qf(this,"warning",a,b))}jc(a,b){this.console.warn(...Qf(this,"warning",a,b))}info(a,b){this.console.info(...Qf(this,"info",
a,b))}debug(a,b){this.console.debug(...Qf(this,"debug",a,b))}toJSON(){return{name:this.name,context:this.context,tags:this.tags}}};var Og=class extends Error{constructor(a,b){super(a);this.sampleRate=b;this.sampleRate=Math.min(Math.max(0,b),1)}},wg=class{constructor(a){this.Me=a;this.name=wg.id;this.Me=Math.min(Math.max(0,a),1)}setupOnce(a,b){a((c,d)=>{const e=b().getIntegration(wg);if(!e)return c;if(!(Math.random()<Vf(e,null===d||void 0===d?void 0:d.originalException)))return null;d={sampleRate:Vf(this,null===d||void 0===d?void 0:d.originalException)};c.extra=null!=c.extra?Object.assign({},c.extra,d):d;c.tags=null!=c.tags?Object.assign({},
c.tags,d):d;return c})}};wg.id="Sampling";var sn=class{constructor(){this.Df={}}};var Ag=class{constructor(a=[]){this.cg=a;this.name=Ag.id}setupOnce(a,b){a(c=>{const d=b().getIntegration(Ag);return d?eg(d,c)?null:c:c})}};Ag.id="FilterErrors";var xg=class{constructor(){this.name=xg.id}setupOnce(a,b){a(c=>{b().getIntegration(xg);return c})}};xg.id="HostRpcServiceErrors";var qg=class extends Error{constructor(a){var b=a.message,c=a.statusCode,d=a.requestUrl;let e=tn[c];e||(e=400<=c&&500>c?"unknown client error":500<=c&&600>c?"unknown server error":"unknown error");super(b&&b!==e?b:d?`HTTP ${e} on: ${d.split("?")[0]}`:`HTTP ${e}`);this.statusCode=a.statusCode;this.requestId=a.requestId;this.requestUrl=a.requestUrl;this.endUserMessage=a.endUserMessage;this.body=a.body;Object.setPrototypeOf(this,qg.prototype)}},tn={[0]:"client timeout",[400]:"bad request",[401]:"unauthorized",
[403]:"forbidden",[404]:"not found",[409]:"version conflict",[418]:"CSRF token expired",[429]:"too many requests",[500]:"internal server error",[501]:"not implemented",[503]:"service unavailable",[504]:"gateway timeout"},un=class extends qg{},vn=class extends qg{},wn=class extends qg{constructor(a={}){super(Object.assign({},a,{statusCode:0}));this.name="HttpTimeoutError";Object.setPrototypeOf(this,wn.prototype)}},Qg=class extends un{constructor(a={}){super(Object.assign({},a,{statusCode:400}));this.name=
"HttpBadRequestError";Object.setPrototypeOf(this,Qg.prototype)}},Rg=class extends un{constructor(a={}){super(Object.assign({},a,{statusCode:401}));this.name="HttpUnauthorizedError";Object.setPrototypeOf(this,Rg.prototype)}},Sg=class extends un{constructor(a={}){super(Object.assign({},a,{statusCode:403}));this.name="HttpForbiddenError";Object.setPrototypeOf(this,Sg.prototype)}},Tg=class extends un{constructor(a={}){super(Object.assign({},a,{statusCode:404}));this.name="HttpNotFoundError";Object.setPrototypeOf(this,
Tg.prototype)}},Ug=class extends un{constructor(a={}){super(Object.assign({},a,{statusCode:409}));this.name="HttpConflictError";Object.setPrototypeOf(this,Ug.prototype)}},Vg=class extends un{constructor(a={}){super(Object.assign({},a,{statusCode:418}));this.name="CsrfTokenExpiredError";Object.setPrototypeOf(this,Vg.prototype)}},Wg=class extends un{constructor(a={}){super(Object.assign({},a,{statusCode:429}));this.name="HttpTooManyRequestsError";Object.setPrototypeOf(this,Wg.prototype)}},$g=class extends un{constructor(a){l(400<=
a.statusCode&&500>a.statusCode);super(a);this.name="UnknownClientError";Object.setPrototypeOf(this,$g.prototype)}},Xg=class extends vn{constructor(a={}){super(Object.assign({},a,{statusCode:500}));this.name="HttpInternalServerError";Object.setPrototypeOf(this,Xg.prototype)}},Yg=class extends vn{constructor(a={}){super(Object.assign({},a,{statusCode:503}));this.name="HttpServiceUnavailableError";Object.setPrototypeOf(this,Yg.prototype)}},Zg=class extends vn{constructor(a={}){super(Object.assign({},
a,{statusCode:504}));this.name="HttpGatewayTimeout";Object.setPrototypeOf(this,Zg.prototype)}},ah=class extends vn{constructor(a){l(500<=a.statusCode&&600>a.statusCode);super(a);this.name="UnknownServerError";Object.setPrototypeOf(this,ah.prototype)}},bh=class extends qg{constructor(a){super(a);this.name="UnknownHttpError";Object.setPrototypeOf(this,bh.prototype)}};var yg=class{constructor(){this.name=yg.id}setupOnce(a,b){a((c,d)=>{b().getIntegration(yg)&&d&&d.originalException instanceof qg&&(d=d.originalException,c.tags||(c.tags={}),Object.assign(c.tags,Object.assign({},{http_service_error:!0,statusCode:d.statusCode},d.requestId?{requestId:d.requestId}:{})),d.requestUrl&&(c.tags.phase=d.requestUrl.includes("/csrf3/")?"csrf":"request"));return c})}};yg.id="HttpServiceErrors";var hg={now:()=>Date.now()};var xn=class{constructor(){this.ud=10;this.Ob=0;this.Wg=a=>(a+1)%this.ud;this.Yg=a=>(a+this.ud-1)%this.ud;this.list=Array(10)}add(a){this.Ob=this.Wg(this.Ob);this.list[this.Ob]=a}find(a){let b=this.Ob;do{if(this.list[b]&&a(this.list[b]))return this.list[b];b=this.Yg(b)}while(b!==this.Ob)}},vg=class{constructor(a){this.gi=a;this.name=vg.id;this.history=new xn}setupOnce(a,b){a(c=>{const d=b().getIntegration(vg);d&&(ig(d,c)?c=null:d.history.add({event:c,timestamp:hg.now()}));return c})}};vg.id="NoSuccessiveEvent";var sg=class{constructor(){this.name=sg.id;this.zf=0}setupOnce(a,b){a(c=>{var d,e,f;if(!b().getIntegration(sg))return c;c.tags=null!==(d=c.tags)&&void 0!==d?d:{};c.tags["prior.unhandled.error.count"]=this.zf;(null===(f=null===(e=c.exception)||void 0===e?void 0:e.values)||void 0===f?0:f.some(g=>{var h;return!1===(null===(h=g.mechanism)||void 0===h?void 0:h.handled)}))&&this.zf++;return c})}};var zg=class{constructor(a,b){this.dg=a;this.location=b;this.name=zg.id}setupOnce(a,b){a(c=>{const d=b().getIntegration(zg);return d?ng(d,c):c})}ge(a){var b,c,d;const e=(null===a||void 0===a?0:a.url)?mg(this,null===a||void 0===a?void 0:a.url):void 0,f={};if(null===(b=null===a||void 0===a?void 0:a.headers)||void 0===b?0:b["User-Agent"])f["User-Agent"]=null===a||void 0===a?void 0:a.headers["User-Agent"];if(null===(c=null===a||void 0===a?void 0:a.headers)||void 0===c?0:c.Referer)f.Referer=mg(this,null===
(d=null===a||void 0===a?void 0:a.headers)||void 0===d?void 0:d.Referer);return{url:e,headers:f}}};zg.id="UrlScrubber";var og=[function(a){if(a=/canvaeditor\/(\d+\.\d+\.\d+)/.exec(a))return{name:"mobile_app_version",value:a[1]}},function(a){if(a=/com.canva.editor\s\(version\/(\d+\.\d+\.\d+)/.exec(a))return{name:"mobile_app_version",value:a[1]}}];var Bg=["TimeoutError","HttpTimeoutError",/^ResizeObserver loop/,/^WHEN_CANCELLED$/,"ChunkLoadError",/^NetworkError: Failed to execute 'importScripts' on 'WorkerGlobalScope':/],ai=class{constructor(a,b=[],c=[],d=self.Sentry,e=new sn,f=[],g=!1,h){var k=self;"object"===typeof k.ze&&"function"===typeof k.ze.Xg?(k=k.ze.Xg(),k="string"===typeof k?k:void 0):k=void 0;this.P=a;this.componentStack=b;this.Fd=c;this.X=d;this.Le=e;this.pd=f;this.Db=h;this.allowUrls="/dist/renderer/ canva.com canva.cn canva-dev.com canva-staging.com canva-staging.cn www.features.canva-internal.com www.features.canva-internal-staging.com canva-apps.com canva-apps.cn canva-apps-dev.com canva-apps-staging.com canva-apps-staging.cn".split(" ");
this.X?g||(Dg(this,a,{sf:k}),void 0!==this.Db&&Hg(this,a)):"undefined"!==typeof self.suppressSentryInitializationError&&!0===self.suppressSentryInitializationError||console.error("Sentry can not be found on the global scope.")}ge(a){var b,c,d,e;if(!a.url)return{headers:{"User-Agent":null!==(c=null===(b=null===a||void 0===a?void 0:a.headers)||void 0===b?void 0:b["User-Agent"])&&void 0!==c?c:""}};b=/^(\/design\/[a-zA-Z0-9_-]+\/)([a-zA-Z0-9_-]{22})(.*)/;c=new URL(a.url);c.search="";b.test(c.pathname)&&
(c.pathname=c.pathname.replace(b,"$1<REDACTED>$3"));return{url:c.toString(),headers:{"User-Agent":null!==(e=null===(d=null===a||void 0===a?void 0:a.headers)||void 0===d?void 0:d["User-Agent"])&&void 0!==e?e:""}}}Ce(a){this.pd.push(a)}Mb(a){return new ai(this.P,this.componentStack.concat(a),this.Fd,this.X,this.Le,this.pd,!0,this.Db)}setContext({user:a,locale:b,mj:c}){var d,e;null===(e=null===(d=this.X)||void 0===d?void 0:d.getCurrentHub())||void 0===e?void 0:e.configureScope(f=>{a&&(f.setUser(a),f.setExtra("isAnonymousUser",
!1));b&&f.setTag("locale",b);null===c||void 0===c?void 0:c.forEach((g,h)=>f.setExtra(h,g))})}setTags(a){for(const b of a)this.setTag(b.name,b.value)}setTag(a,b){if(null!=this.X){{var c=32>=a.length;const d=200>=b.length;c&&d?c=za(!0):(c=(c?"":"Key name length cannot exceed 32 characters.\n")+(d?"":"Key value length cannot exceed 200 characters.\n"),c=Aa(Error(c+`Tag: ${a}:${b}`)))}c.ok?this.X.setTag(a,b):Lg(this,c.error)}}setExtras(a){for(const b of a)this.setExtra(b.name,b.value)}setExtra(a,b){null!=
this.X&&this.X.setExtra(a,Tf(b))}Gf(a){this.Fd=a}l(a){var b;null!=this.X&&(null===(b=this.X)||void 0===b?void 0:b.addBreadcrumb(Object.assign({},a,{level:a.level})))}Nb(a,b){Ng(this,"fatal",a,b)}error(a,b){Ng(this,"error",a instanceof Error?a:Error(a),b)}C(a,b){Ng(this,"error",a,b)}Xf(a,b){Ng(this,"warning",a instanceof Error?a:Error(a),b)}jc(a,b){Ng(this,"warning",a,b)}info(a,b){Ng(this,"info",a instanceof Error?a:Error(a),b)}debug(a,b){Ng(this,"debug",a instanceof Error?a:Error(a),b)}};var yn=class{constructor(a){hf(this,{sb:Di.ref,tb:Di.ref});a&&(this.rc=a.rc,this.sb=a.sb,this.tb=a.tb,this.bd=a.bd,this.uc=a.uc,this.Gc=a.Gc,this.app=a.app,this.vc=a.vc,this.wc=a.wc)}};var zn=class extends Error{constructor(a){super(`${a}: Timeout`);this.name="TimeoutError";Object.setPrototypeOf(this,zn.prototype)}};var An=class{constructor(a){this.xhr=a}get status(){return this.xhr.status}getResponseHeader(a){return this.xhr.getResponseHeader(a)}},Bn=class extends An{get body(){return this.xhr.responseText}},Cn=class extends An{get body(){return this.xhr.response}},di=class{constructor(){this.ai=!0}Tc(a){return new Promise((b,c)=>{const d=new XMLHttpRequest;d.responseType=a.responseType;d.timeout=a.timeout||0;const e=Error("xhr internal error"),f=this.ai&&0<d.timeout?setTimeout(()=>{d.abort();const g=new zn("xhrEngine");
g.stack=e.stack;c(g)},d.timeout+1E3):void 0;d.onload=()=>{f&&clearTimeout(f);if("blob"===a.responseType)return b(new Cn(d));if("text"===a.responseType)return b(new Bn(d));throw new m(a.responseType);};d.onerror=()=>{f&&clearTimeout(f);c(e)};d.ontimeout=()=>{f&&clearTimeout(f);const g=new zn("xhrEngine");g.stack=e.stack;c(g)};a.Sd&&d.upload.addEventListener("progress",a.Sd);d.open(a.method,a.url,!0);if(a.headers)for(const g in a.headers){const h=a.headers[g];null!=h&&d.setRequestHeader(g,h)}d.withCredentials=
!!a.withCredentials;d.send(a.body)})}};var Dn=class{constructor(a,b,c=new di,d=hg,e){hf(this,{xf:jf});this.Mg=c;this.yc=d;this.va=e;this.vd=null!==b&&void 0!==b?b:new yn(a);this.ld=a&&a.ld;this.Fb=a&&a.Fb||"";this.Qa=a?Pg(a.Qa,f=>Promise.resolve(f)):new Map}async Tc(a,b,c){var d;let e;if(c.Ba){const h=c.Ba.tracing,k=h&&(c.Ba.Zd||h.Uc);if(k){const n=b.startsWith(`${this.Fb}/${fh}`)?"csrf":"request";e=null===(d=this.va)||void 0===d?void 0:d.startSpan(k,h.O,new Map([["http.method",a],["http.phase",n]]))}}try{const h=this.vd;var f;if(f=e){const n=
e.context;f=`00-${n.traceId}-${n.spanId}-${e.Ma()?"01":"00"}`}var g={method:a,url:b,body:c.body,headers:Object.assign({},c.headers,{"X-Canva-Analytics":h.rc,"X-Canva-Api":this.ld,"X-Canva-Auth":h.sb,"X-Canva-Authz":h.tb,"X-Canva-User":h.bd,"X-Canva-Brand":h.uc,"X-Canva-App":h.app,"X-Canva-Build-Name":h.vc,"X-Canva-Build-Sha":h.wc,"X-Canva-Locale":h.Gc,"X-Canva-Request":c.Ba&&c.Ba.Zd,"X-Canva-Request-Case":c.Ba&&c.Ba.Pj,"X-Canva-Service-Method":c.Ba&&c.Ba.Uj,"X-Canva-Traceparent":f,"X-Csrf-Token":c.Ke&&
c.Ke.token}),Sd:c.Sd,withCredentials:!!this.Fb,timeout:c.dc};const k=await this.Mg.Tc(Object.assign({},g,{responseType:"text"}));null===e||void 0===e?void 0:e.setAttribute("http.status_code",k.status);return lh(this,b,k)}catch(h){null===e||void 0===e?void 0:e.setStatus("error");if(h instanceof zn){const k=new wn({requestUrl:b,message:h.message});k.stack=h.stack;null===e||void 0===e?void 0:e.setAttribute("http.error_type","timeout");throw k;}h instanceof qg?null===e||void 0===e?void 0:e.setAttribute("http.error_type",
"http_service_error"):null===e||void 0===e?void 0:e.setAttribute("http.error_type","unknown");throw h;}finally{null===e||void 0===e?void 0:e.end()}}xf(a){const b=a.getResponseHeader("X-Canva-Auth");a=a.getResponseHeader("X-Canva-Authz");null!=b&&(this.vd.sb="!"!==b?b:void 0);null!=a&&(this.vd.tb="!"!==a?a:void 0)}},jh=3E5,gh=3E4,fh="_ajax/csrf3";var ci=class extends Dn{get(a,b){return nh(this,"GET",a,b)}post(a,b,c){return kh(this,mh(a),c,d=>nh(this,"POST",a,c,d,b))}delete(a,b){return kh(this,mh(a),b,c=>nh(this,"DELETE",a,b,c))}};var Oh=class{jb(){return new En}Te(){return new En}Ff(){}Kf(){}Lf(){}},En=class{Vc(){return new Fn}startSpan(){return new Fn}ua(){}async flush(){}},Fn=class{constructor(){this.name="";this.attrs=new Map;this.ea="NOOP";this.Jb=[];this.status="unset";this.aa=new Map;this.startTime=performance.now();this.Aa="span";this.context={traceId:"",spanId:"",we:0};this.links=[]}Fa(){return new Gn}abort(){}Va(){}setAttribute(){return this}setStatus(){return this}$e(){return!1}Ma(){return!1}end(){return{bb:()=>
({}),cb:()=>({})}}ua(){}},Gn=class{ua(){}setAttribute(){}Va(){}};var Hn=class{constructor(a,b,c){var d;this.name=a;this.j=c;this.config={enabled:!0};this.enabled=!1;this.enabled=null!==(d=this.config.enabled)&&void 0!==d?d:!1;this.va=b}isEnabled(){return this.enabled}};var In=class extends Hn{constructor(a,b=new En){var c=window.PerformanceObserver;super("LongTaskService",b,a);this.Pc={type:"longtask",buffered:!0};this.PerformanceObserver=c;oh(this)&&this.enabled?(this.observer=new c(d=>{d=d.getEntries();for(const e of d)this.Ub.length>=this.ed&&(this.Ub=this.Ub.slice(d.length)),this.Ub.push(e)}),ph(this)):this.enabled=!1}enable(){oh(this)&&!this.enabled&&(this.enabled=!0,ph(this))}disable(){this.enabled=!1;var a;null===(a=this.observer)||void 0===a?void 0:a.disconnect()}};var Qh=class extends In{constructor(a){super(a,new En);this.Ub=[];this.ed=80}Od(a){if(this.enabled&&null!=a.startTime&&null!=a.endTime){var {count:b,duration:c}=rh(this,a.startTime,a.endTime);a.Va(new Map([["long_task_count",b],["long_task_duration",c]]));if(null==a.parentSpanId){const d=qh(this,a.startTime,a.endTime);if(0<d.length){const e=this.va.startSpan("long_tasks",a,{startTime:a.startTime});d.forEach(({startTime:f,duration:g,name:h})=>this.va.startSpan("long_task",e,{startTime:f,attrs:new Map([["name",
h]])}).end("ok",f+g));e.end()}}}}};var Rh=class extends Hn{constructor(a){var b=window.document;super("VisibilityService",new En,a);this.document=b;this.getCurrentTime=()=>performance.now();this.ed=40;this.Wa=[];this.Yb=()=>{const c="visible"===this.document.visibilityState?1:0;this.Wa.length>=this.ed&&(this.Wa=this.Wa.slice(1));this.Wa.push({status:c,time:this.getCurrentTime()})};this.enable()}disable(){this.enabled=!1;this.document.removeEventListener("visibilitychange",this.Yb)}enable(){this.enabled=!0;this.Tf=this.getCurrentTime();
this.document.addEventListener("visibilitychange",this.Yb);this.Wa.push({status:"visible"===this.document.visibilityState?1:0,time:this.Tf})}Od(a){this.enabled&&null!=a.startTime&&null!=a.endTime&&a.setAttribute("was_always_visible",sh(this,a.startTime,a.endTime))}};var Sh=class extends Hn{constructor(a){super("UnhandledExceptions",new En,a);this.Da=new Set;this.kg=b=>{var c,d;try{(null===(d=null===(c=b.exception)||void 0===c?void 0:c.values)||void 0===d?0:d.some(e=>{var f;return!1===(null===(f=e.mechanism)||void 0===f?void 0:f.handled)}))&&this.enabled&&this.rg(b.event_id)}catch(e){this.j.C(e,{J:"Failed to close all spans"})}return b};this.rg=b=>{for(const c of this.Da)c.name+=".unhandled_exception",c.end("error",new Map([["unhandled_exception",!0],["sentry_event_id",
b]]));this.Da.clear()};a.Ce(b=>this.kg(b));this.enabled&&this.enable()}enable(){this.enabled=!0}disable(){this.enabled=!1;this.Da.clear()}na(a){this.enabled&&this.Da.add(a)}Od(a){this.enabled&&this.Da.delete(a)}};var Jn=class{constructor(){this.Ga=0;this.qb=NaN;this.oc=0;this.kc=this.mc=NaN}add(a,b=1){l(isFinite(a));l(0<b);if(0===this.Ga)this.Ga=b,this.kc=this.mc=this.qb=a,this.oc=0;else{this.Ga+=b;const c=a-this.qb;this.qb+=b*c/this.Ga;this.oc+=b*c*(a-this.qb);this.mc=Math.min(this.mc,a);this.kc=Math.max(this.kc,a)}}addAll(a){for(const b of a)this.add(b)}get count(){return this.Ga}get kh(){return this.qb}get min(){return this.mc}get max(){return this.kc}get Bh(){return 0===this.Ga?NaN:1===this.Ga?0:Math.max(this.oc,
0)/this.Ga}get Ah(){return Math.sqrt(this.Bh)}};var Kn=class{constructor(){var a=window.document;this.Yd=window;this.document=a;this.ob=new Jn;this.wf=b=>{void 0!==this.Qc&&this.ob.add(Math.min(b-this.Qc,5E3));this.Qc=this.Ze?b:void 0;this.jd=this.Yd.requestAnimationFrame(this.wf)};this.Yb=()=>{this.Ze||(this.Qc=void 0)}}start(){this.ob=new Jn;this.Qc=void 0;this.jd=this.Yd.requestAnimationFrame(this.wf);this.document.addEventListener("visibilitychange",this.Yb)}get Ze(){return"visible"===this.document.visibilityState}},Ln=class{constructor(){this.hb=
0;this.jf=new Jn;this.Ye=new Set}reset(){this.hb=0;this.jf=new Jn;this.Ye.clear()}},uh=new Ln;var Mn=Ch(16),Nn=Ch(8),Bh=Array(32);var Fh=class{constructor(a){var b,c,d;this.Hb=this.aborted=this.ended=!1;this.attrs=new Map;this.Jb=[];this.Kb=[];this.status="unset";this.Md=[];this.nh=[];this.bb=f=>yh(Object.assign({},{span:this,j:this.j,xa:this.xa},f));this.cb=()=>this.Ma()?this.context:void 0;this.name=a.name;this.ended=!1;this.ya=a.ya;this.getCurrentTime=null!==(b=a.getCurrentTime)&&void 0!==b?b:f=>{var g;return null!==(g=null===f||void 0===f?void 0:f.override)&&void 0!==g?g:performance.now()};b=Nn();this.identifier=`${this.name}_${b}`;
this.startTime=this.getCurrentTime({id:this.identifier,override:a.startTime});this.ea=a.ea;this.za=a.za;this.Aa=a.Aa;this.j=a.j;this.Oa=a.Oa;const e=(null===(c=a.O)||void 0===c?void 0:c.context.traceId)||Mn();a.attrs&&(this.attrs=new Map(a.attrs));this.attrs.set("span_type",this.Aa);c=a.ya.Af.Nf({traceId:e,Uc:this.name,attributes:this.attrs,O:a.O})?1:0;this.context={spanId:b,traceId:e,we:c};this.links=a.links||[];a.O&&(this.parentSpanId=a.O.context.spanId,this.O=a.O);this.La=a.La;this.xa=a.xa;this.setStatus("ok");
this.timeout=setTimeout(()=>{this.name+=".timed_out";this.setAttribute("timed_out",!0);this.end("ok")},a.timeout||12E4);for(const f of this.ya.plugins)if(f.isEnabled())try{null===(d=f.na)||void 0===d?void 0:d.call(f,this)}catch(g){this.j.C(g,{J:"Error calling plugin onSpanStart",extra:new Map([["plugin",f.name],...zh(this)])})}this.ya.$b.na(this)}Fa(){return this.za||new Gn}Va(a){this.Hb||(this.attrs=new Map([...this.attrs,...a]))}setAttribute(a,b,c=!1){if(this.Hb&&!c)return this;this.attrs.set(a,
b);return this}setStatus(a){try{if(this.Hb)return this;this.status=a;return this}catch(b){return this.status="error",this.j.C(b),this}}$e(){return!this.ended}Ma(){return 0!==(this.context.we&1)}abort(){var a;try{if(!this.aborted){this.aborted=!0;this.setAttribute("span_aborted",!0);for(const b of this.Kb)b.abort();this.ended||(this.Hb=this.ended=!0,this.timeout&&clearTimeout(this.timeout),(null===(a=this.Oa)||void 0===a?0:a.frameRate)&&vh(this.Oa.frameRate),this.endTime=this.getCurrentTime(),this.duration=
this.endTime-this.startTime,Dh(this),Gh(this),this.nh.forEach(b=>b()),this.ya.$b.process(this))}}catch(b){this.j.C(b)}}end(a,b,c){try{if(this.ended)return{bb:this.bb,cb:this.cb};this.ended=!0;return Hh(this,a,b,c)}catch(d){return this.j.C(d,{J:"Error ending span",extra:new Map(zh(this))}),{bb:this.bb,cb:this.cb}}}ua(a,b){try{l(0<a.length,"Event name cannot be empty");const {Jc:c,Kc:d}=Ah(b),e=new On({name:a,O:this,ya:this.ya,La:this.La,ea:this.ea,j:this.j,startTime:null===d||void 0===d?void 0:d.startTime,
za:void 0,Aa:"event",Tb:null===d||void 0===d?void 0:d.Tb,getCurrentTime:this.getCurrentTime,xa:this.xa,attrs:(null===d||void 0===d?void 0:d.attrs)||c,Td:this.startTime});this.Jb.push(e)}catch(c){this.j.C(c)}}get aa(){return this.La()}},On=class extends Fh{constructor(a){super(a);null!=a.Td&&(this.setAttribute("parent_relative_start_ms",Math.round(this.startTime-a.Td)),this.setAttribute("parent_start",a.Td));a.Tb&&this.setAttribute("event_type",a.Tb);this.end("ok",this.startTime)}};var Ih=class{constructor(a,b,c,d,e,f){var g=new Set;this.name=a;this.type=b;this.Pa=c;this.j=d;this.bc=e;this.Bc=f;this.zd=g;this.Md=[];this.ended=!1}ua(a,b){try{let {Jc:c,Kc:d}=Ah(b);null!=c||(c=new Map);null!=d||(d={});b=d.attrs=c;b.set("user_operation",this.name);b.set("is_uop",!0);b.set("sample_rate_override",1);null!=this.type&&b.set("uop_attr_type",this.type);this.bc&&b.set("uop_persist",!0);this.Pa.ua(a,d)}catch(c){this.j.C(c,{tags:new Map([["user_operation",this.name]])})}}Va(a){this.Pa.Va(a)}setAttribute(a,
b){this.Pa.setAttribute(a,b)}};var Pn=class{constructor(a,b,c,d,e,f,g,h=n=>{var q;return null!==(q=null===n||void 0===n?void 0:n.override)&&void 0!==q?q:performance.now()},k={frameRate:()=>new Kn}){this.ea=a;this.xa=b;this.config=c;this.La=d;this.j=e;this.ad=f;this.ic=g;this.getCurrentTime=h;this.wd=k}Vc(a,b){return this.startSpan(a,void 0,b)}startSpan(a,b,c){var d;try{const {Jc:e,Kc:f}=Ah(c),g=ha(this.ea(b),"No instrumentation scope found for '{}' of parent '{}:{}'",a,null===b||void 0===b?void 0:b.ea,null===b||void 0===b?void 0:
b.context.spanId),h=(null===(d=null===f||void 0===f?void 0:f.performance)||void 0===d?0:d.zj)?this.wd.frameRate():void 0;null===h||void 0===h?void 0:h.start();const k=(null===f||void 0===f?0:f.Of)?Jh({Oc:Object.assign({},f.Of,{startTime:f.startTime,timeout:f.timeout}),va:this.ad,O:b,wg:[this.ic,this.config.ic].filter(cf),j:this.j,ph:q=>{b=q}}):Kh(b),n=new Fh({name:a,O:b,ya:this.config,La:this.La,ea:g,j:this.j,getCurrentTime:this.getCurrentTime,startTime:null===f||void 0===f?void 0:f.startTime,timeout:null===
f||void 0===f?void 0:f.timeout,xa:this.xa,attrs:(null===f||void 0===f?void 0:f.attrs)||e,links:null===f||void 0===f?void 0:f.links,za:k,Aa:"span",Oa:{frameRate:h}});null===k||void 0===k?void 0:(n.attrs.get("is_uop")||n.setAttribute("user_operation",k.name),null==k.bc&&(k.bc=n.Ma(),k.bc&&k.Pa.setAttribute("uop_persist",!0)),k.zd.add(n));null!=b&&b instanceof Fh&&b.Kb.push(n);return n}catch(e){return this.j.C(e),new Fn}}ua(a,b){try{const {Jc:c,Kc:d}=Ah(b);l(0<a.length,"Event name cannot be empty");
const e=ha(this.ea(),"Event ({}) requires instrumentation scope",a);new On({name:a,ya:this.config,La:this.La,ea:e,za:void 0,j:this.j,Aa:"event",Tb:null===d||void 0===d?void 0:d.Tb,getCurrentTime:this.getCurrentTime,startTime:null===d||void 0===d?void 0:d.startTime,xa:this.xa,attrs:(null===d||void 0===d?void 0:d.attrs)||c,O:void 0})}catch(c){this.j.C(c)}}async flush(){try{await this.config.$b.flush()}catch(a){this.j.C(a)}}};var Qn=class{na(){}process(){}async flush(){}};var Xh=class{Nf(){return!0}};var Vh=class{constructor(a={},b,c=e=>{var f;return null!==(f=null===e||void 0===e?void 0:e.override)&&void 0!==f?f:performance.now()},d={frameRate:()=>new Kn}){this.j=b;this.getCurrentTime=c;this.wd=d;this.config=Object.assign({},{Af:new Xh,$b:new Qn,aa:new Map,plugins:[]},a);this.serviceName=(a=this.config.aa.get("service.name"))&&"string"===typeof a?a:"no_service_name";this.ad=this.jb("telemetry.user_operation")}jb(a,b){var c;try{return new Pn(()=>a,this,this.config,()=>new Map([...this.config.aa,
["service.name",this.serviceName+" | "+a]]),this.j,this.ad,null===b||void 0===b?void 0:b.ic,this.getCurrentTime,this.wd)}catch(d){return this.j.C(d,{extra:new Map([["attrs",Object.fromEntries(null===(c=this.config)||void 0===c?void 0:c.aa)]])}),new En}}Te(a){var b;try{return new Pn(c=>null===c||void 0===c?void 0:c.ea,this,this.config,()=>this.config.aa,this.j,this.ad,null===a||void 0===a?void 0:a.ic,this.getCurrentTime)}catch(c){return this.j.C(c,{extra:new Map([["attrs",Object.fromEntries(null===
(b=this.config)||void 0===b?void 0:b.aa)]])}),new En}}Ff(a){try{a.oj().then(b=>{this.config.aa.set("device.model",b)}).catch(b=>{this.j.C(b)})}catch(b){this.j.C(b)}}Kf(a){try{this.config.aa.set("ctx.user",a.pj())}catch(b){this.j.C(b)}try{this.config.aa.set("ctx.brand",a.nj())}catch(b){this.j.C(b)}}Lf(a){this.config.ic=a}qc(a){var b;try{const c=a.name;if(this.config.plugins.some(d=>d.name===c))throw Error(`Plugin already exists: ${a.name}`);this.config.plugins.push(a)}catch(c){this.j.C(c,{extra:new Map([["attrs",
Object.fromEntries(null===(b=this.config)||void 0===b?void 0:b.aa)]])})}}Id(a){var b;try{return this.config.plugins.find(c=>c.name===a)}catch(c){this.j.C(c,{extra:new Map([["attrs",Object.fromEntries(null===(b=this.config)||void 0===b?void 0:b.aa)]])})}}};var Zh=class{constructor(a,b){this.df=a;this.j=b;this.qd=[];this.rd=[];this.V=void 0;this.df.then(c=>this.V=c).then(()=>{for(const c of this.rd)this.V.na(c);this.rd.length=0;return this.flush()})}na(a){this.V?this.V.na(a):this.rd.push(a)}process(a){try{this.V?this.V.process(a):this.qd.push(a)}catch(b){this.j.C(b,{J:`Failed to export the span buffer from ${Zh.name}`,extra:new Map(zh(a))})}}async flush(){const a=await this.df;this.qd.forEach(b=>a.process(b));await a.flush();this.qd.length=0}};var Wh=class{constructor(a=0,b){var c=Mh;this.sampleRate=a;this.j=b;this.jh=c;this.sampleRate=Math.min(Math.max(0,this.sampleRate),1)}Nf({Uc:a,attributes:b,O:c}){b=null===b||void 0===b?void 0:b.get("sample_rate_override");if(null!=b&&"number"===typeof b){if(0>b||1<b)this.j.error(Error(`Invalid sample rate (${b}) for ${a}`)),b=this.sampleRate;return Math.random()<b}a=this.jh(c);return null!=a?a:Math.random()<this.sampleRate}};var si="https://thirdparty-public-apps.canva-apps.com https://thirdparty-private-apps.canva-apps.com https://thirdparty-public-apps.canva-apps.cn https://thirdparty-private-apps.canva-apps.cn https://thirdparty-public-apps.canva-apps-staging.com https://thirdparty-private-apps.canva-apps-staging.com https://thirdparty-public-apps.canva-apps-staging.cn https://thirdparty-private-apps.canva-apps-staging.cn https://thirdparty-public-apps.canva-apps-dev.com https://thirdparty-private-apps.canva-apps-dev.com https://thirdparty-public-apps-tmp.canva-apps.com https://thirdparty-private-apps-tmp.canva-apps.com https://thirdparty-public-apps-tmp.canva-apps.cn https://thirdparty-private-apps-tmp.canva-apps.cn https://thirdparty-public-apps-tmp.canva-apps-staging.com https://thirdparty-private-apps-tmp.canva-apps-staging.com https://thirdparty-public-apps-tmp.canva-apps-staging.cn https://thirdparty-private-apps-tmp.canva-apps-staging.cn https://thirdparty-public-apps-tmp.canva-apps-dev.com https://thirdparty-private-apps-tmp.canva-apps-dev.com".split(" ");
void(async()=>{var a=on.D;let b={};var c=performance.now(),d=la("base",ak.D,b),e={start:c,end:performance.now()};d.Hg&&(b=Object.assign({},b,{Fe:!0}),d=la("base",ak.D,b));const f=d.Oh;c=performance.now();a=la("page",a,Object.assign({},b,{Nh:f}));c={start:c,end:performance.now()};({P:e}={P:{od:d,Zb:a},Bi:{Ai:e,Fj:c}});d=e.Zb;const {j:g,Wc:h}=await ei({od:e.od});e=h.jb("app_sandbox_editor").Vc("load_page",{Of:{name:"app_sandbox_editor.use_app"}});try{void oi({j:g,Wc:h,Zb:d,Ph:e})}catch(k){e.end("error")}e.end("ok")})();
}).call(self, self._45f7853dc7660378a038952b53c0953e);},

/***/ 240628:
(_, __, r) => r(413926)

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, [5436,2653], () => (__webpack_exec__(413926), __webpack_exec__(240628)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
])
//# sourceMappingURL=sourcemaps/0ffa1dae0a2cbf54.js.map